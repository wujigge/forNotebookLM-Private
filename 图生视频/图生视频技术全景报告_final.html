<!DOCTYPE html>

<html lang="zh-CN">
<head><script src="https://image.uc.cn/s/uae/g/3n/mos-production/0915/echarts.min.js"></script>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>图生视频技术全景：主流工具与应用指南</title>
<!-- 防止FOUC(Flash of Unstyled Content) - 页面加载时装饰元素闪现问题 -->
<style>
    body {
      opacity: 0;
      transition: opacity 0.3s ease-out;
    }
    body.loaded {
      opacity: 1;
    }
  </style>
<!-- Favicon - 通义千问 -->
<link href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 178.77 178.6'%3E%3Cpath d='M117.53,70.8c.4,0,.5.2.3.5l-6.8,11.9-21.2,37.3c0,.2-.2.2-.4.2s-.3,0-.4-.2l-28.1-49c-.2-.3,0-.4.2-.4h1.8l54.7-.2h0l-.1-.1ZM66.43,5.6c-.2,0-.3,0-.4.2l-23.3,40.8c-.2.4-.6.6-1.1.6h-23.3c-.5,0-.6.2-.3.6l47.2,82.6c.2.3.1.5-.3.5h-22.7c-.7,0-1.3.4-1.6,1.1l-10.7,18.8c-.4.6-.2,1,.6,1h46.5c.4,0,.7.2.8.6l11.4,20c.4.7.7.7,1.1,0l40.7-71.2,6.4-11.2c0-.2.2-.2.4-.2s.3,0,.4.2l11.6,20.6c.2.3.5.5.9.5l22.5-.2c.1,0,.2,0,.3-.2v-.3l-23.6-41.4c-.2-.3-.2-.6,0-.9l2.4-4.1,9.1-16.1c.2-.3,0-.5-.3-.5h-94.3c-.5,0-.6-.2-.3-.6l11.7-20.4c.2-.3.2-.6,0-.9l-11.1-19.5c0-.2-.2-.3-.4-.3h0l-.3-.1ZM94.33,2.4c3.2,5.6,6.4,11.2,9.5,16.9.3.5.7.7,1.3.7h45.1c1.4,0,2.6.9,3.6,2.7l11.8,20.9c1.5,2.7,2,3.9.2,6.8-2.1,3.5-4.2,7-6.2,10.6l-3,5.4c-.9,1.6-1.8,2.3-.3,4.2l21.6,37.7c1.4,2.4.9,4-.3,6.3-3.6,6.4-7.2,12.7-10.9,19-1.3,2.2-2.9,3-5.5,3-6.3-.1-12.6,0-18.9.1-.3,0-.5.2-.7.4-7.3,12.9-14.6,25.7-22,38.5-1.4,2.4-3.1,3-5.9,3h-24.5c-1.7,0-2.9-.7-3.8-2.2l-10.9-18.9c-.1-.3-.4-.4-.7-.4h-41.6c-2.3.2-4.5,0-6.5-.7l-13-22.5c-.8-1.5-.8-2.9,0-4.4l9.8-17.2c.3-.5.3-1.1,0-1.6-5.1-8.9-10.2-17.7-15.2-26.6l-6.4-11.3c-1.3-2.5-1.4-4,.8-7.8,3.8-6.6,7.5-13.2,11.3-19.8,1.1-1.9,2.5-2.7,4.7-2.7h21.1c.4,0,.7-.2.9-.5L62.53,2.2c.8-1.3,1.9-2,3.4-2h12.9l8.3-.2c2.8,0,5.9.3,7.3,2.8l-.1-.4Z' fill='%23615ced' fill-rule='evenodd'/%3E%3C/svg%3E" rel="icon" type="image/svg+xml"/>
<!-- 1. 预连接关键资源 - 阿里巴巴集团 CDN -->
<link href="https://image.uc.cn" rel="preconnect"/>
<!-- 2. Tailwind CSS - 阿里 UC CDN (国内快速) -->
<script src="https://image.uc.cn/s/uae/g/3n/mos-production/0915/3.4.17.js"></script>
<!-- 4. 非关键JS库 - 延迟加载 (阿里巴巴集团 CDN) -->
<script>
    // 按需加载配置 - 阿里 UC CDN
    window.LAZY_LIBS = {
      echarts: 'https://image.uc.cn/s/uae/g/3n/mos-production/0915/echarts.min.js',
      mermaid: 'https://image.uc.cn/s/uae/g/3n/mos-production/mermaid.min_v11.4.js',
      viz: 'https://image.uc.cn/s/uae/g/3n/mos-production/viz-standalone.js',
      katex: 'https://image.uc.cn/s/uae/g/3n/mos-production/latest/katex.min.js',
      katexAuto: 'https://image.uc.cn/s/uae/g/3n/mos-production/latest/auto-render.min.js',
      katexCss: 'https://image.uc.cn/s/uae/g/3n/mos-production/latest/katex.min.css'
    };
    
    // 动态加载脚本
    function loadScript(url, callback) {
      var script = document.createElement('script');
      script.src = url;
      script.onload = callback;
      document.head.appendChild(script);
    }
    
    // 动态加载样式
    function loadStyle(url) {
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = url;
      document.head.appendChild(link);
    }
  </script>
<!-- 3. Tailwind 配置 -->
<script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', 'system-ui', '-apple-system', 'sans-serif'],
            serif: ['Songti SC', 'STSong', 'SimSun', 'Georgia', 'serif'],
          },
          colors: {
            primary: {
              DEFAULT: '#3B82F6',
              light: '#60A5FA',
              dark: '#1D4ED8',
            },
            theme: {
              bg: '#F0F9FF',
              text: '#0F172A',
              muted: '#64748B',
              surface: 'rgba(255,255,255,0.85)',
            }
          }
        }
      }
    }
  </script>
<style>

    /* CSS Variables for Theme - 减少重复，提高性能 */
    :root {
      --c-primary: #3B82F6;
      --c-primary-light: #60A5FA;
      --c-primary-dark: #1D4ED8;
      --c-bg: #F0F9FF;
      --c-bg-via: #E0F2FE;
      --c-text: #0F172A;
      --c-text-muted: #64748B;
      --c-surface: rgba(255,255,255,0.85);
      --c-surface-border: rgba(59,130,246,0.2);
      --c-scrollbar: #93C5FD;
      --font-sans: 'SF Pro Display', 'PingFang SC', 'Microsoft YaHei', system-ui, sans-serif;
    }
    
    /* ================================================================
       1. BASE STYLES
       ================================================================ */
    html, body { 
      height: auto;
      overflow-x: hidden;
    }
    body { 
      font-family: var(--font-sans); 
      background: var(--c-bg);
      color: var(--c-text);
      min-height: 100vh;
      position: relative;
    }
    /* 左上角装饰光晕 */
    body::before {
      content: '';
      position: fixed;
      top: -200px;
      left: -200px;
      width: 500px;
      height: 500px;
      background: radial-gradient(circle, #3B82F612, transparent 70%);
      pointer-events: none;
      z-index: 0;
    }
    /* 右侧装饰光晕 */
    body::after {
      content: '';
      position: fixed;
      top: 30%;
      right: -150px;
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, #60A5FA08, transparent 70%);
      pointer-events: none;
      z-index: 0;
    }
    body > * {
      position: relative;
      z-index: 1;
    }
    
    main {
      max-width: 1200px;
      margin: 0 auto;
    }
    h1, h2, h3, h4, h5, h6 { font-family: 'Songti SC', 'SimSun', serif; }
    
    
    /* Animations */
    @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .animate-fadeIn { animation: fadeIn 0.3s ease-out; }
    .animate-slideUp { animation: slideUp 0.5s ease-out; }
    
    /* Pattern */
    .pattern-elegant {
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 5L55 17.5V42.5L30 55L5 42.5V17.5L30 5z' fill='none' stroke='%233B82F6' stroke-opacity='0.08' stroke-width='1'/%3E%3C/svg%3E");
    }
    
    /* Card hover effect */
    .card-hover {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .card-hover:hover {
      transform: translateY(-6px);
      box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.15);
    }

    /* ================================================================
       2. TYPOGRAPHY
       ================================================================ */
    .markdown-content h1 {
      font-size: clamp(1.8rem, 4vw, 2.5rem);
      font-weight: 700;
      color: #0F172A;
      margin: 1.5em 0 0.8em;
      text-align: center;
      letter-spacing: 0.05em;
    }
    .markdown-content h1::after {
      content: '';
      display: block;
      width: 60px;
      height: 3px;
      background: linear-gradient(90deg, #3B82F6, #60A5FA);
      margin: 0.5em auto 0;
      border-radius: 2px;
    }
    
    .markdown-content h2 {
      font-size: clamp(1.4rem, 3vw, 1.8rem);
      font-weight: 600;
      color: #0F172A;
      margin: 2em 0 1em;
      padding-bottom: 0.5em;
      border-bottom: 2px solid rgba(59,130,246,0.2);
      position: relative;
    }
    .markdown-content h2::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 80px;
      height: 2px;
      background: #3B82F6;
    }
    
    .markdown-content h3 {
      font-size: clamp(1.1rem, 2.5vw, 1.4rem);
      font-weight: 600;
      color: #0F172A;
      margin: 1.8em 0 0.8em;
      padding: 0.4em 0.8em;
      background: linear-gradient(135deg, rgba(59,130,246, 0.08) 0%, rgba(59,130,246, 0.03) 100%);
      border-radius: 6px;
    }
    
    .markdown-content h4 {
      font-size: clamp(1rem, 2vw, 1.2rem);
      font-weight: 600;
      font-family: 'SF Pro Display', 'PingFang SC', 'Microsoft YaHei', system-ui, sans-serif;
      color: #0F172A;
      margin: 1.5em 0 0.6em;
      padding: 0.3em 0;
      border-bottom: 1px solid rgba(59,130,246, 0.3);
    }
    
    .markdown-content h5 {
      font-size: clamp(0.95rem, 1.8vw, 1.1rem);
      font-weight: 600;
      font-family: 'SF Pro Display', 'PingFang SC', 'Microsoft YaHei', system-ui, sans-serif;
      color: #334155;
      margin: 1em 0 0.5em;
      padding: 0.2em 0;
      border-bottom: 1px dashed rgba(100,116,139, 0.3);
    }
    
    .markdown-content h6 {
      font-size: clamp(0.9rem, 1.6vw, 1rem);
      font-weight: 600;
      font-family: 'SF Pro Display', 'PingFang SC', 'Microsoft YaHei', system-ui, sans-serif;
      color: #64748B;
      margin: 1em 0 0.5em;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .markdown-content p {
      line-height: 1.8;
      margin: 1em 0;
      color: #0F172A;
      text-indent: 0 !important;
    }
    
    /* 隐藏分割线 */
    .markdown-content hr {
      display: none;
    }
    
    .markdown-content a {
      color: #3B82F6;
      text-decoration: none;
      border-bottom: 1px solid transparent;
      transition: all 0.2s;
    }
    .markdown-content a:hover {
      border-bottom-color: #3B82F6;
    }
    
    /* Table reference citations */
    .table-ref {
      font-size: 0.75em;
      vertical-align: super;
      margin-left: 2px;
    }
    .table-ref a {
      color: #3B82F6;
      background: #3B82F615;
      padding: 1px 4px;
      border-radius: 3px;
      text-decoration: none;
      border-bottom: none !important;
      transition: background 0.2s;
    }
    .table-ref a:hover {
      background: #3B82F630;
      border-bottom: none !important;
    }
    
    .markdown-content blockquote {
      margin: 1em 1.5em;
      padding: 0.6em 1em;
      background: rgba(59,130,246, 0.04);
      border: none;
      border-left: 3px solid rgba(59,130,246, 0.4);
      border-radius: 0 6px 6px 0;
      font-style: normal;
      color: #334155;
    }
    
    .markdown-content code {
      background: rgba(255,255,255,0.85);
      padding: 0.2em 0.4em;
      border-radius: 4px;
      font-size: 0.85em;
      color: #1D4ED8;
      font-family: 'SF Mono', 'Fira Code', 'Monaco', 'Consolas', 'Ubuntu Mono', monospace;
      word-break: break-all;
      overflow-wrap: break-word;
    }
    
    /* ================================================================
       3. CODE BLOCKS
       ================================================================ */
    /* Code block wrapper with header bar */
    .code-block-wrapper {
      position: relative;
      margin: 1.5em 0;
      border-radius: 10px;
      overflow: hidden;
      background: #1e1e2e;
      border: 1px solid rgba(59,130,246, 0.2);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    /* Header bar */
    .code-block-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 1rem;
      height: 38px;
      background: linear-gradient(180deg, #2d2d3d, #252535);
      border-bottom: 1px solid #3d3d4d;
    }
    /* Window controls (macOS style) */
    .code-window-controls {
      display: flex;
      gap: 6px;
    }
    .code-window-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }
    .code-window-dot.red { background: #ff5f56; }
    .code-window-dot.yellow { background: #ffbd2e; }
    .code-window-dot.green { background: #27ca40; }
    /* Language label in header */
    .code-lang-label {
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.05em;
      color: #a0a0b0;
      text-transform: uppercase;
    }
    /* Copy button in header */
    .code-header-actions {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    /* Old position label - hidden now */
    .code-block-wrapper > .code-lang-label {
      position: absolute;
      top: 8px;
      right: 60px;
      font-size: 10px;
      font-weight: 500;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: #888;
      z-index: 15;
    }
    /* Code copy button */
    .code-copy-btn {
      position: absolute;
      top: 6px;
      right: 8px;
      padding: 4px 8px;
      background: transparent;
      border: none;
      border-radius: 4px;
      color: #888;
      font-size: 11px;
      cursor: pointer;
      opacity: 0;
      transition: all 0.2s ease;
      z-index: 20;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .code-copy-btn:hover {
      background: #333;
      color: #fff;
    }
    .code-copy-btn.copied {
      color: #10b981;
    }
    
    /* Renderable code block with preview (Mermaid, ECharts, etc.) */
    .renderable-code-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin: 1.5em 0;
      align-items: start;
    }
    .renderable-code-container .code-block-wrapper {
      margin: 0;
    }
    .renderable-preview {
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 10px;
      padding: 1rem;
      min-height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: auto;
    }
    .renderable-preview-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.5rem 1rem;
      background: linear-gradient(180deg, #3B82F615, #3B82F608);
      border-bottom: 1px solid rgba(59,130,246,0.2);
      border-radius: 10px 10px 0 0;
    }
    .renderable-fullscreen-btn {
      background: transparent;
      border: 1px solid #3B82F640;
      border-radius: 6px;
      padding: 4px 8px;
      cursor: pointer;
      font-size: 14px;
      color: #3B82F6;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .renderable-fullscreen-btn:hover {
      background: #3B82F620;
      border-color: #3B82F6;
    }
    .renderable-fullscreen-btn span.btn-text {
      font-size: 11px;
      font-weight: 500;
    }
    /* Fullscreen overlay */
    .renderable-fullscreen-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.9);
      z-index: 10000;
      display: flex;
      flex-direction: column;
      padding: 20px;
      box-sizing: border-box;
    }
    .renderable-fullscreen-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background: rgba(255,255,255,0.85);
      border-radius: 10px 10px 0 0;
      border-bottom: 1px solid rgba(59,130,246,0.2);
    }
    .renderable-fullscreen-title {
      color: #0F172A;
      font-size: 14px;
      font-weight: 600;
    }
    .renderable-fullscreen-close {
      background: #ef4444;
      border: none;
      border-radius: 6px;
      padding: 8px 16px;
      cursor: pointer;
      font-size: 14px;
      color: white;
      font-weight: 500;
      transition: all 0.2s ease;
    }
    .renderable-fullscreen-close:hover {
      background: #dc2626;
    }
    .renderable-fullscreen-content {
      flex: 1;
      background: rgba(255,255,255,0.85);
      border-radius: 0 0 10px 10px;
      padding: 20px;
      overflow: auto;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .renderable-fullscreen-content svg {
      max-width: 100%;
      max-height: 100%;
    }
    .renderable-preview-title {
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.05em;
      color: #3B82F6;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .renderable-preview-wrapper {
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 10px;
      overflow: hidden;
      background: rgba(255,255,255,0.85);
    }
    .renderable-preview-content {
      padding: 1.5rem;
      min-height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: auto;
      background: white;
    }
    .renderable-preview-content svg {
      max-width: 100%;
      height: auto;
    }
    /* Mermaid diagram styling */
    .mermaid {
      text-align: center;
    }
    /* Mobile: stack vertically */
    @media (max-width: 900px) {
      .renderable-code-container {
        grid-template-columns: 1fr;
      }
    }
    
    .markdown-content pre {
      background: #1e1e2e;
      padding: 1em 1.5em;
      margin: 0;
      overflow-x: auto;
      overflow-y: auto;
      max-height: 450px;
      border-radius: 0 0 10px 10px;
      border: none;
    }
    .markdown-content pre code {
      background: transparent;
      padding: 0;
      display: block;
      color: #e0e0e0;
      font-size: 0.9em;
      line-height: 1.6;
      font-family: 'SF Mono', 'Fira Code', 'Monaco', 'Consolas', 'Ubuntu Mono', monospace;
    }
    /* For pre without wrapper (fallback) */
    .markdown-content > pre:not(.code-block-wrapper pre) {
      border-radius: 10px;
      border: 1px solid rgba(59,130,246, 0.15);
      margin: 1.5em 0;
      padding-top: 3em;
      position: relative;
      background: #1e1e2e;
    }
    .markdown-content > pre:not(.code-block-wrapper pre)::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 38px;
      background: linear-gradient(180deg, #2d2d3d, #252535);
      border-radius: 10px 10px 0 0;
      border-bottom: 1px solid #3d3d4d;
    }
    .markdown-content > pre:not(.code-block-wrapper pre)::after {
      content: '';
      position: absolute;
      top: 14px;
      left: 14px;
      width: 10px;
      height: 10px;
      background: #ff5f56;
      border-radius: 50%;
      box-shadow: 16px 0 0 #ffbd2e, 32px 0 0 #27ca40;
    }
    .code-block-wrapper:hover .code-copy-btn {
      opacity: 1;
    }
    .code-copy-btn {
      padding: 4px 8px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 4px;
      color: #a0a0b0;
      font-size: 11px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .code-copy-btn:hover {
      background: rgba(255,255,255,0.15);
      color: #ffffff;
    }
    .code-copy-btn.copied {
      background: #27ca40;
      color: #fff;
      border-color: #27ca40;
    }
    .code-copy-btn svg {
      width: 14px;
      height: 14px;
    }
    /* Code scrollbar */
    .markdown-content pre::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    .markdown-content pre::-webkit-scrollbar-track {
      background: #2d2d3d;
      border-radius: 4px;
    }
    .markdown-content pre::-webkit-scrollbar-thumb {
      background: #4d4d5d;
      border-radius: 4px;
    }
    .markdown-content pre::-webkit-scrollbar-thumb:hover {
      background: #5d5d6d;
    }
    /* Syntax highlighting - Pygments classes */
    .markdown-content .highlight { background: transparent; }
    .markdown-content .highlight pre { background: #1e1e2e; }
    /* Keywords */
    .markdown-content pre .k, .markdown-content pre .kd, .markdown-content pre .kn,
    .markdown-content pre .kp, .markdown-content pre .kr, .markdown-content pre .kt { color: #569cd6; }
    /* Strings */
    .markdown-content pre .s, .markdown-content pre .s1, .markdown-content pre .s2,
    .markdown-content pre .sa, .markdown-content pre .sb, .markdown-content pre .sc,
    .markdown-content pre .sd, .markdown-content pre .se, .markdown-content pre .sh,
    .markdown-content pre .si, .markdown-content pre .sx, .markdown-content pre .sr { color: #ce9178; }
    /* Comments */
    .markdown-content pre .c, .markdown-content pre .c1, .markdown-content pre .ch,
    .markdown-content pre .cm, .markdown-content pre .cp, .markdown-content pre .cpf,
    .markdown-content pre .cs { color: #6a9955; font-style: italic; }
    /* Numbers */
    .markdown-content pre .m, .markdown-content pre .mb, .markdown-content pre .mf,
    .markdown-content pre .mh, .markdown-content pre .mi, .markdown-content pre .mo,
    .markdown-content pre .il { color: #b5cea8; }
    /* Functions */
    .markdown-content pre .nf, .markdown-content pre .fm, .markdown-content pre .nv { color: #dcdcaa; }
    /* Classes */
    .markdown-content pre .nc, .markdown-content pre .nn, .markdown-content pre .ne { color: #4ec9b0; }
    /* Operators */
    .markdown-content pre .o, .markdown-content pre .ow { color: #d4d4d4; }
    /* Punctuation */
    .markdown-content pre .p { color: #d4d4d4; }
    /* Names / Variables */
    .markdown-content pre .n, .markdown-content pre .na, .markdown-content pre .nb,
    .markdown-content pre .ni, .markdown-content pre .nl, .markdown-content pre .no,
    .markdown-content pre .nt { color: #9cdcfe; }
    /* Built-ins */
    .markdown-content pre .bp { color: #4fc1ff; }
    /* Decorators */
    .markdown-content pre .nd { color: #dcdcaa; }
    /* Special */
    .markdown-content pre .err { color: #f44747; }
    .markdown-content pre .gd { color: #f44747; }
    .markdown-content pre .gi { color: #89d185; }
    
    /* ================================================================
       4. LISTS
       ================================================================ */
    .markdown-content ul {
      list-style-type: disc;
      list-style-position: outside;
      margin: 1em 0;
      padding-left: 1.5em;
    }
    .markdown-content ol {
      list-style-type: decimal;
      list-style-position: outside;
      margin: 1em 0;
      padding-left: 1.5em;
    }
    .markdown-content li {
      line-height: 1.7;
      color: #0F172A;
      margin: 0.2em 0;
    }
    .markdown-content li > p {
      display: inline;
      margin: 0;
    }
    .markdown-content li > p:first-child {
      display: inline;
    }
    .markdown-content li p {
      display: inline;
      margin: 0;
    }
    .markdown-content li::marker {
      color: #3B82F6;
    }
    .markdown-content li > ul,
    .markdown-content li > ol {
      margin: 0.3em 0;
    }
    
    /* ================================================================
       5. TABLES
       ================================================================ */
    .table-scroll-wrapper {
      margin: 1.5em auto;
      border-radius: 12px;
      background: rgba(255,255,255,0.85);
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      max-height: 70vh;
      overflow: auto;
      max-width: 96%;
    }
    
    .table-scroll-wrapper table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }
    
    .table-scroll-wrapper thead {
      position: sticky;
      top: 0;
      z-index: 10;
      background: #3B82F6;
    }
    
    .table-scroll-wrapper th {
      background: #3B82F6;
      color: white;
      padding: 14px 16px;
      font-weight: 600;
      text-align: left;
      white-space: nowrap;
    }
    
    .table-scroll-wrapper td {
      padding: 12px 16px;
      border-bottom: 1px solid rgba(59,130,246,0.2);
      color: #0F172A;
    }
    
    .table-scroll-wrapper tbody tr:last-child td {
      border-bottom: none;
    }
    
    .table-scroll-wrapper tbody tr:nth-child(odd) {
      background: rgba(255,255,255,0.85);
    }
    
    .table-scroll-wrapper tbody tr:nth-child(even) {
      background: rgba(59,130,246, 0.03);
    }
    
    .table-scroll-wrapper tbody tr:hover {
      background: rgba(59,130,246, 0.08);
    }
    
    /* 滚动条样式 */
    .table-scroll-wrapper::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    .table-scroll-wrapper::-webkit-scrollbar-track {
      background: transparent;
    }
    .table-scroll-wrapper::-webkit-scrollbar-thumb {
      background: rgba(0,0,0,0.1);
      border-radius: 4px;
    }
    .table-scroll-wrapper:hover::-webkit-scrollbar-thumb {
      background: #93C5FD;
    }
    .table-scroll-wrapper::-webkit-scrollbar-thumb:hover {
      background: #3B82F6;
    }
    
    /* 表格图片 */
    .table-scroll-wrapper td.has-images {
      white-space: nowrap;
    }
    .table-scroll-wrapper td.has-images br {
      display: none;
    }
    .table-scroll-wrapper td p {
      margin: 0;
      display: inline;
    }

    /* Table images - 统一方形裁切 */
    .markdown-content td img,
    .table-scroll-wrapper td img {
      width: 80px !important;
      height: 80px !important;
      min-width: 80px !important;
      min-height: 80px !important;
      max-width: 80px !important;
      max-height: 80px !important;
      object-fit: cover !important;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      cursor: pointer;
      display: inline-block;
      margin: 3px;
      vertical-align: middle;
      flex-shrink: 0;
    }
    .markdown-content td img:hover,
    .table-scroll-wrapper td img:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(59,130,246, 0.25);
    }
    @media (min-width: 768px) {
      .markdown-content td img,
      .table-scroll-wrapper td img { width: 100px !important; height: 100px !important; min-width: 100px !important; min-height: 100px !important; max-width: 100px !important; max-height: 100px !important; border-radius: 10px; }
    }
    @media (min-width: 1024px) {
      .markdown-content td img,
      .table-scroll-wrapper td img { width: 120px !important; height: 120px !important; min-width: 120px !important; min-height: 120px !important; max-width: 120px !important; max-height: 120px !important; }
    }
    
    /* 头像类图片 - 圆形 */
    .markdown-content td img.avatar,
    .markdown-content td.avatar-cell img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 2px solid rgba(59,130,246,0.2);
    }
    .markdown-content td img.avatar:hover,
    .markdown-content td.avatar-cell img:hover {
      border-color: #3B82F6;
    }
    @media (min-width: 768px) {
      .markdown-content td img.avatar,
      .markdown-content td.avatar-cell img { width: 70px; height: 70px; }
    }
    @media (min-width: 1024px) {
      .markdown-content td img.avatar,
      .markdown-content td.avatar-cell img { width: 80px; height: 80px; }
    }
    
    /* ================================================================
       6. CUSTOM COMPONENTS
       ================================================================ */
    
    /* ------ 6.1 Tianzige Cards (卡片展示表) ------ */
    .tianzige-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin: 1.5rem 0;
    }
    .tianzige-grid[data-columns="1"] { grid-template-columns: 1fr; }
    .tianzige-grid[data-columns="2"] { grid-template-columns: repeat(2, 1fr); }
    .tianzige-grid[data-columns="3"] { grid-template-columns: repeat(3, 1fr); }
    .tianzige-grid[data-columns="4"] { grid-template-columns: repeat(4, 1fr); }
    .tianzige-grid[data-columns="5"] { grid-template-columns: repeat(5, 1fr); }
    @media (max-width: 1200px) {
      .tianzige-grid[data-columns="5"] { grid-template-columns: repeat(3, 1fr); }
    }
    @media (max-width: 1024px) {
      .tianzige-grid[data-columns="4"],
      .tianzige-grid[data-columns="5"] { grid-template-columns: repeat(2, 1fr); }
      .tianzige-grid[data-columns="3"] { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 768px) {
      .tianzige-grid,
      .tianzige-grid[data-columns="2"],
      .tianzige-grid[data-columns="3"],
      .tianzige-grid[data-columns="4"],
      .tianzige-grid[data-columns="5"] {
        grid-template-columns: 1fr;
        gap: 0.8rem;
      }
    }
    
    .tianzige-card {
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      transition: all 0.2s ease;
      overflow: hidden;
    }
    .tianzige-card:hover {
      box-shadow: 0 4px 16px rgba(59,130,246, 0.12);
      transform: translateY(-2px);
    }
    
    /* 卡片内容区 */
    .tianzige-body {
      padding: 10px 12px;
    }
    
    /* 图片卡片 */
    .tianzige-image {
      width: 100%;
      height: 140px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(100,116,139, 0.05);
    }
    .tianzige-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      transition: transform 0.3s ease;
    }
    .tianzige-card:hover .tianzige-image img {
      transform: scale(1.02);
    }
    .tianzige-card.has-image .tianzige-body {
      padding: 8px 10px;
    }
    
    /* 标题行：标签与标题第一行对齐 */
    .tianzige-header {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      margin-bottom: 8px;
    }
    .tianzige-tag {
      padding: 4px 10px;
      background: #3B82F615;
      color: #3B82F6;
      font-size: 12px;
      font-weight: 500;
      border-radius: 12px;
      white-space: nowrap;
      border: 1px solid #3B82F625;
      line-height: 1.4;
      flex-shrink: 0;
      margin-top: 1px;
    }
    .tianzige-title {
      margin: 0;
      padding: 0;
      font-size: 15px;
      font-weight: 600;
      color: #0F172A;
      line-height: 1.4;
    }
    .tianzige-card h4.tianzige-title {
      margin: 0 !important;
      padding: 0 !important;
    }
    
    /* 正文内容 */
    .tianzige-content {
      font-size: 13px;
      color: #334155;
      line-height: 1.6;
      margin-bottom: 8px;
    }
    .tianzige-content:last-child {
      margin-bottom: 0;
    }
    
    /* 引用区块 */
    .tianzige-quote {
      margin: 8px 0 0 0;
      padding: 10px 12px;
      background: #3B82F60a;
      border-left: 3px solid #3B82F6;
      border-radius: 0 6px 6px 0;
      font-style: italic;
      color: #0F172A;
      font-size: 13px;
      line-height: 1.5;
    }
    
    /* 来源 */
    .tianzige-source {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 4px;
      margin-top: 8px;
      font-style: normal;
      font-size: 12px;
      color: #64748B;
    }
    .tianzige-source-line {
      color: #64748B;
    }
    .tianzige-favicon {
      width: 14px;
      height: 14px;
      border-radius: 2px;
    }
    .tianzige-source a {
      color: #3B82F6;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }
    .tianzige-source a:hover {
      text-decoration: underline;
    }
    
    /* ------ 6.2 Sequence Timeline (序列表/时间线) ------ */
    .sequence-timeline {
      position: relative;
      padding: 2rem 0;
      margin: 2rem auto;
      max-width: 900px;
    }
    
    /* 中间的竖线 */
    .sequence-line {
      position: absolute;
      left: 50%;
      top: 0;
      bottom: 0;
      width: 4px;
      background: linear-gradient(180deg, #3B82F640, #3B82F6, #3B82F640);
      transform: translateX(-50%);
      border-radius: 2px;
    }
    
    /* 每个节点项 */
    .sequence-item {
      position: relative;
      display: flex;
      align-items: flex-start;
      margin-bottom: 2rem;
    }
    .sequence-item:last-child {
      margin-bottom: 0;
    }
    
    /* 圆点 - 居中在线上 */
    .sequence-dot {
      position: absolute;
      left: 50%;
      top: 0;
      width: 16px;
      height: 16px;
      background: rgba(255,255,255,0.85);
      border: 4px solid #3B82F6;
      border-radius: 50%;
      transform: translateX(-50%);
      z-index: 2;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    
    /* 卡片容器 */
    .sequence-card {
      width: calc(50% - 40px);
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .sequence-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    }
    
    /* 左侧卡片 */
    .sequence-left .sequence-card {
      margin-right: auto;
      margin-left: 0;
    }
    
    /* 右侧卡片 */
    .sequence-right .sequence-card {
      margin-left: auto;
      margin-right: 0;
    }
    
    /* 卡片图片 */
    .sequence-image {
      width: 100%;
      height: 160px;
      overflow: hidden;
    }
    .sequence-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      transition: transform 0.3s;
    }
    .sequence-card:hover .sequence-image img {
      transform: scale(1.05);
    }
    
    /* 卡片内容区 */
    .sequence-body {
      padding: 16px;
    }
    
    /* 标题 */
    .sequence-title {
      margin: 0 0 8px 0;
      font-size: 17px;
      font-weight: 600;
      color: #3B82F6;
      line-height: 1.4;
    }
    
    /* 时间标签 */
    .sequence-time {
      display: inline-block;
      padding: 4px 10px;
      background: #3B82F615;
      color: #3B82F6;
      font-size: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
    }
    
    /* 正文内容 */
    .sequence-content {
      font-size: 14px;
      line-height: 1.7;
      color: #0F172A;
    }
    .sequence-content strong {
      color: #3B82F6;
    }
    
    /* 移动端适配 - 单列布局 */
    @media (max-width: 768px) {
      .sequence-line {
        left: 20px;
      }
      .sequence-dot {
        left: 20px;
      }
      .sequence-item {
        padding-left: 50px;
      }
      .sequence-left .sequence-card,
      .sequence-right .sequence-card {
        width: 100%;
        margin: 0;
      }
    }
    
    /* ------ 6.3 Itinerary Timeline (行程时间轴) ------ */
    .itinerary-timeline {
      background: linear-gradient(135deg, rgba(255,255,255,0.85), rgba(59,130,246, 0.05));
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 16px;
      padding: 1.5rem 2rem;
      margin: 2rem 0;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }
    
    .itinerary-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: #0F172A;
      margin-bottom: 1.5rem;
      padding-bottom: 0.8rem;
      border-bottom: 2px solid #3B82F6;
    }
    
    .itinerary-item {
      display: flex;
      gap: 1rem;
      position: relative;
    }
    
    .itinerary-marker {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex-shrink: 0;
      width: 24px;
    }
    
    .itinerary-dot {
      width: 16px;
      height: 16px;
      background: linear-gradient(135deg, #3B82F6, #60A5FA);
      border-radius: 50%;
      box-shadow: 0 2px 8px rgba(59,130,246, 0.4);
      flex-shrink: 0;
      z-index: 1;
    }
    
    .itinerary-line {
      width: 3px;
      flex: 1;
      background: linear-gradient(180deg, #3B82F6, rgba(59,130,246, 0.2));
      margin-top: 4px;
      border-radius: 2px;
    }
    
    .itinerary-content {
      flex: 1;
      padding-bottom: 1.5rem;
    }
    
    .itinerary-item-last .itinerary-content {
      padding-bottom: 0;
    }
    
    .itinerary-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 0.6rem;
    }
    
    .itinerary-day {
      font-size: 1.1rem;
      font-weight: 700;
      color: #3B82F6;
      background: rgba(59,130,246, 0.12);
      padding: 0.3em 0.8em;
      border-radius: 20px;
    }
    
    .itinerary-date {
      font-size: 0.85rem;
      color: #64748B;
      font-weight: 500;
      background: rgba(59,130,246, 0.08);
      padding: 0.2em 0.6em;
      border-radius: 4px;
      font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
      letter-spacing: 0.5px;
    }
    
    /* ------ 6.3 Attraction Cards (景点卡片) ------ */
    .attraction-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
      margin: 1.5rem 0;
    }
    @media (max-width: 1024px) {
      .attraction-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    @media (max-width: 640px) {
      .attraction-grid {
        grid-template-columns: 1fr;
      }
    }
    .attraction-card {
      background: rgba(255,255,255,0.85);
      border-radius: 12px;
      overflow: visible;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
      border: 1px solid rgba(59,130,246,0.2);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .attraction-card .attraction-image {
      border-radius: 12px 12px 0 0;
      overflow: hidden;
    }
    .attraction-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    }
    .attraction-image {
      width: 100%;
      height: 160px;
      background-size: cover;
      background-position: center;
      background-color: rgba(100,116,139, 0.1);
      position: relative;
    }
    .attraction-rating {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(0,0,0,0.6);
      color: #fff;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    .attraction-info {
      padding: 1rem;
    }
    .attraction-name {
      margin: 0 0 0.5rem 0;
      font-size: 1.05rem;
      font-weight: 600;
      color: #0F172A;
      line-height: 1.3;
    }
    .attraction-city {
      font-size: 0.85rem;
      color: #3B82F6;
      margin-bottom: 0.4rem;
    }
    .attraction-address {
      font-size: 0.8rem;
      color: #334155;
      margin-bottom: 0.5rem;
      line-height: 1.4;
    }
    .attraction-desc {
      font-size: 0.82rem;
      color: #334155;
      line-height: 1.5;
      margin: 0.5rem 0;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .attraction-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-bottom: 0.5rem;
    }
    .attraction-meta-item {
      font-size: 0.7rem;
      padding: 0.15em 0.5em;
      border-radius: 3px;
      background: rgba(100,116,139, 0.1);
      color: #334155;
    }
    .attraction-meta-item.status-open {
      background: rgba(34, 197, 94, 0.15);
      color: #16a34a;
    }
    .attraction-meta-item.status-closed {
      background: rgba(239, 68, 68, 0.15);
      color: #dc2626;
    }
    .attraction-meta-item.ranking {
      background: rgba(251, 191, 36, 0.15);
      color: #d97706;
    }
    .attraction-meta-item.duration {
      background: rgba(59,130,246, 0.1);
      color: #3B82F6;
    }
    .attraction-tickets {
      margin: 0.6rem 0;
      padding: 0.6rem 0.6rem 0.8rem 0.6rem;
      background: rgba(100,116,139, 0.05);
      border-radius: 6px;
      border: 1px solid rgba(100,116,139, 0.1);
      overflow: visible;
    }
    .tickets-title {
      font-size: 0.75rem;
      font-weight: 600;
      color: #334155;
      margin-bottom: 0.5rem;
    }
    .ticket-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
      padding: 0.6rem 0;
      min-height: 2.5rem;
      border-bottom: 1px dashed rgba(100,116,139, 0.15);
    }
    .ticket-item:last-child {
      border-bottom: none;
      padding-bottom: 0.4rem;
    }
    .ticket-name {
      font-size: 0.75rem;
      color: #0F172A;
      flex: 1;
    }
    .ticket-price {
      font-size: 0.8rem;
      font-weight: 600;
      color: #e53935;
    }
    .ticket-buy {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      color: #3B82F6;
      text-decoration: none;
      padding: 0.3rem 0.6rem;
      border: 1px solid #3B82F6;
      box-sizing: border-box;
      border-radius: 4px;
      line-height: 1;
      height: 1.5rem;
      box-sizing: border-box;
      transition: all 0.2s;
      flex-shrink: 0;
    }
    .ticket-buy:hover {
      background: #3B82F6;
      color: white;
    }
    .attraction-link-wrapper {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      margin-top: 0.5rem;
    }
    .attraction-link {
      font-size: 0.85rem;
      color: #3B82F6;
      text-decoration: none;
      font-weight: 500;
    }
    .attraction-link:hover {
      text-decoration: underline;
    }
    .fliggy-icon {
      font-size: 1rem;
      flex-shrink: 0;
    }
    
    /* ------ 6.4 Hotel Cards (酒店卡片) ------ */
    .hotel-section {
      margin: 1.5rem 0;
    }
    .hotel-city-section {
      margin-bottom: 2rem;
    }
    .hotel-city-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: #0F172A;
      margin: 0 0 1rem 0;
      padding: 0.6rem 1rem;
      background: linear-gradient(135deg, rgba(59,130,246, 0.1), rgba(96,165,250, 0.05));
      border-left: 4px solid #3B82F6;
      border-radius: 0 8px 8px 0;
    }
    .hotel-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.2rem;
    }
    @media (max-width: 1024px) {
      .hotel-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    @media (max-width: 640px) {
      .hotel-grid {
        grid-template-columns: 1fr;
      }
    }
    .hotel-card {
      background: rgba(255,255,255,0.85);
      border-radius: 10px;
      padding: 1rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.06);
      border: 1px solid rgba(59,130,246,0.2);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .hotel-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    }
    .hotel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.6rem;
    }
    .hotel-star {
      font-size: 0.8rem;
      color: #334155;
      background: rgba(59,130,246, 0.1);
      padding: 0.2em 0.6em;
      border-radius: 4px;
    }
    .hotel-price {
      font-size: 1rem;
      font-weight: 700;
      color: #e53935;
    }
    .hotel-name {
      margin: 0 0 0.5rem 0;
      font-size: 1rem;
      font-weight: 600;
      color: #0F172A;
      line-height: 1.3;
    }
    .hotel-address {
      font-size: 0.8rem;
      color: #334155;
      margin-bottom: 0.3rem;
      line-height: 1.4;
    }
    .hotel-year {
      font-size: 0.75rem;
      color: #64748B;
      margin-bottom: 0.5rem;
    }
    .hotel-link-wrapper {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      margin-top: 0.5rem;
    }
    .hotel-icon {
      font-size: 0.9rem;
    }
    .hotel-link {
      font-size: 0.82rem;
      color: #3B82F6;
      text-decoration: none;
      font-weight: 500;
    }
    .hotel-link:hover {
      text-decoration: underline;
    }
    
    /* ------ 6.5 Budget Cards (预算卡片) ------ */
    /* Budget Card - 简洁版 */
    .budget-card-simple {
      background: rgba(255,255,255,0.85);
      border-radius: 12px;
      padding: 1rem 1.2rem;
      margin: 1.5rem 0;
      border: 1px solid rgba(59,130,246,0.2);
    }
    .budget-header-simple {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.8rem;
      padding-bottom: 0.6rem;
      border-bottom: 1px solid rgba(59,130,246, 0.1);
    }
    .budget-title-simple {
      font-size: 0.95rem;
      font-weight: 600;
      color: #0F172A;
    }
    .budget-total-simple {
      font-size: 0.9rem;
      font-weight: 700;
      color: #3B82F6;
    }
    .budget-total-notes {
      font-size: 0.8rem;
      color: #e67e22;
      background: linear-gradient(135deg, rgba(230, 126, 34, 0.08), rgba(230, 126, 34, 0.03));
      border: 1px solid rgba(230, 126, 34, 0.2);
      border-radius: 6px;
      padding: 0.5rem 0.8rem;
      margin-bottom: 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }
    .budget-total-notes::before {
      content: '⚠️';
      font-size: 0.9rem;
    }
    .budget-list {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }
    .budget-item-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.4rem 0;
      font-size: 0.85rem;
    }
    .budget-item-row .budget-item-icon {
      font-size: 0.9rem;
      flex-shrink: 0;
    }
    .budget-item-row .budget-item-name {
      font-weight: 500;
      color: #0F172A;
      white-space: nowrap;
    }
    .budget-item-row .budget-item-notes {
      color: #64748B;
      font-size: 0.75rem;
      flex: 1;
      min-width: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .budget-item-row .budget-item-amount {
      font-weight: 600;
      color: #0F172A;
      white-space: nowrap;
      margin-left: auto;
    }
    .budget-item-row .budget-item-bar {
      width: 50px;
      height: 4px;
      background: rgba(100,116,139, 0.1);
      border-radius: 2px;
      position: relative;
      overflow: hidden;
      flex-shrink: 0;
    }
    .budget-item-row .budget-item-bar::after {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: var(--percent, 0%);
      background: var(--color, #3B82F6);
      border-radius: 2px;
    }
    @media (max-width: 640px) {
      .budget-item-row {
        flex-wrap: wrap;
        gap: 0.3rem;
      }
      .budget-item-row .budget-item-bar {
        width: 40px;
      }
      .budget-item-row .budget-item-notes {
        order: 10;
        flex-basis: 100%;
        margin-left: 1.4rem;
      }
    }

    /* Budget Card - 旧版保留 */
    .budget-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.85), rgba(59,130,246, 0.03));
      border-radius: 16px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      border: 1px solid rgba(59,130,246,0.2);
    }
    .budget-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid rgba(59,130,246, 0.1);
    }
    .budget-title {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.3rem;
      font-weight: 700;
      color: #0F172A;
    }
    .budget-icon {
      font-size: 1.5rem;
    }
    .budget-total {
      text-align: right;
    }
    .budget-total-label {
      display: block;
      font-size: 0.75rem;
      color: #64748B;
      margin-bottom: 0.2rem;
    }
    .budget-total-amount {
      font-size: 2rem;
      font-weight: 800;
      color: #3B82F6;
      letter-spacing: -0.02em;
    }
    .budget-total-note {
      font-size: 0.8rem;
      color: #64748B;
    }
    .budget-chart {
      display: flex;
      align-items: center;
      gap: 2rem;
      margin-bottom: 1.5rem;
      padding: 1rem;
      background: rgba(100,116,139, 0.03);
      border-radius: 12px;
    }
    .budget-donut {
      position: relative;
      width: 140px;
      height: 140px;
      flex-shrink: 0;
    }
    .budget-donut-svg {
      transform: rotate(-90deg);
    }
    .budget-segment {
      transition: opacity 0.3s;
    }
    .budget-segment:hover {
      opacity: 0.8;
    }
    .budget-donut-center {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }
    .budget-donut-amount {
      font-size: 1.1rem;
      font-weight: 700;
      color: #0F172A;
    }
    .budget-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem 1rem;
      flex: 1;
    }
    .budget-legend-item {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.8rem;
      color: #334155;
    }
    .budget-legend-color {
      width: 10px;
      height: 10px;
      border-radius: 2px;
      flex-shrink: 0;
    }
    .budget-items {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }
    .budget-item {
      background: rgba(255,255,255,0.85);
      border-radius: 10px;
      padding: 0.8rem 1rem;
      border: 1px solid rgba(59,130,246,0.2);
    }
    .budget-item-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }
    .budget-item-icon {
      font-size: 1.1rem;
    }
    .budget-item-name {
      flex: 1;
      font-size: 0.9rem;
      font-weight: 500;
      color: #0F172A;
    }
    .budget-item-amount {
      font-size: 1rem;
      font-weight: 700;
      color: #0F172A;
    }
    .budget-item-bar {
      height: 6px;
      background: rgba(100,116,139, 0.1);
      border-radius: 3px;
      overflow: hidden;
      margin-bottom: 0.4rem;
    }
    .budget-item-progress {
      height: 100%;
      border-radius: 3px;
      transition: width 0.5s ease;
    }
    .budget-item-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .budget-item-percent {
      font-size: 0.75rem;
      font-weight: 600;
      color: #64748B;
    }
    .budget-item-notes {
      font-size: 0.7rem;
      color: #64748B;
      text-align: right;
      flex: 1;
      margin-left: 1rem;
    }
    @media (max-width: 640px) {
      .budget-chart {
        flex-direction: column;
        gap: 1rem;
      }
      .budget-donut {
        width: 120px;
        height: 120px;
      }
      .budget-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.8rem;
      }
      .budget-total {
        text-align: left;
      }
    }
    
    /* ------ 6.6 Supplement Cards (补充信息 - 便利贴) ------ */
    .supplement-section {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
      margin: 2rem 0;
      padding: 0.5rem;
    }
    @media (max-width: 768px) {
      .supplement-section {
        grid-template-columns: 1fr;
      }
    }
    .supplement-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.85) 0%, rgba(59,130,246, 0.08) 100%);
      border-radius: 4px;
      padding: 1.2rem 1.3rem 1.3rem;
      border: 1px solid rgba(59,130,246,0.2);
      position: relative;
      box-shadow: 
        2px 2px 4px rgba(0,0,0,0.06),
        4px 6px 12px rgba(0,0,0,0.04);
      transform: rotate(-0.5deg);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .supplement-card:nth-child(2) {
      transform: rotate(0.8deg);
    }
    .supplement-card:hover {
      transform: rotate(0deg) translateY(-2px);
      box-shadow: 
        2px 2px 6px rgba(0,0,0,0.08),
        6px 10px 20px rgba(0,0,0,0.08);
    }
    .supplement-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 20px;
      right: 20px;
      height: 20px;
      background: linear-gradient(90deg, transparent 0%, rgba(0,0,0,0.02) 50%, transparent 100%);
      border-radius: 0 0 50% 50%;
      transform: translateY(-50%);
    }
    .supplement-card::after {
      content: '';
      position: absolute;
      bottom: 0;
      right: 0;
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 0 0 20px 20px;
      border-color: transparent transparent rgba(59,130,246, 0.05) transparent;
    }
    .supplement-header {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      margin-bottom: 0.8rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px dashed rgba(59,130,246,0.2);
    }
    .supplement-icon {
      font-size: 1.2rem;
      line-height: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    h3.supplement-title {
      margin: 0;
      padding: 0;
      font-size: 1.05rem;
      font-weight: 700;
      color: #0F172A;
      letter-spacing: 0.01em;
      background: none;
      border: none;
    }
    .supplement-card .supplement-list {
      list-style: none !important;
      padding: 0;
      margin: 0;
    }
    .supplement-card .supplement-list li {
      font-size: 0.92rem;
      color: #334155;
      line-height: 1.55;
      padding: 0.2rem 0 0.2rem 1rem;
      position: relative;
    }
    .supplement-card .supplement-list li::before {
      content: '•';
      position: absolute;
      left: 0;
      top: 0;
      color: #3B82F6;
      font-weight: bold;
    }
    
    /* ------ 6.6 Map Container (地图容器) ------ */
    .map-container {
      margin: 1.5rem 0 2rem;
      border-radius: 12px;
      border: 1px solid rgba(59,130,246,0.2);
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
      overflow: hidden;
      background: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%);
    }
    .map-container-title {
      display: block;
      padding: 0.5rem 1rem;
      font-size: 0.85rem;
      font-weight: 600;
      color: #334155;
      border-bottom: 1px solid rgba(59,130,246,0.2);
      background: rgba(255,255,255,0.85);
    }
    
    /* ------ 6.7 Day Cards (日期天数卡片) ------ */
    .day-date-card {
      display: flex;
      flex-direction: column;
      margin: 2rem 0 1rem 0;
      background: rgba(255,255,255,0.85);
      border-radius: 10px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
      overflow: hidden;
      border: 1px solid rgba(59,130,246, 0.15);
      max-width: 100%;
    }
    .day-date-header {
      display: flex;
      align-items: center;
      gap: 0;
      background: linear-gradient(135deg, rgba(59,130,246, 0.08), rgba(59,130,246, 0.02));
    }
    .day-badge {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 0.4rem 0.8rem;
      background: linear-gradient(135deg, #3B82F6, #60A5FA);
      min-width: 50px;
    }
    .day-badge-num {
      font-size: 1.3rem;
      font-weight: 800;
      color: white;
      line-height: 1;
    }
    .day-badge-text {
      font-size: 0.6rem;
      font-weight: 600;
      color: rgba(255,255,255,0.85);
      letter-spacing: 0.1em;
      margin-top: 1px;
    }
    .day-divider {
      width: 1px;
      height: 28px;
      background: linear-gradient(180deg, transparent, rgba(59,130,246, 0.3), transparent);
    }
    .day-date-info {
      display: flex;
      align-items: center;
      gap: 0.15rem;
      padding: 0.4rem 1rem;
    }
    .day-date-month {
      font-size: 1.1rem;
      font-weight: 600;
      color: #3B82F6;
    }
    .day-date-day {
      font-size: 1.1rem;
      font-weight: 600;
      color: #3B82F6;
    }
    .day-title {
      padding: 0.5rem 1.2rem;
      font-size: 1rem;
      font-weight: 600;
      color: #0F172A;
      border-left: 1px solid rgba(59,130,246, 0.2);
    }
    .day-strategy-card {
      margin: 0;
      padding: 1rem 1.2rem;
      background: linear-gradient(135deg, rgba(59,130,246, 0.06), rgba(59,130,246, 0.02));
      border-top: 1px solid rgba(59,130,246, 0.1);
    }
    .day-strategy-content {
      font-size: 0.92rem;
      color: #334155;
      line-height: 1.9;
    }
    .day-strategy-content strong {
      color: #3B82F6;
      font-weight: 600;
    }
    .day-brief {
      padding: 0.8rem 1rem;
      font-size: 0.9rem;
      color: #0F172A;
      border-top: 1px solid rgba(59,130,246, 0.12);
      line-height: 1.7;
      background: rgba(59,130,246, 0.02);
    }
    .day-brief-card {
      display: flex;
      align-items: flex-start;
      gap: 0.8rem;
      padding: 1rem 1.2rem;
      margin: 1rem 0;
      background: linear-gradient(135deg, rgba(59,130,246, 0.08), rgba(59,130,246, 0.02));
      border-radius: 10px;
      border-left: 4px solid #3B82F6;
    }
    .day-brief-icon {
      font-size: 1.3rem;
      line-height: 1;
    }
    .day-brief-content {
      flex: 1;
      font-size: 1rem;
      font-weight: 500;
      color: #0F172A;
      line-height: 1.5;
    }
    .day-strategy {
      padding: 0.8rem 1rem;
      font-size: 0.88rem;
      color: #334155;
      line-height: 1.8;
      border-top: 1px dashed rgba(59,130,246, 0.1);
      background: rgba(59,130,246, 0.01);
    }
    .day-strategy strong {
      color: #3B82F6;
      font-weight: 600;
    }
    .day-date-year {
      font-size: 0.75rem;
      color: #64748B;
      margin-left: 0.3rem;
    }
    
    /* ------ 6.7.1 H4 Activity Headers (活动标题样式化) ------ */
    /* Style h4 headers within itinerary section as activity headers */
    .markdown-content h4 {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.95rem;
      font-weight: 600;
      margin: 1.5rem 0 0.8rem 0;
      padding: 0.5rem 1rem 0.5rem 0.6rem;
      background: linear-gradient(135deg, rgba(59,130,246, 0.12), rgba(59,130,246, 0.04));
      color: #3B82F6;
      border-radius: 8px;
      border-left: 4px solid #3B82F6;
    }
    .markdown-content h4::before {
      content: '';
    }
    
    /* Time-arrangement list styling */
    .markdown-content h4 + ul {
      margin-top: 0.5rem;
      background: rgba(59,130,246, 0.02);
      border-radius: 8px;
      padding: 0.6rem 1rem 0.6rem 2rem;
      border: 1px solid rgba(59,130,246, 0.08);
    }
    .markdown-content h4 + ul li {
      font-size: 0.88rem;
      color: #334155;
      margin-bottom: 0.3rem;
      line-height: 1.6;
    }
    .markdown-content h4 + ul li strong {
      color: #3B82F6;
    }
    
    /* Sub-section titles like **交通详情** */
    .markdown-content h4 + ul + p strong,
    .markdown-content h4 + p strong {
      display: inline-block;
      font-size: 0.9rem;
      color: #0F172A;
      margin: 0.8rem 0 0.5rem 0;
      padding-bottom: 0.3rem;
      border-bottom: 1px dashed rgba(59,130,246,0.2);
    }
    
    /* ------ 6.7.2 Inline Spot Cards (内嵌景点卡片) ------ */
    .inline-spot-card {
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 10px;
      padding: 1rem;
      margin: 0.8rem 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }
    .inline-spot-header {
      display: flex;
      gap: 1rem;
      align-items: flex-start;
    }
    .inline-spot-image {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      flex-shrink: 0;
    }
    .inline-spot-info {
      flex: 1;
      min-width: 0;
    }
    .inline-spot-name {
      font-size: 1rem;
      font-weight: 600;
      color: #0F172A;
      margin: 0 0 0.3rem 0;
    }
    .inline-spot-city {
      font-size: 0.85rem;
      color: #334155;
      margin-bottom: 0.4rem;
    }
    .spot-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.3rem;
    }
    .spot-meta-item {
      font-size: 0.75rem;
      padding: 0.15rem 0.5rem;
      border-radius: 4px;
      background: rgba(59,130,246, 0.08);
      color: #334155;
    }
    .spot-meta-item.status-open {
      background: rgba(16, 185, 129, 0.1);
      color: #059669;
    }
    .spot-meta-item.status-closed {
      background: rgba(239, 68, 68, 0.1);
      color: #dc2626;
    }
    .spot-meta-item.rating {
      background: rgba(245, 158, 11, 0.1);
      color: #d97706;
    }
    .inline-spot-ranking,
    .spot-ranking {
      font-size: 0.8rem;
      color: #3B82F6;
      margin: 0.5rem 0;
      padding: 0.3rem 0.6rem;
      background: rgba(59,130,246, 0.06);
      border-radius: 4px;
      display: inline-block;
    }
    .inline-spot-address {
      font-size: 0.82rem;
      color: #64748B;
      margin: 0.5rem 0;
    }
    .inline-spot-desc {
      font-size: 0.85rem;
      color: #334155;
      line-height: 1.7;
      margin: 0.5rem 0;
    }
    .spot-links {
      display: flex;
      gap: 0.8rem;
      margin-top: 0.8rem;
    }
    .spot-link {
      font-size: 0.82rem;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      text-decoration: none;
      transition: all 0.2s;
    }
    .spot-link.nav-link {
      background: linear-gradient(135deg, #3b82f6, #60a5fa);
      color: white;
    }
    .spot-link.detail-link {
      background: linear-gradient(135deg, #3B82F6, #60A5FA);
      color: white;
    }
    .spot-link:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    
    /* ------ 6.7.3 Ticket Cards (门票卡片) ------ */
    .tickets-container {
      margin: 0.8rem 0;
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 10px;
      overflow: hidden;
    }
    .tickets-header {
      font-size: 0.95rem;
      font-weight: 600;
      color: #0F172A;
      padding: 0.7rem 1rem;
      background: linear-gradient(135deg, rgba(59,130,246, 0.08), rgba(59,130,246, 0.03));
      border-bottom: 1px solid rgba(59,130,246,0.2);
    }
    .tickets-list {
      padding: 0.5rem;
    }
    .ticket-item-card {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 0.6rem;
      padding: 0.6rem 0.8rem;
      border-bottom: 1px dashed rgba(59,130,246,0.2);
    }
    .ticket-item-card:last-child {
      border-bottom: none;
    }
    .ticket-item-main {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      flex: 1;
      min-width: 200px;
    }
    .ticket-item-name {
      font-size: 0.9rem;
      color: #0F172A;
    }
    .ticket-item-price {
      font-size: 0.9rem;
      font-weight: 600;
      color: #f59e0b;
    }
    .ticket-item-notes {
      font-size: 0.78rem;
      color: #64748B;
      flex: 1;
      min-width: 150px;
    }
    .ticket-buy-btn {
      font-size: 0.78rem;
      padding: 0.3rem 0.7rem;
      background: linear-gradient(135deg, #3B82F6, #60A5FA);
      color: white;
      border-radius: 5px;
      text-decoration: none;
      transition: all 0.2s;
    }
    .ticket-buy-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    
    @media (max-width: 600px) {
      .inline-spot-header {
        flex-direction: column;
      }
      .inline-spot-image {
        width: 100%;
        height: 120px;
      }
      .ticket-item-card {
        flex-direction: column;
        align-items: flex-start;
      }
      .ticket-item-main {
        width: 100%;
      }
      .ticket-item-notes {
        width: 100%;
      }
    }
    
    /* ------ 6.8 Schedule Info Card (日程简介) ------ */
    .schedule-info-card {
      display: flex;
      gap: 1rem;
      padding: 1rem 1.2rem;
      background: linear-gradient(135deg, rgba(59,130,246, 0.08), rgba(59,130,246, 0.03));
      border-left: 4px solid #3B82F6;
      border-radius: 0 10px 10px 0;
      margin: 1rem 0;
    }
    .schedule-info-icon {
      font-size: 1.5rem;
      flex-shrink: 0;
    }
    .schedule-info-content {
      font-size: 0.95rem;
      color: #334155;
      line-height: 1.8;
    }
    
    /* Schedule Images Grid */
    .schedule-images {
      display: grid;
      gap: 0.8rem;
      margin: 1rem 0;
      grid-template-columns: repeat(2, 1fr);
    }
    .schedule-images-2 {
      grid-template-columns: repeat(2, 1fr);
    }
    .schedule-images-3 {
      grid-template-columns: repeat(3, 1fr);
    }
    .schedule-images-4 {
      grid-template-columns: repeat(4, 1fr);
    }
    @media (max-width: 768px) {
      .schedule-images,
      .schedule-images-2,
      .schedule-images-3,
      .schedule-images-4 {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    .schedule-image-item {
      margin: 0;
      padding: 0;
      border-radius: 10px;
      overflow: hidden;
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .schedule-image-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .schedule-image-item img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      display: block;
      cursor: pointer;
    }
    @media (min-width: 768px) {
      .schedule-image-item img {
        height: 180px;
      }
    }
    
    /* ------ 6.9 Route Timeline & Cards ------ */
    /* Route Container */
    .route-container {
      margin: 1.5rem 0;
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 16px;
      overflow: hidden;
    }
    .route-container-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #0F172A;
      padding: 1rem 1.2rem;
      background: linear-gradient(135deg, rgba(59,130,246, 0.1), rgba(59,130,246, 0.03));
      border-bottom: 1px solid rgba(59,130,246,0.2);
    }
    
    /* Route Groups Wrapper - for the timeline */
    .route-groups-wrapper {
      position: relative;
      padding: 1rem 1rem 1rem 2rem;
    }
    
    /* Route Group */
    .route-group {
      position: relative;
      padding-left: 1.8rem;
      margin-bottom: 1.5rem;
    }
    .route-group:last-child {
      margin-bottom: 0;
    }
    /* Timeline dot */
    .route-group::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0.55rem;
      width: 12px;
      height: 12px;
      background: #3B82F6;
      border-radius: 50%;
      z-index: 3;
    }
    /* Arrow line - single unified shape using clip-path */
    .route-group:not(:last-child)::after {
      content: '';
      position: absolute;
      left: 3px;
      top: 1.4rem;
      width: 6px;
      height: calc(100% - 0.2rem);
      background: #3B82F6;
      clip-path: polygon(
        33% 0%,
        67% 0%,
        67% calc(100% - 8px),
        100% calc(100% - 8px),
        50% 100%,
        0% calc(100% - 8px),
        33% calc(100% - 8px)
      );
      z-index: 1;
    }
    .route-group-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.6rem 1rem;
      background: rgba(59,130,246, 0.08);
      border-radius: 8px 8px 0 0;
      border: 1px solid rgba(59,130,246,0.2);
      border-bottom: none;
    }
    .route-group-route {
      font-size: 0.95rem;
      font-weight: 600;
      color: #0F172A;
    }
    .route-group-route::before {
      content: '📍 ';
    }
    .route-group-count {
      font-size: 0.75rem;
      color: #64748B;
      background: rgba(255,255,255,0.85);
      padding: 0.25em 0.7em;
      border-radius: 20px;
      border: 1px solid rgba(59,130,246,0.2);
    }
    .route-group-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 0.8rem;
      padding: 0.8rem;
      background: rgba(59,130,246, 0.02);
      border: 1px solid rgba(59,130,246,0.2);
      border-top: none;
      border-radius: 0 0 8px 8px;
    }
    .route-group-single .route-group-options {
      grid-template-columns: 1fr;
    }
    @media (max-width: 640px) {
      .route-groups-wrapper {
        padding-left: 1.5rem;
      }
      .route-group {
        padding-left: 1.5rem;
      }
      .route-group::before {
        width: 10px;
        height: 10px;
      }
      .route-group:not(:last-child)::after {
        left: 2px;
        width: 5px;
      }
      .route-group-options {
        grid-template-columns: 1fr;
      }
    }
    
    /* Route Card */
    .route-card {
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 10px;
      padding: 0.9rem;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .route-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      border-color: #3B82F6;
    }
    
    /* Simple Route Card - Unified Style */
    .route-card-simple {
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
      padding: 0.6rem 0.8rem;
    }
    .simple-header {
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }
    .route-card-simple .mode-icon {
      font-size: 1rem;
    }
    .route-card-simple .mode-name {
      font-size: 0.9rem;
      font-weight: 600;
      color: #0F172A;
    }
    .simple-info {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      font-size: 0.78rem;
      color: #64748B;
      padding-left: 1.4rem;
    }
    .simple-info .info-item {
      display: inline-flex;
      align-items: center;
      gap: 0.15rem;
    }
    .simple-info .info-item.price {
      color: #e53935;
    }
    .route-link-inline {
      margin-left: auto;
      padding: 0.2rem 0.5rem;
      background: rgba(59,130,246, 0.1);
      color: #3B82F6 !important;
      text-decoration: none !important;
      border-radius: 4px;
      font-size: 0.72rem;
      font-weight: 500;
      white-space: nowrap;
      transition: background 0.2s;
    }
    .route-link-inline:hover {
      background: rgba(59,130,246, 0.2);
    }
    .route-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.8rem;
      padding-bottom: 0.8rem;
      border-bottom: 1px dashed rgba(59,130,246,0.2);
    }
    .route-card-mode {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .mode-icon {
      font-size: 1.5rem;
    }
    .mode-name {
      font-size: 1.1rem;
      font-weight: 600;
      color: #0F172A;
    }
    .route-badge {
      font-size: 0.75rem;
      padding: 0.3em 0.7em;
      border-radius: 20px;
      font-weight: 500;
    }
    .route-badge-direct {
      background: rgba(34, 197, 94, 0.15);
      color: #16a34a;
    }
    .route-badge-transfer {
      background: rgba(251, 191, 36, 0.15);
      color: #d97706;
    }
    .route-card-summary {
      display: flex;
      gap: 1.5rem;
      margin-bottom: 1rem;
    }
    .summary-item {
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }
    .summary-label {
      font-size: 0.7rem;
      color: #64748B;
      text-transform: uppercase;
    }
    .summary-value {
      font-size: 1rem;
      font-weight: 600;
      color: #0F172A;
    }
    .summary-value.price {
      color: #e53935;
    }
    .route-card-segments {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    /* Segment Styles */
    .route-segment {
      background: rgba(59,130,246, 0.03);
      border-radius: 8px;
      padding: 0.8rem;
    }
    .seg-stations {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }
    .seg-point {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.15rem;
      min-width: 70px;
    }
    .seg-dep {
      align-items: flex-start;
    }
    .seg-arr {
      align-items: flex-end;
    }
    .seg-time {
      font-size: 1.1rem;
      font-weight: 700;
      color: #0F172A;
    }
    .seg-station {
      font-size: 0.75rem;
      color: #64748B;
      white-space: nowrap;
    }
    .seg-arrow {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.3rem;
      min-width: 60px;
    }
    .seg-line {
      flex: 1;
      height: 2px;
      background: linear-gradient(90deg, rgba(59,130,246, 0.3), #3B82F6, rgba(59,130,246, 0.3));
    }
    .seg-icon {
      font-size: 0.9rem;
    }
    .seg-info {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      font-size: 0.75rem;
    }
    .seg-number {
      background: #3B82F6;
      color: white;
      padding: 0.2em 0.5em;
      border-radius: 4px;
      font-weight: 600;
    }
    .seg-class, .seg-carrier {
      background: rgba(59,130,246, 0.1);
      color: #334155;
      padding: 0.2em 0.5em;
      border-radius: 4px;
    }
    .seg-duration {
      color: #64748B;
    }
    .seg-transfer-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0.3rem;
      font-size: 0.75rem;
      color: #d97706;
      background: rgba(251, 191, 36, 0.1);
      border-radius: 4px;
    }
    .route-card-link,
    .route-card-link:link,
    .route-card-link:visited {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-top: 0.6rem;
      padding: 0.5rem 1rem;
      background: linear-gradient(135deg, #1D4ED8, #3B82F6) !important;
      color: #ffffff !important;
      text-decoration: none !important;
      border-radius: 8px;
      font-size: 0.8rem;
      font-weight: 600;
      transition: all 0.2s;
      box-shadow: 0 2px 8px rgba(59,130,246, 0.35);
      text-shadow: 0 1px 2px rgba(0,0,0,0.2);
      border: none;
    }
    .route-card-link:hover,
    .route-card-link:active {
      background: linear-gradient(135deg, #3B82F6, #1D4ED8) !important;
      color: #ffffff !important;
      box-shadow: 0 4px 12px rgba(59,130,246, 0.45);
      transform: translateY(-1px);
    }
    
    /* Simple Route Timeline */
    .route-timeline {
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 12px;
      padding: 1.2rem 1.5rem;
      margin: 1rem 0;
    }
    .route-title {
      font-size: 1rem;
      font-weight: 600;
      color: #0F172A;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid rgba(59,130,246,0.2);
    }
    .route-item {
      display: flex;
      gap: 1rem;
      align-items: flex-start;
    }
    .route-node {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 20px;
      flex-shrink: 0;
      padding-top: 0.45em;
    }
    .route-dot {
      width: 10px;
      height: 10px;
      background: #3B82F6;
      border-radius: 50%;
      flex-shrink: 0;
    }
    .route-line {
      width: 2px;
      flex: 1;
      background: linear-gradient(180deg, #3B82F6, rgba(59,130,246, 0.2));
      margin: 4px 0;
    }
    .route-info {
      flex: 1;
      padding-bottom: 1rem;
    }
    .route-item-last .route-info {
      padding-bottom: 0;
    }
    .route-places {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-bottom: 0.4rem;
    }
    .route-start, .route-end {
      font-weight: 600;
      color: #0F172A;
      font-size: 0.95rem;
    }
    .route-arrow {
      color: #3B82F6;
      font-weight: bold;
    }
    .route-details {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      font-size: 0.8rem;
      color: #64748B;
    }
    .route-mode, .route-distance, .route-duration {
      display: inline-flex;
      align-items: center;
      gap: 0.2rem;
    }
    
    /* ------ 6.10 Spots Grid (景点网格) ------ */
    .spots-container {
      margin: 1rem 0;
    }
    .spots-title {
      font-size: 1rem;
      font-weight: 600;
      color: #0F172A;
      margin-bottom: 0.8rem;
    }
    .spots-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
    }
    .spot-tag {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      background: rgba(59,130,246, 0.1);
      border: 1px solid rgba(59,130,246, 0.2);
      padding: 0.4em 0.8em;
      border-radius: 20px;
      font-size: 0.85rem;
      transition: all 0.2s;
    }
    .spot-tag:hover {
      background: rgba(59,130,246, 0.15);
      transform: translateY(-1px);
    }
    a.spot-tag {
      text-decoration: none;
      cursor: pointer;
    }
    a.spot-tag:hover {
      background: rgba(59,130,246, 0.2);
      box-shadow: 0 2px 8px rgba(59,130,246, 0.15);
    }
    a.spot-tag:hover .spot-name {
      color: #3B82F6;
    }
    .spot-num {
      background: #3B82F6;
      color: white;
      width: 1.4em;
      height: 1.4em;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .spot-name {
      color: #0F172A;
      font-weight: 500;
    }
    
    .itinerary-desc {
      font-size: 0.95rem;
      color: #334155;
      line-height: 1.8;
      padding-left: 0.2rem;
    }
    
    @media (max-width: 600px) {
      .itinerary-timeline {
        padding: 1rem 1.2rem;
      }
      .itinerary-title {
        font-size: 1.1rem;
      }
      .itinerary-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.3rem;
      }
      .itinerary-day {
        font-size: 1rem;
      }
    }
    
    /* ------ 6.11 New Spot Timeline (新版景点时间线) ------ */
    .spot-timeline-container {
      margin: 1rem 0;
    }
    .spot-timeline-item {
      display: flex;
      gap: 1rem;
      position: relative;
    }
    .spot-timeline-marker {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 36px;
      flex-shrink: 0;
    }
    .spot-timeline-num {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #3B82F6, #60A5FA);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.9rem;
      box-shadow: 0 2px 8px rgba(59,130,246, 0.3);
    }
    .spot-timeline-content {
      flex: 1;
      padding-bottom: 1rem;
    }
    .spot-timeline-card {
      display: flex;
      gap: 1rem;
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 12px;
      padding: 1rem;
      transition: all 0.2s ease;
    }
    .spot-timeline-card:hover {
      border-color: rgba(59,130,246, 0.3);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    .spot-timeline-image {
      width: 220px;
      height: 165px;
      border-radius: 12px;
      background-size: cover;
      background-position: center;
      flex-shrink: 0;
      box-shadow: 0 3px 12px rgba(0,0,0,0.12);
    }
    .spot-timeline-no-image {
      background: linear-gradient(145deg, #3B82F615 0%, #3B82F608 50%, #3B82F620 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4rem;
      position: relative;
      overflow: hidden;
    }
    .spot-timeline-no-image::before {
      content: '';
      position: absolute;
      width: 200%;
      height: 200%;
      background: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 10px,
        #3B82F608 10px,
        #3B82F608 20px
      );
      animation: shimmer 3s ease-in-out infinite;
    }
    .spot-timeline-no-image span {
      position: relative;
      z-index: 1;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.15));
    }
    @keyframes shimmer {
      0%, 100% { transform: translate(-25%, -25%); }
      50% { transform: translate(-20%, -20%); }
    }
    .spot-timeline-body {
      flex: 1;
      min-width: 0;
    }
    .spot-timeline-header {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 0.4rem;
    }
    .spot-timeline-name {
      font-size: 1.05rem;
      font-weight: 600;
      color: #0F172A;
    }
    .spot-tags {
      display: flex;
      gap: 0.4rem;
    }
    .spot-tag {
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 4px;
    }
    .spot-tag.status-open {
      background: #10B98115;
      color: #10B981;
    }
    .spot-tag.status-closed {
      background: #EF444415;
      color: #EF4444;
    }
    .spot-tag.spot-rating {
      background: #FEF3C715;
      color: #D97706;
    }
    .spot-timeline-location {
      font-size: 0.82rem;
      color: #64748B;
      margin-bottom: 0.4rem;
    }
    .spot-timeline-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 0.4rem;
    }
    .spot-timeline-meta .spot-meta-item {
      font-size: 0.75rem;
      color: #334155;
      background: #3B82F608;
      padding: 2px 6px;
      border-radius: 4px;
    }
    .spot-timeline-desc {
      font-size: 0.82rem;
      color: #334155;
      line-height: 1.5;
      margin: 0.4rem 0;
    }
    .spot-timeline-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.6rem;
    }
    .spot-action-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.2rem;
      padding: 5px 10px;
      border-radius: 6px;
      font-size: 0.8rem;
      text-decoration: none;
      transition: all 0.2s ease;
    }
    .spot-nav {
      background: #3B82F610;
      color: #3B82F6;
      border: 1px solid #3B82F630;
    }
    .spot-nav:hover {
      background: #3B82F6;
      color: white;
    }
    .spot-taxi {
      background: #3B82F610;
      color: #3B82F6;
      border: 1px solid #3B82F630;
    }
    .spot-taxi:hover {
      background: #3B82F6;
      color: white;
    }
    .spot-detail {
      background: rgba(255,255,255,0.85);
      color: #334155;
      border: 1px solid rgba(59,130,246,0.2);
    }
    .spot-detail:hover {
      background: #3B82F610;
      color: #3B82F6;
      border-color: #3B82F630;
    }
    /* 统一的 section 标题样式 */
    .section-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
      padding-bottom: 0.6rem;
      border-bottom: 2px solid #3B82F6;
    }
    .section-icon {
      font-size: 1.1rem;
    }
    .section-title {
      font-size: 1rem;
      font-weight: 600;
      color: #0F172A;
    }
    
    /* 箭头距离指示器 */
    .spot-timeline-arrow {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0.6rem 0 0.6rem 18px;
      padding-left: 0.5rem;
    }
    .spot-arrow-line {
      width: 3px;
      height: 8px;
      background: #3B82F6;
      border-radius: 2px;
    }
    .spot-arrow-icon {
      font-size: 1.4rem;
      color: #3B82F6;
      line-height: 1;
      filter: drop-shadow(0 2px 4px rgba(59,130,246, 0.4));
    }
    .spot-arrow-distance {
      font-size: 0.85rem;
      font-weight: 600;
      color: #0F172A;
      background: linear-gradient(135deg, #3B82F620, #3B82F608);
      border: 1.5px solid #3B82F640;
      padding: 6px 14px;
      border-radius: 18px;
      margin-top: 2px;
      white-space: nowrap;
      box-shadow: 0 2px 8px rgba(59,130,246, 0.2);
    }
    /* 响应式 */
    @media (max-width: 600px) {
      .spot-timeline-card {
        flex-direction: column;
      }
      .spot-timeline-image {
        width: 100%;
        height: 200px;
      }
    }
    
    /* 保留酒店卡片名称样式 */
    .hotel-card-name {
      margin: 0;
      font-size: 1.05rem;
      font-weight: 600;
      color: #0F172A;
      display: block;
      padding: 0;
      background: none;
      border: none;
      border-radius: 0;
      border-left: none;
    }
    
    /* ------ 6.12 New Ticket Cards (新版门票卡片) ------ */
    .ticket-cards-container {
      margin: 1rem 0;
    }
    .ticket-cards-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.8rem;
    }
    .ticket-cards-icon {
      font-size: 1.1rem;
    }
    .ticket-cards-title {
      font-weight: 600;
      color: #0F172A;
    }
    .ticket-cards-list {
      padding: 0.5rem;
    }
    .ticket-spot-group {
      margin-bottom: 1rem;
      padding: 0.8rem;
      background: rgba(255,255,255,0.85);
      border-radius: 8px;
      border: 1px solid rgba(59,130,246,0.2);
    }
    .ticket-spot-group:last-child {
      margin-bottom: 0;
    }
    .ticket-spot-name {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      font-size: 0.85rem;
      font-weight: 600;
      color: #3B82F6;
      padding: 0.3rem 0.6rem;
      margin-bottom: 0.6rem;
      background: rgba(59,130,246, 0.1);
      border-radius: 4px;
    }
    .ticket-card-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.8rem;
      border-radius: 8px;
      transition: all 0.3s ease;
    }
    .ticket-card-item:hover {
      background: #3B82F605;
    }
    .ticket-card-item.ticket-collapsed {
      display: none;
    }
    .ticket-spot-group.expanded .ticket-card-item.ticket-collapsed {
      display: flex;
    }
    .ticket-expand-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.6rem 1rem;
      margin-top: 0.5rem;
      cursor: pointer;
      border-radius: 8px;
      background: #3B82F608;
      color: #3B82F6;
      font-size: 0.85rem;
      font-weight: 500;
      transition: all 0.2s ease;
    }
    .ticket-expand-btn:hover {
      background: #3B82F615;
    }
    .ticket-expand-icon {
      font-size: 0.7rem;
      transition: transform 0.3s ease;
    }
    .ticket-spot-group.expanded .ticket-expand-icon {
      transform: rotate(180deg);
    }
    .ticket-spot-group.expanded .ticket-expand-text::before {
      content: '收起';
    }
    .ticket-spot-group.expanded .ticket-expand-text {
      font-size: 0;
    }
    .ticket-spot-group.expanded .ticket-expand-text::before {
      font-size: 0.85rem;
    }
    .ticket-card-info {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      flex: 1;
    }
    .ticket-card-name {
      font-weight: 500;
      color: #0F172A;
    }
    .ticket-note {
      font-size: 0.75rem;
      padding: 2px 8px;
      border-radius: 10px;
    }
    .ticket-note.note-refund {
      background: #10B98115;
      color: #10B981;
    }
    .ticket-note.note-info {
      background: #3B82F615;
      color: #3B82F6;
    }
    .ticket-card-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .ticket-card-price {
      font-weight: 600;
      color: #E53E3E;
      font-size: 1rem;
    }
    .ticket-card-buy {
      display: inline-flex;
      align-items: center;
      padding: 6px 14px;
      background: #3B82F6;
      color: white;
      border-radius: 6px;
      font-size: 0.85rem;
      text-decoration: none;
      transition: all 0.2s;
    }
    .ticket-card-buy:hover {
      background: #1D4ED8;
      transform: translateY(-1px);
    }
    
    /* ------ 6.13 New Hotel Cards (新版酒店卡片) ------ */
    .hotel-cards-container {
      margin: 1rem 0;
    }
    .hotel-cards-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .hotel-cards-icon {
      font-size: 1.3rem;
    }
    .hotel-cards-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #0F172A;
    }
    .hotel-recommendation {
      margin: 0.5rem 0 1rem;
      padding: 0.75rem 1rem;
      background: linear-gradient(135deg, rgba(59,130,246, 0.06), rgba(59,130,246, 0.02));
      border-left: 3px solid #3B82F6;
      border-radius: 0 8px 8px 0;
      color: #334155;
      font-size: 0.9rem;
      line-height: 1.5;
    }
    .hotel-cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1rem;
    }
    .hotel-card-new {
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 12px;
      padding: 1rem;
      transition: all 0.3s ease;
    }
    .hotel-card-new:hover {
      box-shadow: 0 6px 20px rgba(59,130,246, 0.12);
      transform: translateY(-2px);
    }
    .hotel-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 0.6rem;
    }
    .hotel-card-star {
      font-size: 0.8rem;
      padding: 4px 10px;
      border-radius: 12px;
    }
    .hotel-card-star.star-luxury {
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: white;
    }
    .hotel-card-star.star-comfort {
      background: #3B82F615;
      color: #3B82F6;
    }
    .hotel-card-star.star-economy {
      background: #64748B20;
      color: #334155;
    }
    .hotel-card-price {
      font-weight: 600;
      color: #E53E3E;
      font-size: 1.1rem;
    }
    .hotel-card-name {
      margin: 0 0 0.5rem 0;
      font-size: 1rem;
      font-weight: 600;
      color: #0F172A;
    }
    .hotel-card-address {
      font-size: 0.85rem;
      color: #64748B;
      margin-bottom: 0.4rem;
    }
    .hotel-card-year {
      font-size: 0.8rem;
      color: #64748B;
      margin-bottom: 0.6rem;
    }
    .hotel-card-book {
      display: inline-flex;
      align-items: center;
      padding: 8px 16px;
      background: #3B82F6;
      color: white;
      border-radius: 8px;
      font-size: 0.9rem;
      text-decoration: none;
      transition: all 0.2s;
      margin-top: 0.5rem;
    }
    .hotel-card-book:hover {
      background: #1D4ED8;
    }
    
    /* ------ 6.14 New Transport Cards (新版交通卡片) ------ */
    .transport-cards-container {
      margin: 1rem 0;
    }
    .transport-cards-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.8rem;
    }
    .transport-cards-icon {
      font-size: 1.1rem;
    }
    .transport-cards-title {
      font-weight: 600;
      color: #0F172A;
    }
    .transport-cards-list {
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }
    .transport-card {
      padding: 1rem;
      border-radius: 10px;
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      transition: all 0.2s ease;
    }
    .transport-card:hover {
      border-color: rgba(59,130,246, 0.3);
    }
    .transport-card:hover {
      background: #3B82F605;
    }
    .transport-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.6rem;
    }
    .transport-icon {
      font-size: 1.3rem;
    }
    .transport-mode {
      font-weight: 600;
      color: #0F172A;
    }
    .transport-route {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      margin-bottom: 0.6rem;
      padding: 0.6rem 0.8rem;
      background: #3B82F608;
      border-radius: 8px;
    }
    .transport-start, .transport-end {
      font-weight: 500;
      color: #0F172A;
    }
    .transport-arrow {
      color: #3B82F6;
      font-weight: 600;
    }
    .transport-info {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .transport-info-item {
      font-size: 0.85rem;
      color: #334155;
    }
    .transport-reason {
      margin-top: 0.6rem;
      padding: 0.5rem 0.75rem;
      background: rgba(255,255,255,0.85);
      border-radius: 6px;
      font-size: 0.85rem;
      color: #334155;
      line-height: 1.5;
    }
    
    /* Transport Card Simple - 简化交通信息卡片 */
    .transport-card-simple {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }
    .transport-card-simple .transport-header {
      border-bottom: none;
      padding-bottom: 0;
    }
    .transport-card-simple .transport-actions {
      display: flex;
      justify-content: flex-end;
    }
    
    /* Transport Card V2 - 详细交通信息卡片 */
    .transport-card-v2 {
      padding: 0;
      overflow: hidden;
    }
    .transport-v2-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.8rem 1rem;
      background: linear-gradient(135deg, #3B82F612 0%, #3B82F605 100%);
      border-bottom: 1px solid rgba(59,130,246,0.2);
    }
    .transport-v2-mode {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .transport-mode-text {
      font-weight: 600;
      color: #0F172A;
    }
    .transport-no {
      padding: 0.2rem 0.5rem;
      background: #3B82F6;
      color: white;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    .transport-v2-meta {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.75rem;
      color: #334155;
    }
    .transport-carrier, .transport-cabin, .transport-transfer {
      padding: 0.15rem 0.4rem;
      background: rgba(255,255,255,0.85);
      border-radius: 3px;
    }
    .transport-v2-route {
      display: flex;
      align-items: stretch;
      padding: 1rem;
      gap: 1rem;
    }
    .transport-v2-point {
      flex: 1;
      min-width: 0;
    }
    .transport-v2-dep {
      text-align: left;
    }
    .transport-v2-arr {
      text-align: right;
    }
    .transport-v2-time {
      font-size: 1.5rem;
      font-weight: 700;
      color: #0F172A;
      line-height: 1.2;
    }
    .transport-v2-station {
      font-size: 0.9rem;
      font-weight: 500;
      color: #0F172A;
      margin-top: 0.3rem;
    }
    .transport-v2-city {
      font-size: 0.8rem;
      color: #334155;
      margin-top: 0.2rem;
    }
    .transport-v2-middle {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-width: 120px;
      padding: 0 0.5rem;
    }
    .transport-v2-duration {
      font-size: 0.75rem;
      color: #334155;
      margin-bottom: 0.3rem;
    }
    .transport-v2-line {
      display: flex;
      align-items: center;
      gap: 0;
      width: 100%;
    }
    .transport-v2-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #3B82F6;
      flex-shrink: 0;
    }
    .transport-v2-dash {
      flex: 1;
      height: 2px;
      background: linear-gradient(90deg, #3B82F640 0%, #3B82F640 50%, transparent 50%);
      background-size: 8px 2px;
    }
    .transport-v2-arrow-icon {
      font-size: 0.9rem;
      color: #3B82F6;
      margin: 0 0.3rem;
    }
    .transport-v2-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.8rem 1rem;
      background: rgba(255,255,255,0.85);
      border-top: 1px solid rgba(59,130,246,0.2);
    }
    .transport-v2-price {
      display: flex;
      align-items: baseline;
      gap: 0.3rem;
    }
    .transport-price-label {
      font-size: 0.75rem;
      color: #334155;
    }
    .transport-price-value {
      font-size: 1.1rem;
      font-weight: 700;
      color: #3B82F6;
    }
    .transport-v2-actions {
      display: flex;
      gap: 0.5rem;
    }
    .transport-book-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.4rem 0.8rem;
      background: #3B82F6;
      color: white;
      border-radius: 6px;
      font-size: 0.8rem;
      font-weight: 500;
      text-decoration: none;
      transition: all 0.2s ease;
    }
    .transport-book-btn:hover {
      filter: brightness(1.1);
      transform: translateY(-1px);
    }
    .transport-card-v2 .transport-reason {
      margin: 0;
      padding: 0.8rem 1rem;
      border-radius: 0;
      background: #3B82F605;
      border-top: 1px dashed rgba(59,130,246,0.2);
    }
    
    /* 中转行程样式 */
    .transport-card-transfer {
      border: 2px solid #3B82F630;
    }
    .transfer-badge {
      background: linear-gradient(135deg, #3B82F6, #60A5FA);
      color: white !important;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .transport-total-duration {
      font-size: 0.8rem;
      color: #64748B;
      padding: 2px 8px;
      background: #3B82F610;
      border-radius: 4px;
    }
    .transport-segments {
      padding: 0.5rem 1rem;
    }
    .transport-segment {
      background: rgba(255,255,255,0.85);
      border-radius: 10px;
      padding: 0.8rem;
      margin-bottom: 0.5rem;
      border: 1px solid rgba(59,130,246,0.2);
    }
    .segment-header {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      margin-bottom: 0.6rem;
      flex-wrap: wrap;
    }
    .segment-num {
      background: linear-gradient(135deg, #3B82F6, #60A5FA);
      color: white;
      padding: 2px 10px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .segment-flight-no {
      font-weight: 700;
      color: #0F172A;
      font-size: 0.9rem;
    }
    .segment-carrier, .segment-cabin {
      font-size: 0.75rem;
      color: #64748B;
      background: #3B82F608;
      padding: 2px 6px;
      border-radius: 4px;
    }
    .segment-route {
      display: flex;
      align-items: stretch;
      gap: 0.8rem;
    }
    .segment-point {
      flex: 1;
      min-width: 0;
    }
    .segment-dep {
      text-align: left;
    }
    .segment-arr {
      text-align: right;
    }
    .segment-time {
      font-size: 1rem;
      font-weight: 700;
      color: #0F172A;
    }
    .segment-station {
      font-size: 0.85rem;
      color: #0F172A;
      font-weight: 500;
    }
    .segment-city {
      font-size: 0.75rem;
      color: #64748B;
    }
    .segment-middle {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-width: 80px;
    }
    .segment-duration {
      font-size: 0.75rem;
      color: #64748B;
      margin-bottom: 4px;
    }
    .segment-line {
      display: flex;
      align-items: center;
      gap: 2px;
    }
    .segment-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #3B82F6;
    }
    .segment-dash {
      width: 12px;
      height: 2px;
      background: #3B82F650;
    }
    .segment-icon {
      font-size: 0.9rem;
    }
    
    /* 中转等待 */
    .transfer-wait {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      padding: 0.6rem 1rem;
      margin: 0.3rem 0;
      background: linear-gradient(90deg, #3B82F608, transparent);
      border-left: 3px solid #3B82F6;
      border-radius: 0 8px 8px 0;
    }
    .transfer-icon {
      font-size: 1rem;
    }
    .transfer-info {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    .transfer-location {
      font-size: 0.85rem;
      font-weight: 500;
      color: #0F172A;
    }
    .transfer-label {
      font-size: 0.7rem;
      color: #3B82F6;
      font-weight: 600;
    }
    
    @media (max-width: 768px) {
      .transport-v2-route {
        flex-direction: column;
        gap: 0.5rem;
      }
      .segment-route {
        flex-direction: column;
        gap: 0.3rem;
      }
      .segment-point {
        text-align: center !important;
      }
      .segment-middle {
        flex-direction: row;
        min-width: auto;
        padding: 0.3rem 0;
      }
      .segment-duration {
        margin-bottom: 0;
        margin-right: 8px;
      }
      .transfer-wait {
        padding: 0.5rem 0.8rem;
      }
      .transport-v2-point {
        text-align: center !important;
      }
      .transport-v2-middle {
        flex-direction: row;
        min-width: auto;
        padding: 0.5rem 0;
      }
      .transport-v2-duration {
        margin-bottom: 0;
        margin-right: 0.5rem;
      }
      .transport-v2-line {
        width: auto;
        flex: 1;
      }
      .transport-v2-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
    }
    
    @media (max-width: 768px) {
      .hotel-cards-grid {
        grid-template-columns: 1fr;
      }
      .ticket-card-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
      .ticket-card-right {
        width: 100%;
        justify-content: space-between;
      }
    }
    
    /* 响应式：小屏幕卡片化 */
    /* Mobile table: horizontal scroll instead of card layout */
    @media screen and (max-width: 600px) {
      .table-scroll-wrapper {
        margin: 1em 0;
        border-radius: 8px;
        max-width: 100%;
        overflow: auto;
        -webkit-overflow-scrolling: touch;
      }
      
      .table-scroll-wrapper table {
        min-width: 400px;
        border-collapse: separate;
        border-spacing: 0;
      }
      
      .table-scroll-wrapper th,
      .table-scroll-wrapper td {
        padding: 10px 12px;
        font-size: 0.85rem;
        white-space: nowrap;
      }
      
      /* thead stays on top during vertical scroll */
      .table-scroll-wrapper thead {
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        z-index: 20;
      }
      
      /* All header cells - solid background */
      .table-scroll-wrapper th {
        background: #3B82F6 !important;
        color: white !important;
        -webkit-tap-highlight-color: transparent;
      }
      
      /* Remove tap highlight on table elements */
      .table-scroll-wrapper,
      .table-scroll-wrapper table,
      .table-scroll-wrapper thead,
      .table-scroll-wrapper tbody,
      .table-scroll-wrapper tr,
      .table-scroll-wrapper td {
        -webkit-tap-highlight-color: transparent;
      }
      
      /* First column - limit width and allow text wrap for better space distribution */
      .table-scroll-wrapper th:first-child,
      .table-scroll-wrapper td:first-child {
        max-width: 100px;
        min-width: 70px;
        white-space: normal;
        word-break: break-word;
        line-height: 1.4;
      }
      
      /* First column cells - stay visible during horizontal scroll */
      .table-scroll-wrapper td:first-child {
        position: -webkit-sticky;
        position: sticky;
        left: 0;
        z-index: 10;
        background: #F0F9FF !important;
        box-shadow: 2px 0 5px rgba(0,0,0,0.15);
      }
      
      /* First header cell - highest z-index (corner cell) */
      .table-scroll-wrapper th:first-child {
        position: -webkit-sticky;
        position: sticky;
        left: 0;
        z-index: 30;
        background: #1D4ED8 !important;
        box-shadow: 2px 0 5px rgba(0,0,0,0.2);
      }
      
      /* Alternating row backgrounds for first column - use solid theme colors */
      .table-scroll-wrapper tbody tr:nth-child(odd) td:first-child {
        background: #F0F9FF !important;
      }
      
      .table-scroll-wrapper tbody tr:nth-child(even) td:first-child {
        background: #E0F2FE !important;
      }
      
      /* Only apply hover effect on devices that support hover (not touch) */
      @media (hover: hover) {
        .table-scroll-wrapper tbody tr:hover td:first-child {
          background: #60A5FA !important;
        }
      }
      
      /* Scroll hint */
      .table-scroll-wrapper::after {
        content: '← 左右滑动查看 →';
        display: block;
        text-align: center;
        font-size: 0.7rem;
        color: #64748B;
        padding: 0.5rem;
        opacity: 0.7;
      }
    }
    
    /* Very small screens - disable sticky first column to maximize content space */
    @media screen and (max-width: 380px) {
      .table-scroll-wrapper th:first-child,
      .table-scroll-wrapper td:first-child {
        position: static !important;
        box-shadow: none !important;
      }
    }
    
    /* Table links */
    .markdown-content td a {
      color: #3B82F6;
      font-weight: 500;
      background: rgba(59,130,246, 0.1);
      padding: 2px 6px;
      border-radius: 4px;
      border-bottom: none;
      word-break: break-all;
    }
    .markdown-content td a:hover {
      background: rgba(59,130,246, 0.2);
    }
    
    /* ================================================================
       7. IMAGES & FIGURES
       ================================================================ */
    /* Standalone images - figure wrapper */
    .markdown-content > figure {
      display: table;
      max-width: min(90vw, 808px);
      margin: 1.5em auto;
      padding: 4px;
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      background: rgba(255,255,255,0.85);
    }
    .markdown-content figure img {
      max-width: 100%;
      max-height: 600px;
      width: auto;
      height: auto;
      object-fit: contain;
      border-radius: 6px;
      display: block;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .markdown-content figure img:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }
    .markdown-content figcaption {
      text-align: center;
      padding-top: 0.4em;
      font-size: 0.85em;
      color: #64748B;
      line-height: 1.4;
    }
    .markdown-content img:not([class*="amap"]):not([class*="marker"]):not([class*="location"]) {
      max-width: min(100%, 800px);
      height: auto;
      border-radius: 8px;
      display: block;
    }
    /* Isolate map component from markdown styles */
    .markdown-content > script[data-render-type] + * {
      all: revert;
    }
    .markdown-content > script[data-render-type] + * * {
      all: revert;
    }
    
    /* 列表项中的图片 figure */
    .markdown-content .inline-figure {
      display: table;
      margin: 1em auto;
      padding: 4px;
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    }
    .markdown-content .inline-figure img {
      max-height: 600px;
      max-width: min(90vw, 800px);
      width: auto;
      height: auto;
      object-fit: contain;
      border-radius: 6px;
      display: block;
      cursor: pointer;
    }
    .markdown-content .inline-figure figcaption {
      text-align: center;
      padding-top: 0.4em;
      font-size: 0.85em;
      color: #64748B;
      line-height: 1.4;
    }
    
    /* ========== 图片网格布局 ========== */
    .image-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin: 1.5em 0;
      justify-content: center;
    }
    
    .image-grid figure {
      margin: 0;
      flex: 1 1 280px;
      max-width: 400px;
      border-radius: 10px;
      overflow: hidden;
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    
    .image-grid figure img {
      width: 100%;
      height: 220px;
      object-fit: cover;
      display: block;
      transition: transform 0.3s;
    }
    
    .image-grid figure:hover img {
      transform: scale(1.02);
    }
    
    /* 响应式：小屏幕 */
    @media (max-width: 768px) {
      .image-grid {
        gap: 0.8rem;
      }
      .image-grid figure {
        flex: 1 1 45%;
        max-width: none;
      }
      .image-grid figure img {
        height: 160px;
      }
    }
    
    @media (max-width: 480px) {
      .image-grid figure {
        flex: 1 1 100%;
      }
      .image-grid figure img {
        height: 200px;
      }
    }
    
    /* Download Toast */
    .download-toast {
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      background: rgba(0, 0, 0, 0.85);
      color: #fff;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 99999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      max-width: 90vw;
    }
    .download-toast.show {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }
    .download-toast svg {
      flex-shrink: 0;
      color: #fbbf24;
    }
    
    /* Lightbox backdrop - PC uses backdrop-filter, mobile uses solid background */
    .lightbox-backdrop {
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    .image-viewer-backdrop {
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    /* Ensure hidden modals don't take up any space */
    #lightbox.hidden, #imageViewer.hidden {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
    /* Mobile: disable backdrop-filter for better performance */
    @media (max-width: 768px) {
      .lightbox-backdrop {
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
        background: rgba(0,0,0,0.85);
      }
      .image-viewer-backdrop {
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
        background: rgba(0,0,0,0.92);
      }
    }
    
    .markdown-content img.standalone {
      max-width: min(100%, 800px);
      height: auto;
      border-radius: 8px;
      display: block;
      position: relative;
      z-index: 1;
    }
    @media (min-width: 768px) {
      .markdown-content img { border-radius: 12px; }
    }
    
    /* LaTeX / KaTeX styles - 使用标准衬线字体 */
    .katex, .katex * {
      font-family: "Times New Roman", "Noto Serif", "Source Serif Pro", Georgia, "Songti SC", serif !important;
    }
    .katex {
      font-size: 1.1em;
    }
    .katex .mathit, .katex .mathnormal {
      font-style: italic !important;
    }
    .katex-display {
      overflow-x: auto;
      overflow-y: hidden;
      padding: 0.75em 0;
      margin: 1.25em 0;
    }
    .katex-display > .katex {
      white-space: normal;
    }
    /* 行内公式微调 */
    p .katex, li .katex {
      padding: 0 0.15em;
    }
    
    /* ECharts containers */
    .chart-container,
    [id*="chart"],
    [id*="Chart"],
    .markdown-content div[style*="height"][style*="width"] {
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin: 2em auto;
      max-width: 900px;
    }
    
    /* Mobile adjustments */
    @media (max-width: 767px) {
      .markdown-content blockquote { margin: 1em 0; padding: 0.8em 1em; }
      .markdown-content pre { margin: 0; padding: 0.8em 1em; border-radius: 0; font-size: 0.8em; max-height: 350px; }
      .code-block-wrapper { margin: 1em 0; border-radius: 8px; }
      .code-block-header { height: 32px; }
      .markdown-content > figure { display: table; margin: 1em auto; padding: 4px; }
      .markdown-content figure img { max-height: 500px; }
      .markdown-content h1 { font-size: 1.5rem; }
      .markdown-content h2 { font-size: 1.25rem; }
      .markdown-content h3 { font-size: 1.1rem; }
      .markdown-content th, .markdown-content td { padding: 8px 10px; font-size: 0.9em; }
      
      /* Day card - optimized for mobile */
      .day-date-card {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        width: 100%;
        margin: 1.5rem 0 0.8rem 0;
      }
      .day-date-header {
        display: flex;
        flex-direction: row;
        align-items: stretch;
        background: linear-gradient(135deg, rgba(59,130,246, 0.08), rgba(59,130,246, 0.02));
      }
      .day-badge {
        flex-direction: column;
        gap: 0;
        padding: 0.5rem 0.6rem;
        min-width: 48px;
        background: linear-gradient(135deg, #3B82F6, #60A5FA);
      }
      .day-badge-num {
        font-size: 1.1rem;
        font-weight: 800;
        color: white;
      }
      .day-badge-text {
        font-size: 0.5rem;
        font-weight: 600;
        color: rgba(255,255,255,0.9);
      }
      .day-divider {
        display: none;
      }
      .day-date-header {
        flex-wrap: wrap;
      }
      .day-date-info {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 0.3rem;
        padding: 0.5rem 0.8rem;
        background: transparent;
      }
      .day-date-month, .day-date-day {
        font-size: 1.1rem;
        font-weight: 700;
        color: #3B82F6;
      }
      .day-date-label {
        display: none;
      }
      .day-title {
        flex: 1 1 auto;
        padding: 0.5rem 0.8rem;
        font-size: 0.9rem;
        font-weight: 600;
        border-left: none;
        text-align: left;
        color: #0F172A;
        display: flex;
        align-items: center;
        min-width: 0;
      }
      .day-strategy-card {
        padding: 0.8rem 1rem;
      }
      .day-strategy-content {
        font-size: 0.85rem;
        line-height: 1.7;
      }
      .day-brief {
        padding: 0.8rem 1rem;
        font-size: 0.85rem;
        line-height: 1.6;
      }
      
      /* Schedule info card */
      .schedule-info-card {
        flex-direction: column;
        gap: 0.5rem;
        padding: 0.8rem 1rem;
      }
      .schedule-info-icon {
        font-size: 1.2rem;
      }
      .schedule-info-content {
        font-size: 0.85rem;
        line-height: 1.6;
      }
      
      /* Image grids - single column on mobile */
      .schedule-images,
      .schedule-images-2,
      .schedule-images-3,
      .schedule-images-4 {
        grid-template-columns: 1fr !important;
      }
      
      /* Tianzige - single column on mobile */
      .tianzige-grid,
      .tianzige-grid[data-columns="2"],
      .tianzige-grid[data-columns="3"],
      .tianzige-grid[data-columns="4"],
      .tianzige-grid[data-columns="5"] {
        grid-template-columns: 1fr !important;
        gap: 0.8rem !important;
      }
      .tianzige-body {
        padding: 10px 12px !important;
      }
      
      /* Figure grids - single column on mobile */
      .figure-grid-2,
      .figure-grid-3,
      .figure-grid-4 {
        grid-template-columns: 1fr !important;
        gap: 0.8rem !important;
      }
      
      /* Route cards */
      .route-groups-wrapper {
        padding-left: 1.8rem;
      }
      .route-group {
        padding-left: 1.2rem;
      }
      .route-group::before {
        left: -1.3rem;
        width: 10px;
        height: 10px;
      }
      .route-group:not(:last-child)::after {
        left: -1.1rem;
        width: 5px;
      }
      .route-group-options {
        grid-template-columns: 1fr !important;
        gap: 0.5rem;
      }
      .route-card {
        padding: 0.5rem 0.6rem;
      }
      
      /* Spots grid - 2 columns on mobile */
      .spots-grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 0.5rem !important;
      }
      
      /* Hotel cards */
      .hotel-cards-grid {
        grid-template-columns: 1fr !important;
      }
      
      /* Budget card */
      .budget-items {
        gap: 0.5rem;
      }
      .budget-item {
        padding: 0.6rem 0.8rem;
      }
    }
    
    /* ================================================================
       NEW FORMAT: SPOT TIMELINE
       ================================================================ */
    /* 时间线样式已在上方6.11定义 */
    
    /* 保留酒店卡片名称样式 */
    .hotel-card-name {
      margin: 0;
      font-size: 1.05rem;
      font-weight: 600;
      color: #0F172A;
      display: block;
      padding: 0;
      background: none;
      border: none;
      border-radius: 0;
      border-left: none;
    }
    
    /* ================================================================
       NEW FORMAT: TICKET CARDS
       ================================================================ */
    .ticket-cards-container {
      margin: 1rem 0;
    }
    .ticket-cards-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.8rem;
    }
    .ticket-cards-icon {
      font-size: 1.1rem;
    }
    .ticket-cards-title {
      font-weight: 600;
      color: #0F172A;
      font-size: 1rem;
    }
    .ticket-cards-list {
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }
    .ticket-spot-group {
      margin-bottom: 1rem;
      padding: 0.8rem;
      background: rgba(255,255,255,0.85);
      border-radius: 8px;
      border: 1px solid rgba(59,130,246,0.2);
    }
    .ticket-spot-group:last-child {
      margin-bottom: 0;
    }
    .ticket-spot-name {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      font-size: 0.85rem;
      font-weight: 600;
      color: #3B82F6;
      padding: 0.3rem 0.6rem;
      margin-bottom: 0.6rem;
      background: rgba(59,130,246, 0.1);
      border-radius: 4px;
    }
    .ticket-card-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.5rem 0;
      background: transparent;
      border-radius: 8px;
      transition: background 0.2s;
    }
    .ticket-card-item:hover {
      background: rgba(59,130,246, 0.05);
    }
    .ticket-card-info {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      flex: 1;
    }
    .ticket-card-name {
      color: #0F172A;
      font-weight: 500;
      font-size: 0.9rem;
    }
    .ticket-note {
      font-size: 0.75rem;
      padding: 2px 8px;
      border-radius: 4px;
    }
    .ticket-note.note-refund {
      background: rgba(76, 175, 80, 0.1);
      color: #4CAF50;
    }
    .ticket-note.note-info {
      background: rgba(59,130,246, 0.1);
      color: #3B82F6;
    }
    .ticket-card-right {
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }
    .ticket-card-price {
      font-weight: 600;
      color: #3B82F6;
      font-size: 0.95rem;
    }
    .ticket-card-buy {
      background: #3B82F6;
      color: white !important;
      padding: 6px 14px;
      border-radius: 6px;
      font-size: 0.8rem;
      font-weight: 500;
      text-decoration: none;
      transition: all 0.2s;
    }
    .ticket-card-buy:hover {
      background: #1D4ED8;
      transform: translateY(-1px);
    }
    
    /* ================================================================
       NEW FORMAT: HOTEL CARDS
       ================================================================ */
    .hotel-cards-container {
      margin: 1rem 0;
    }
    .hotel-cards-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.8rem;
    }
    .hotel-cards-icon {
      font-size: 1.2rem;
    }
    .hotel-cards-title {
      font-weight: 600;
      color: #0F172A;
      font-size: 1rem;
    }
    .hotel-recommendation {
      margin: 0.5rem 0 1rem;
      padding: 0.75rem 1rem;
      background: linear-gradient(135deg, rgba(59,130,246, 0.06), rgba(59,130,246, 0.02));
      border-left: 3px solid #3B82F6;
      border-radius: 0 8px 8px 0;
      color: #334155;
      font-size: 0.9rem;
      line-height: 1.5;
    }
    .hotel-cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1rem;
    }
    .hotel-card-new {
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 12px;
      padding: 1rem 1.2rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      transition: all 0.3s ease;
    }
    .hotel-card-new:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(59,130,246, 0.1);
      border-color: rgba(59,130,246, 0.3);
    }
    .hotel-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.6rem;
    }
    .hotel-card-star {
      font-size: 0.8rem;
      padding: 3px 10px;
      border-radius: 20px;
    }
    .hotel-card-star.star-luxury {
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: #333;
    }
    .hotel-card-star.star-comfort {
      background: rgba(59,130,246, 0.1);
      color: #3B82F6;
    }
    .hotel-card-star.star-economy {
      background: rgba(255,255,255,0.95);
      color: #334155;
    }
    .hotel-card-price {
      font-weight: 700;
      font-size: 1.1rem;
      color: #3B82F6;
    }
    .hotel-card-name {
      margin: 0 0 0.5rem;
      font-size: 1rem;
      font-weight: 600;
      color: #0F172A;
    }
    .hotel-card-address {
      font-size: 0.8rem;
      color: #64748B;
      margin-bottom: 0.3rem;
    }
    .hotel-card-year {
      font-size: 0.8rem;
      color: #64748B;
      margin-bottom: 0.6rem;
    }
    .hotel-card-book {
      display: inline-block;
      margin-top: 0.6rem;
      padding: 8px 16px;
      background: #3B82F6;
      color: white !important;
      border-radius: 8px;
      font-size: 0.85rem;
      font-weight: 500;
      text-decoration: none;
      transition: all 0.2s;
    }
    .hotel-card-book:hover {
      background: #1D4ED8;
      transform: translateY(-1px);
    }
    
    /* ================================================================
       NEW FORMAT: TRANSPORT CARDS
       ================================================================ */
    .transport-cards-container {
      margin: 1rem 0;
    }
    .transport-cards-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.8rem;
    }
    .transport-cards-icon {
      font-size: 1.1rem;
    }
    .transport-cards-title {
      font-weight: 600;
      color: #0F172A;
      font-size: 1rem;
    }
    .transport-cards-list {
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }
    .transport-card {
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 10px;
      padding: 1rem;
      transition: all 0.2s ease;
    }
    .transport-card:hover {
      border-color: rgba(59,130,246, 0.3);
    }
    .transport-card:hover {
      background: rgba(59,130,246, 0.05);
    }
    .transport-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.6rem;
    }
    .transport-icon {
      font-size: 1.4rem;
    }
    .transport-mode {
      font-weight: 600;
      color: #0F172A;
      font-size: 0.95rem;
    }
    .transport-route {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding: 0.6rem 0;
    }
    .transport-start, .transport-end {
      font-weight: 500;
      color: #0F172A;
      font-size: 1rem;
    }
    .transport-arrow {
      color: #3B82F6;
      font-weight: 600;
      font-size: 1.1rem;
    }
    .transport-info {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      padding-top: 0.6rem;
      border-top: 1px dashed rgba(59,130,246,0.2);
    }
    .transport-info-item {
      font-size: 0.85rem;
      color: #334155;
    }
    .transport-reason {
      margin-top: 0.6rem;
      padding: 0.5rem 0.75rem;
      background: rgba(255,255,255,0.85);
      border-radius: 6px;
      font-size: 0.85rem;
      color: #334155;
      line-height: 1.5;
    }
    
    @media (max-width: 600px) {
      .hotel-cards-grid {
        grid-template-columns: 1fr;
      }
      .ticket-card-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
      .ticket-card-item.ticket-collapsed {
        display: none;
      }
      .ticket-spot-group.expanded .ticket-card-item.ticket-collapsed {
        display: flex;
      }
      .ticket-card-right {
        width: 100%;
        justify-content: space-between;
      }
      .ticket-expand-btn {
        padding: 0.5rem 0.8rem;
        font-size: 0.8rem;
      }
      .transport-route {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.3rem;
      }
      .transport-arrow {
        transform: rotate(90deg);
        margin-left: 1rem;
      }
    }

    /* Tech style - table header */
    .markdown-content th {
      background: #1E40AF;
    }
    
    /* Softer h3 background */
    .markdown-content h3 {
      background: linear-gradient(90deg, rgba(59,130,246,0.08), transparent);
    }

  </style>
</head>
<body class="min-h-screen">
<header class="tech-header">
<div class="tech-header-bg"></div>
<div class="tech-header-grid"></div>
<div class="tech-header-decoration">
<div class="tech-hex tech-hex-1"></div>
<div class="tech-hex tech-hex-2"></div>
<div class="tech-glow"></div>
</div>
<div class="tech-header-content">
<div class="tech-badge">
<svg fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path></svg>
<span>TECH</span>
</div>
<h1 class="tech-title">图生视频技术全景：主流工具与应用指南</h1>
<div class="tech-divider">
<span class="tech-divider-line"></span>
<span class="tech-divider-dot"></span>
<span class="tech-divider-line"></span>
</div>
<p class="tech-meta">
<svg fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><rect height="18" rx="2" ry="2" width="18" x="3" y="4"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg>
<span id="tech-date"></span>
</p>
</div>
</header>
<style>
    .tech-header {
      position: relative;
      overflow: hidden;
      padding: 3rem 1.5rem;
      min-height: 220px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    @media (min-width: 768px) {
      .tech-header { padding: 4rem 2rem; min-height: 260px; }
    }
    .tech-header-bg {
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, #F0F9FF 0%, #E0F2FE 50%, #3B82F610 100%);
    }
    .tech-header-grid {
      position: absolute;
      inset: 0;
      background-image: linear-gradient(rgba(59,130,246,0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(59,130,246,0.05) 1px, transparent 1px);
      background-size: 32px 32px;
    }
    .tech-header-decoration {
      position: absolute;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
    }
    .tech-hex {
      position: absolute;
      width: 100px;
      height: 100px;
      background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 5L93.3 27.5V72.5L50 95L6.7 72.5V27.5L50 5z' fill='none' stroke='%233B82F6' stroke-opacity='0.15' stroke-width='1'/%3E%3C/svg%3E") no-repeat center;
      animation: hexRotate 20s linear infinite;
    }
    .tech-hex-1 {
      top: 10%;
      right: 10%;
    }
    .tech-hex-2 {
      bottom: 15%;
      left: 8%;
      width: 80px;
      height: 80px;
      animation-direction: reverse;
      animation-duration: 25s;
    }
    .tech-glow {
      position: absolute;
      width: 300px;
      height: 300px;
      top: -100px;
      right: -80px;
      background: radial-gradient(circle, #3B82F620 0%, transparent 70%);
      filter: blur(60px);
      animation: glowPulse 8s ease-in-out infinite;
    }
    @keyframes hexRotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    @keyframes glowPulse {
      0%, 100% { opacity: 0.5; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.1); }
    }
    .tech-header-content {
      position: relative;
      z-index: 2;
      text-align: center;
      max-width: 800px;
    }
    .tech-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.4rem 1rem;
      background: #3B82F610;
      border: 1px solid #3B82F630;
      border-radius: 50px;
      font-size: 0.65rem;
      font-weight: 600;
      letter-spacing: 0.15em;
      color: #3B82F6;
      margin-bottom: 1.5rem;
    }
    .tech-badge svg {
      width: 14px;
      height: 14px;
    }
    .tech-title {
      font-size: clamp(1.5rem, 5vw, 2.8rem);
      font-weight: 700;
      color: #0F172A;
      letter-spacing: 0.02em;
      line-height: 1.2;
      margin: 0 0 1.5rem;
    }
    .tech-divider {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
    }
    .tech-divider-line {
      width: 60px;
      height: 2px;
      background: linear-gradient(90deg, transparent, #3B82F6);
      border-radius: 2px;
    }
    .tech-divider-line:last-child {
      background: linear-gradient(90deg, #3B82F6, transparent);
    }
    .tech-divider-dot {
      width: 8px;
      height: 8px;
      background: #3B82F6;
      border-radius: 50%;
    }
    .tech-meta {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      font-size: 0.85rem;
      color: #64748B;
    }
    .tech-meta svg {
      width: 14px;
      height: 14px;
      opacity: 0.7;
    }
  </style>
<script>
    document.addEventListener('DOMContentLoaded', function() {
      const dateEl = document.getElementById('tech-date');
      if (dateEl) {
        dateEl.textContent = new Date().toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric' });
      }
    });
  </script>
<main class="mx-auto px-4 pt-4 pb-6 sm:px-8 sm:pt-5 sm:pb-8 lg:px-12">
<div class="markdown-content">
<h2 id="_1">一、综合评估与选型建议</h2>
<p>当前图生视频技术已进入商业化落地关键期，以扩散模型与DiT架构为核心的技术路线持续突破生成质量、时长与可控性边界。市场格局呈现“大厂生态整合”与“初创公司技术攻坚”并行的双轨模式，阿里巴巴、字节跳动、快手等依托平台场景快速渗透，而生数科技、爱诗科技等则在模型架构与生成效率上实现创新。</p>
<p>技术发展呈现五大核心趋势：</p>
<ul>
<li><strong>生成质量持续提升</strong>：主流工具普遍支持1080P输出，即梦AI等已实现<strong>4K超清渲染</strong>，满足专业影视制作需求。</li>
<li><strong>多模态控制能力增强</strong>：从单一图像输入发展为支持文本、音频、视频参考的多模态融合，如Vidu Q2支持“万物可参考”，通义万相2.5实现音画同步。</li>
<li><strong>生成效率革命性突破</strong>：TurboDiffusion框架在单卡上将5秒视频生成压缩至1.8秒，提速超百倍，推动实时交互成为可能。</li>
<li><strong>可控性显著提升</strong>：专业构图控制、运动幅度调节、镜头语言支持等技术大幅提高创作精确度。</li>
<li><strong>端侧部署落地</strong>：生数科技与荣耀手机合作，实现“老照片复活”等移动端应用，降低云端依赖。</li>
</ul>
<p>根据应用场景差异，推荐以下选型策略：</p>
<div class="table-scroll-wrapper"><table>
<thead>
<tr>
<th>应用场景</th>
<th>推荐工具</th>
<th>核心优势</th>
</tr>
</thead>
<tbody>
<tr>
<td>电商商品视频生成</td>
<td>淘宝图生视频、AtomoVideo、金管道科技</td>
<td>深度集成电商流程，支持批量生成，成本低至每条几毛钱</td>
</tr>
<tr>
<td>专业影视与广告创作</td>
<td>可灵AI、即梦AI、Runway ML</td>
<td>生成质量高，支持电影质感、复杂运镜与多镜头叙事</td>
</tr>
<tr>
<td>开发者与研究者</td>
<td>Step-Video-TI2V、Stable Video Diffusion</td>
<td>开源可自部署，支持代码级调用与模型微调</td>
</tr>
<tr>
<td>实时交互与游戏应用</td>
<td>PixVerse R1、VASA-1</td>
<td>实现“所想即所见”的瞬时响应，适用于NPC互动与虚拟人驱动</td>
</tr>
<tr>
<td>企业级SaaS服务</td>
<td>可灵AI、即梦AI</td>
<td>提供分层会员制与API资源包，商业化成熟，支持4K导出与商用授权</td>
</tr>
</tbody>
</table></div>
<p>综合来看，<strong>即梦AI</strong>凭借与抖音生态的深度整合，在内容分发效率上占据优势；<strong>Vidu</strong>以电影级画质和物理模拟能力成为专业创作首选；<strong>可灵AI</strong>则依托快手平台支持长视频与角色一致性，适合MCN机构规模化生产。技术决定下限，生态决定上限，最终竞争力将取决于工具能否构建可持续的内容创作闭环<sup><a href="https://www.36kr.com/p/3400302888540296" rel="noopener" target="_blank" title="国产AI视频三国杀：可灵、即梦、Vidu，谁会是最大赢家？-36氪">1</a></sup>。</p>
<h2 id="_2">二、主流工具概览与信息总览</h2>
<p>本章节系统梳理当前最具代表性的六大图生视频工具，涵盖其官方网站、核心使用流程与关键功能特性。每项工具均结合界面或生成效果配图，直观呈现其操作逻辑与输出质量，为技术选型提供基础认知支持。</p>
<h3 id="ai">即梦AI</h3>
<p>即梦AI是字节跳动推出的AI视频生成平台，深度集成于剪映与抖音生态，支持通过图片或文本生成高质量动态视频。其操作路径简洁，适合内容创作者快速上手。</p>
<p>使用流程如下：</p>
<ul>
<li>访问 <a href="https://jimeng.jianying.com" rel="noopener" target="_blank">jimeng.jianying.com</a> 并登录</li>
<li>选择【视频生成】→【图生视频】模式</li>
<li>上传静态图片，输入中文提示词（如“樱花飘落，微风拂过发梢”）</li>
<li>选择“视频3.0”模型，设置时长与分辨率</li>
<li>点击【立即生成】，等待完成后下载MP4文件</li>
</ul>
<p>核心功能亮点：</p>
<ul>
<li>支持<strong>4K超清渲染</strong>与60fps补帧技术，满足专业输出需求</li>
<li>提供首尾帧控制、运镜参数调节（推拉、旋转等）与AI对口型功能</li>
<li>与抖音、剪映无缝衔接，便于内容分发与二次编辑<sup><a href="https://blog.csdn.net/AIproducthub/article/details/156311775" rel="noopener" target="_blank" title="即梦AI是什么？从零开始掌握即梦AI：功能详解、使用指南与竞品对比_即梦aⅰ是谁的产品-CSDN博客">2</a></sup></li>
</ul>
<h3 id="vidu">Vidu</h3>
<p>Vidu由北京生数科技与清华大学联合研发，采用U-ViT融合架构，支持文生视频、图生视频与参考生视频三种模式，具备强大的多图一致性控制能力。</p>
<p>使用流程如下：</p>
<ul>
<li>注册并登录 <a href="https://www.vidu.cn" rel="noopener" target="_blank">www.vidu.cn</a></li>
<li>选择“图生视频”功能，上传参考图片</li>
<li>输入描述性文本（如“城市夜景，车流灯光拖影”）</li>
<li>选择生成时长（4秒或8秒）</li>
<li>点击“创建”，系统生成1080P高清视频后可供下载</li>
</ul>
<p>核心功能亮点：</p>
<ul>
<li>支持<strong>最长16秒视频生成</strong>，输出分辨率达1080P<sup><a href="https://www.aitags.cn/sites/1294.html" rel="noopener" target="_blank" title="Vidu AI - 全球领先AI视频生成平台，长时长+多主体一致性 \| AI标签页">3</a></sup></li>
<li>提供“AI Agent”模式，可自动完成脚本生成与成片输出</li>
<li>支持上传最多7张主体图，确保角色、道具全程一致<sup><a href="https://www.digitaling.com/articles/1444792.html" rel="noopener" target="_blank" title="广告制作大变天！Vidu Agent横空出世，商业广告一键成片 - 数英">4</a></sup></li>
</ul>
<figure><img alt="Vidu工具界面展示创意到视频的生成流程" src="https://agent.qianwen.com/mos/febb2340ce134addbba0587506804bd8/40f0e2c97be51b2e33f17ef44bfd6588"/><figcaption>Vidu工具界面展示创意到视频的生成流程</figcaption></figure>
<h3 id="ai_1">可灵AI</h3>
<p>可灵AI由快手推出，定位为AI短剧与工业化内容生产平台，支持长视频生成与高表现力输出，广泛应用于MCN机构与短视频工厂。</p>
<p>使用流程如下：</p>
<ul>
<li>登录 <a href="https://kling.kuaishou.com" rel="noopener" target="_blank">kling.kuaishou.com</a> 或通过快影APP进入</li>
<li>选择“图生视频”功能</li>
<li>上传图片并输入动作描述（如“人物微笑转身”）</li>
<li>使用“运动笔刷”指定动态区域</li>
<li>生成1080P高清视频，支持商用授权</li>
</ul>
<p>核心功能亮点：</p>
<ul>
<li>支持<strong>最长2分钟视频生成</strong>，帧率达48fps<sup><a href="https://www.36kr.com/p/3400302888540296" rel="noopener" target="_blank" title="国产AI视频三国杀：可灵、即梦、Vidu，谁会是最大赢家？-36氪">1</a></sup></li>
<li>提供多图参考、首尾帧控制与反向提示词功能，增强创作可控性</li>
<li>与快手星芒短剧计划深度整合，助力IP孵化与商业化变现<sup><a href="https://www.tudingai.com/sites/3082.html" rel="noopener" target="_blank" title="可灵AI官网 - 快手团队研发的视频与图像生成大模型产品 \| 图钉AI导航">5</a></sup></li>
</ul>
<figure><img alt="可灵AI生成的1080P高清视频效果展示" src="https://agent.qianwen.com/mos/febb2340ce134addbba0587506804bd8/707e0255047e0b871b098a2ea8ba04e0"/><figcaption>可灵AI生成的1080P高清视频效果展示</figcaption></figure>
<h3 id="_3">通义万相</h3>
<p>通义万相是阿里云推出的多模态内容生成平台，集成于百炼大模型服务平台，支持图生视频、文生视频与局部重绘等多种功能，适用于企业级SaaS服务。</p>
<p>使用流程如下：</p>
<ul>
<li>登录阿里云百炼平台</li>
<li>选择“通义万相-图生视频-基于首帧”模型</li>
<li>上传图片并输入文本提示</li>
<li>选择输出规格（720P/1080P，5-15秒）</li>
<li>点击生成，等待完成即可预览与下载</li>
</ul>
<p>核心功能亮点：</p>
<ul>
<li>支持<strong>音画同步生成</strong>，音画错位率低于0.1秒<sup><a href="https://ai-bot.cn/tongyi-wanxvideo/" rel="noopener" target="_blank" title="通义万相AI视频 - 阿里推出的免费AI视频生成工具 \| AI工具集">6</a></sup></li>
<li>提供多镜头叙事、背景替换与物体移除等高级编辑功能</li>
<li>支持API调用与企业级部署，满足批量生成需求</li>
</ul>
<h3 id="stable-video-diffusion">Stable Video Diffusion</h3>
<p>Stable Video Diffusion由Stability AI推出，是当前最主流的开源图生视频模型之一，支持本地部署与代码级调用，适合开发者与研究者进行定制化开发。</p>
<p>使用流程如下：</p>
<ul>
<li>安装Python 3.8+及torch、diffusers等依赖库</li>
<li>执行 <code>git clone https://ai.gitcode.com/hf_mirrors/stabilityai/stable-video-diffusion-img2vid-xt-1-1</code> 获取模型</li>
<li>编写Python脚本调用模型，设置num_frames等参数</li>
<li>生成1024×576分辨率、25fps的4秒视频</li>
</ul>
<p>核心功能亮点：</p>
<ul>
<li><strong>完全开源</strong>，支持私有化部署与模型微调</li>
<li>提供XT与XT-1.1版本，支持图像到视频与视频到视频转换</li>
<li>可集成至自定义工作流，适用于科研实验与系统集成<sup><a href="https://blog.51cto.com/u_15453737/14185520" rel="noopener" target="_blank" title="市面上视频生成大模型测评：从“能生成”到“能叙事”，谁真正打通了短片创作全链路？_wx61b01f5c869b2的技术博客_51CTO博客">7</a></sup></li>
</ul>
<h3 id="runway-ml">Runway ML</h3>
<p>Runway ML是全球领先的AI视频创作平台，其Gen-2模型支持从图像、文本或音频生成高质量视频，广泛应用于影视制作与广告创意领域。</p>
<p>使用流程如下：</p>
<ul>
<li>访问 <a href="https://runwayml.com" rel="noopener" target="_blank">runwayml.com</a> 并登录</li>
<li>选择Gen2模型中的“Image to Video”功能</li>
<li>上传关键帧图片，输入文本提示（如“森林中奔跑的鹿”）</li>
<li>设置运动强度、摄像机轨迹等参数</li>
<li>生成1080P、30fps的18秒视频（Pro版）</li>
</ul>
<p>核心功能亮点：</p>
<ul>
<li>支持<strong>背景替换、物体移除与摄像机运动控制</strong>，提升创意自由度<sup><a href="https://www.aitags.cn/sites/1297.html" rel="noopener" target="_blank" title="Runway - 全球领先的多模态AI创作平台，一句话生成视频与动画 \| AI标签页">8</a></sup></li>
<li>提供Credit计费系统，灵活适配个人与团队使用</li>
<li>拥有活跃的创作者社区，支持模板共享与协作</li>
</ul>
<h2 id="_4">三、核心技术架构与参数对比</h2>
<p>当前主流图生视频工具在技术架构与生成能力上呈现多元化发展格局，从底层模型设计到输出规格均存在显著差异。理解这些技术参数有助于用户根据创作需求精准匹配工具能力边界。</p>
<h3 id="_5">六大工具核心技术参数对比</h3>
<p>以下表格系统梳理即梦AI、Vidu、可灵AI、通义万相、Stable Video Diffusion与Runway ML六大工具的核心技术指标，涵盖架构、输入输出、多模态支持及部署方式等关键维度，数据均基于官方技术文档与公开评测。</p>
<div class="table-scroll-wrapper"><table>
<thead>
<tr>
<th>参数维度</th>
<th>即梦AI</th>
<th>Vidu</th>
<th>可灵AI</th>
<th>通义万相</th>
<th>Stable Video Diffusion</th>
<th>Runway ML</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>核心技术架构</strong></td>
<td>DiT架构，Seedance 1.0系列模型<sup><a href="https://mp.ofweek.com/ai/a756714896547" rel="noopener" target="_blank" title="国产AI视频三国杀：可灵、即梦、Vidu，谁会是最大赢家？ - 维科号V">9</a></sup></td>
<td>U-ViT融合架构（Diffusion + Transformer）<sup><a href="https://www.aitags.cn/sites/1294.html" rel="noopener" target="_blank" title="Vidu AI - 全球领先AI视频生成平台，长时长+多主体一致性 \| AI标签页">3</a></sup></td>
<td>DiT架构 + 多模态导演模块（MLLM Director）<sup><a href="https://baike.baidu.com/item/%E5%8F%AF%E7%81%B5AI/65264347" rel="noopener" target="_blank" title="可灵AI_百度百科">10</a></sup></td>
<td>时空分离Transformer + Diffusion机制</td>
<td>扩散模型 + U-Net + Temporal Layer</td>
<td>Gen-2模型（扩散与对抗训练）<sup><a href="https://www.aitags.cn/sites/1297.html" rel="noopener" target="_blank" title="Runway - 全球领先的多模态AI创作平台，一句话生成视频与动画 \| AI标签页">8</a></sup></td>
</tr>
<tr>
<td><strong>输入形式</strong></td>
<td>图片+文本提示</td>
<td>图片/文本/参考图</td>
<td>图片+文本</td>
<td>首帧图像+文本</td>
<td>图像</td>
<td>图像+文本提示</td>
</tr>
<tr>
<td><strong>输出分辨率</strong></td>
<td><strong>最高4K</strong></td>
<td>1080P<sup><a href="https://www.aitags.cn/sites/1294.html" rel="noopener" target="_blank" title="Vidu AI - 全球领先AI视频生成平台，长时长+多主体一致性 \| AI标签页">3</a></sup></td>
<td>1080P<sup><a href="https://www.36kr.com/p/3400302888540296" rel="noopener" target="_blank" title="国产AI视频三国杀：可灵、即梦、Vidu，谁会是最大赢家？-36氪">1</a></sup></td>
<td>720P/1080P</td>
<td>1024×576（XT版）</td>
<td>1080P</td>
</tr>
<tr>
<td><strong>帧率</strong></td>
<td>支持60fps补帧</td>
<td>未明确</td>
<td><strong>48fps</strong><sup><a href="https://www.36kr.com/p/3400302888540296" rel="noopener" target="_blank" title="国产AI视频三国杀：可灵、即梦、Vidu，谁会是最大赢家？-36氪">1</a></sup></td>
<td>30fps</td>
<td>25fps</td>
<td>30fps</td>
</tr>
<tr>
<td><strong>最大时长</strong></td>
<td>未明确</td>
<td><strong>16秒</strong><sup><a href="https://www.aitags.cn/sites/1294.html" rel="noopener" target="_blank" title="Vidu AI - 全球领先AI视频生成平台，长时长+多主体一致性 \| AI标签页">3</a></sup></td>
<td><strong>2分钟</strong><sup><a href="https://www.36kr.com/p/3400302888540296" rel="noopener" target="_blank" title="国产AI视频三国杀：可灵、即梦、Vidu，谁会是最大赢家？-36氪">1</a></sup></td>
<td>15秒<sup><a href="https://ai-bot.cn/tongyi-wanxvideo/" rel="noopener" target="_blank" title="通义万相AI视频 - 阿里推出的免费AI视频生成工具 \| AI工具集">6</a></sup></td>
<td>4秒（基础版）</td>
<td>18秒（Pro版）</td>
</tr>
<tr>
<td><strong>多模态支持</strong></td>
<td>首尾帧控制、运镜参数、口型同步<sup><a href="https://blog.csdn.net/AIproducthub/article/details/156311775" rel="noopener" target="_blank" title="即梦AI是什么？从零开始掌握即梦AI：功能详解、使用指南与竞品对比_即梦aⅰ是谁的产品-CSDN博客">2</a></sup></td>
<td>多图参考、音效合成、AI Agent脚本生成<sup><a href="https://www.digitaling.com/articles/1444792.html" rel="noopener" target="_blank" title="广告制作大变天！Vidu Agent横空出世，商业广告一键成片 - 数英">4</a></sup></td>
<td>多图参考、首尾帧、反向提示词、音画同步<sup><a href="https://36kr.com/p/3230074841513348" rel="noopener" target="_blank" title="可灵vs即梦，决战AI短剧-36氪">11</a></sup></td>
<td>音画同步、多镜头叙事、参考图+参考视频混合生成<sup><a href="https://ai-bot.cn/tongyi-wanxvideo/" rel="noopener" target="_blank" title="通义万相AI视频 - 阿里推出的免费AI视频生成工具 \| AI工具集">6</a></sup></td>
<td>图像输入，扩展支持文本控制</td>
<td>文本、图像、音频输入，支持背景替换、物体移除<sup><a href="https://www.aitags.cn/sites/1297.html" rel="noopener" target="_blank" title="Runway - 全球领先的多模态AI创作平台，一句话生成视频与动画 \| AI标签页">8</a></sup></td>
</tr>
<tr>
<td><strong>是否开源</strong></td>
<td>否</td>
<td>否</td>
<td>否</td>
<td>否</td>
<td><strong>是</strong></td>
<td>否</td>
</tr>
<tr>
<td><strong>API支持</strong></td>
<td>是<sup><a href="https://blog.csdn.net/AIproducthub/article/details/156311775" rel="noopener" target="_blank" title="即梦AI是什么？从零开始掌握即梦AI：功能详解、使用指南与竞品对比_即梦aⅰ是谁的产品-CSDN博客">2</a></sup></td>
<td>是<sup><a href="https://www.aitags.cn/sites/1294.html" rel="noopener" target="_blank" title="Vidu AI - 全球领先AI视频生成平台，长时长+多主体一致性 \| AI标签页">3</a></sup></td>
<td>是<sup><a href="https://www.tudingai.com/sites/3082.html" rel="noopener" target="_blank" title="可灵AI官网 - 快手团队研发的视频与图像生成大模型产品 \| 图钉AI导航">5</a></sup></td>
<td>是（阿里云百炼平台）</td>
<td>是（开源模型）</td>
<td>是（Credit系统）<sup><a href="https://www.aitags.cn/sites/1297.html" rel="noopener" target="_blank" title="Runway - 全球领先的多模态AI创作平台，一句话生成视频与动画 \| AI标签页">8</a></sup></td>
</tr>
<tr>
<td><strong>中文适配性</strong></td>
<td><strong>优秀（92%语义理解准确率）</strong><sup><a href="https://blog.csdn.net/AIproducthub/article/details/156311775" rel="noopener" target="_blank" title="即梦AI是什么？从零开始掌握即梦AI：功能详解、使用指南与竞品对比_即梦aⅰ是谁的产品-CSDN博客">2</a></sup></td>
<td>良好（本地化评分3.6/5）<sup><a href="https://blog.csdn.net/AIproducthub/article/details/156311775" rel="noopener" target="_blank" title="即梦AI是什么？从零开始掌握即梦AI：功能详解、使用指南与竞品对比_即梦aⅰ是谁的产品-CSDN博客">2</a></sup></td>
<td>优秀（集成DeepSeek-R1优化）<sup><a href="https://baike.baidu.com/item/%E5%8F%AF%E7%81%B5AI/65264347" rel="noopener" target="_blank" title="可灵AI_百度百科">10</a></sup></td>
<td>优秀（优化中式元素表现）<sup><a href="https://ai-bot.cn/tongyi-wanxvideo/" rel="noopener" target="_blank" title="通义万相AI视频 - 阿里推出的免费AI视频生成工具 \| AI工具集">6</a></sup></td>
<td>一般（依赖英文提示词）</td>
<td>良好</td>
</tr>
</tbody>
</table></div>
<h3 id="_6">技术演进趋势总结</h3>
<ul>
<li><strong>架构主导权转移</strong>：DiT架构已成为主流，凭借其在长序列建模与时序一致性上的优势，被即梦AI、可灵AI、通义万相等广泛采用；Vidu采用的U-ViT融合架构则在局部细节与全局控制间取得平衡<sup><a href="https://www.aitags.cn/sites/1294.html" rel="noopener" target="_blank" title="Vidu AI - 全球领先AI视频生成平台，长时长+多主体一致性 \| AI标签页">3</a></sup>。</li>
<li><strong>输出能力持续突破</strong>：分辨率普遍达到1080P，即梦AI已支持4K输出；时长方面，可灵AI以2分钟领先，满足长内容创作需求<sup><a href="https://www.36kr.com/p/3400302888540296" rel="noopener" target="_blank" title="国产AI视频三国杀：可灵、即梦、Vidu，谁会是最大赢家？-36氪">1</a></sup>。</li>
<li><strong>控制维度不断丰富</strong>：从基础的文本提示发展为支持首尾帧、多图参考、反向提示词、音画同步等精细化控制手段，显著提升创作精确度<sup><a href="https://ai-bot.cn/tongyi-wanxvideo/" rel="noopener" target="_blank" title="通义万相AI视频 - 阿里推出的免费AI视频生成工具 \| AI工具集">6</a>,<a href="https://36kr.com/p/3230074841513348" rel="noopener" target="_blank" title="可灵vs即梦，决战AI短剧-36氪">11</a></sup>。</li>
<li><strong>部署模式分化明显</strong>：商业SaaS工具（如即梦AI、Vidu）提供便捷云端服务，而Stable Video Diffusion作为开源代表，支持本地部署与私有化定制，满足企业级安全需求。</li>
</ul>
<h2 id="_7">四、典型应用场景与落地案例</h2>
<p>图生视频技术已从实验室原型走向产业一线，在电商营销、影视创作、工业制造与医疗教育等多个领域实现规模化落地。以下基于公开报道与企业实测数据，系统梳理其在真实场景中的应用价值与成效。</p>
<h3 id="_8">电商与广告营销</h3>
<ul>
<li>
<p><strong>淘宝图生视频</strong><br/>
  服饰类商家上传1-5张商品静态图，系统自动生成最长20秒的动态短视频，用于商品主图展示与卖点讲解。某女装店铺应用后，<strong>平均每月节省视频制作费用上千元，制作周期缩短超10天</strong>，显著提升上新效率。</p>
</li>
<li>
<p><strong>AtomoVideo</strong><br/>
  阿里妈妈推出的电商视频生成工具，将静态商品图转为动态广告素材。实测数据显示，使用AtomoVideo生成的动态广告<strong>点击率较静态图提升27%，转化成本降低19%</strong>，已广泛应用于淘宝、天猫品牌商家的日常投放。</p>
</li>
<li>
<p><strong>PMOCK AI生视频</strong><br/>
  面向跨境电商的内容生成工具，支持批量制作TikTok风格短剧。某美妆品牌通过该工具日更5条剧情带货视频，<strong>1个月内涨粉8万，引流超3000精准访客</strong>，验证了AI生成内容在海外市场的传播潜力。</p>
</li>
</ul>
<!-- 组合图表: 动态广告 vs 静态图：点击率与转化成本对比 -->
<div class="chart-responsive-wrapper chart-wrapper-chart_fc6acac5">
<style>
        .chart-wrapper-chart_fc6acac5 {

            width: 100%;
            min-height: 400px;
            margin: 20px 0;  /* 改为上下margin，不要左右margin */
            background: transparent;
            border-radius: 12px;
            overflow: visible;
            box-sizing: border-box;
        }



        .chart-wrapper-chart_fc6acac5 #chart-chart_fc6acac5 {
            width: 100% !important;
            height: 600px !important;
            box-sizing: border-box;
        }

        /* Tablet */
        @media screen and (max-width: 1024px) {

            .chart-wrapper-chart_fc6acac5 #chart-chart_fc6acac5 {
                height: 500px !important;
            }

        }

        /* Mobile */
        @media screen and (max-width: 768px) {
            .chart-wrapper-chart_fc6acac5 {
                margin: 10px 0;
                border-radius: 8px;

            }

            .chart-wrapper-chart_fc6acac5 #chart-chart_fc6acac5 {
                height: 400px !important;
            }

        }

        /* Small Mobile */
        @media screen and (max-width: 480px) {
            .chart-wrapper-chart_fc6acac5 {
                margin: 10px 0;

            }

            .chart-wrapper-chart_fc6acac5 #chart-chart_fc6acac5 {
                height: 300px !important;
            }

        }
    </style>
<div id="chart-chart_fc6acac5"></div>
</div>
<script>
(function() {
    function runWhenEchartsReady() {
        if (typeof echarts !== 'undefined') {
            
(function() {

function getResponsiveConfig() {
    const width = window.innerWidth;
    const isMobile = width < 768;
    const isSmallMobile = width < 480;

    if (isSmallMobile) {
        return {
            isMobile: true,
            isSmallMobile: true,
            titleSize: 12,
            legendSize: 10,
            axisLabelSize: 9,
            axisNameSize: 10,
            dataLabelSize: 10,
            symbolSize: 4,
            lineWidth: 2,
            barMaxWidth: 30,
            gridLeft: '8%',
            gridRight: '8%',
            gridTop: '25%',
            gridBottom: '20%',
            // ✅ 新增配置
            scatterSize: 6,
            radarRadius: '55%',
            mapZoom: 0.9,
            boxWidth: ['25%', '75%'],
            emphasisScale: 1.2
        };
    } else if (isMobile) {
        return {
            isMobile: true,
            isSmallMobile: false,
            titleSize: 13,
            legendSize: 11,
            axisLabelSize: 10,
            axisNameSize: 11,
            dataLabelSize: 11,
            symbolSize: 5,
            lineWidth: 2.5,
            barMaxWidth: 35,
            gridLeft: '6%',
            gridRight: '6%',
            gridTop: '20%',
            gridBottom: '15%',
            // ✅ 新增配置
            scatterSize: 8,
            radarRadius: '60%',
            mapZoom: 1.0,
            boxWidth: ['28%', '72%'],
            emphasisScale: 1.3
        };
    } else {
        return {
            isMobile: false,
            isSmallMobile: false,
            titleSize: 18,
            legendSize: 13,
            axisLabelSize: 12,
            axisNameSize: 14,
            dataLabelSize: 12,
            symbolSize: 6,
            lineWidth: 3,
            barMaxWidth: 45,
            gridLeft: '3%',
            gridRight: '4%',
            gridTop: '15%',
            gridBottom: '10%',
            // ✅ 新增配置
            scatterSize: 10,
            radarRadius: '65%',
            mapZoom: 1.2,
            boxWidth: ['30%', '70%'],
            emphasisScale: 1.5
        };
    }
}


    function initChart() {
        if (typeof echarts === 'undefined') {
            console.error('ECharts未加载，请在页面中引入ECharts库');
            const chartDom = document.getElementById('chart-chart_fc6acac5');
            if (chartDom) {
                chartDom.innerHTML = '<div style="padding:40px;text-align:center;color:#999;font-size:14px;">图表加载失败<br/>请确保引入ECharts库</div>';
            }
            return;
        }

        const chartDom = document.getElementById('chart-chart_fc6acac5');
        if (!chartDom) return;

        // 关键修复：确保容器有明确的宽度和高度
        function ensureContainerSize() {
            // 强制设置容器尺寸为父元素的100%
            chartDom.style.width = '100%';
            chartDom.style.height = chartDom.style.height || '640px';

            // 触发重排以确保尺寸生效
            chartDom.offsetHeight;

            const rect = chartDom.getBoundingClientRect();

            // 调试信息（可选）
            console.log('Chart container size:', {
                width: rect.width,
                height: rect.height,
                computedWidth: window.getComputedStyle(chartDom).width
            });

            return rect.width > 0 && rect.height > 0;
        }

        // 延迟初始化，确保DOM完全渲染
        function initWithRetry(retries = 5) {
            if (retries <= 0) {
                console.error('Chart initialization failed after retries');
                return;
            }

            if (!ensureContainerSize()) {
                setTimeout(() => initWithRetry(retries - 1), 100);
                return;
            }

            // 初始化图表
            const myChart = echarts.init(chartDom);

            function updateChartOption() {
                const responsive = getResponsiveConfig();
                const baseOption = {
  "title": {
    "text": "动态广告 vs 静态图：点击率与转化成本对比",
    "left": "center",
    "top": "2%",
    "textStyle": {
      "fontSize": 18,
      "fontWeight": "bold",
      "color": "#333"
    }
  },
  "tooltip": {
    "trigger": "axis",
    "backgroundColor": "rgba(255, 255, 255, 0.95)",
    "borderColor": "#ccc",
    "borderWidth": 1,
    "textStyle": {
      "color": "#333"
    },
    "axisPointer": {
      "type": "cross",
      "crossStyle": {
        "color": "#999"
      }
    }
  },
  "legend": {
    "data": [
      "点击率",
      "转化成本降幅"
    ],
    "top": "10%",
    "bottom": null,
    "left": "center",
    "right": null,
    "orient": "horizontal",
    "show": true,
    "textStyle": {
      "fontSize": 13,
      "color": "#666"
    }
  },
  "grid": {
    "left": "3%",
    "right": "8%",
    "bottom": "10%",
    "top": "20%",
    "containLabel": true
  },
  "xAxis": {
    "type": "category",
    "name": "",
    "nameLocation": "middle",
    "nameGap": 30,
    "nameTextStyle": {
      "fontSize": responsive.axisNameSize,
      "fontWeight": "bold",
      "color": "#333"
    },
    "boundaryGap": true,
    "data": [
      "静态图",
      "动态视频"
    ],
    "axisLine": {
      "lineStyle": {
        "color": "#999"
      }
    },
    "axisLabel": {
      "fontSize": responsive.axisLabelSize,
      "color": "#666",
      "interval": responsive.isMobile ? 2 : 0,
      "rotate": responsive.isMobile ? 45 : 30
    }
  },
  "yAxis": [
    {
      "type": "value",
      "name": "点击率（%）",
      "position": "left",
      "nameTextStyle": {
        "fontSize": responsive.axisNameSize,
        "fontWeight": "bold",
        "color": "#333"
      },
      "axisLine": {
        "show": true,
        "lineStyle": {
          "color": "#999"
        }
      },
      "axisLabel": {
        "fontSize": responsive.axisLabelSize,
        "color": "#666"
      },
      "splitLine": {
        "lineStyle": {
          "type": "dashed",
          "color": "#e0e0e0"
        }
      }
    },
    {
      "type": "value",
      "name": "转化成本降幅（%）",
      "position": "right",
      "nameTextStyle": {
        "fontSize": responsive.axisNameSize,
        "fontWeight": "bold",
        "color": "#333"
      },
      "axisLine": {
        "show": true,
        "lineStyle": {
          "color": "#999"
        }
      },
      "axisLabel": {
        "fontSize": responsive.axisLabelSize,
        "color": "#666"
      },
      "splitLine": {
        "show": false
      }
    }
  ],
  "series": [
    {
      "name": "点击率",
      "type": "bar",
      "data": [
        2.1,
        2.67
      ],
      "yAxisIndex": 0,
      "itemStyle": {
        "color": "#5470c6",
        "borderRadius": [
          4,
          4,
          0,
          0
        ],
        "shadowBlur": responsive.isMobile ? 6 : 8,
        "shadowColor": "rgba(84, 112, 198, 0.2)",
        "shadowOffsetY": 4
      },
      "emphasis": {
        "focus": "series",
        "itemStyle": {
          "shadowBlur": 12,
          "shadowColor": "rgba(84, 112, 198, 0.2)"
        }
      },
      "barMaxWidth": responsive.barMaxWidth
    },
    {
      "name": "转化成本降幅",
      "type": "line",
      "data": [
        0,
        19
      ],
      "yAxisIndex": 1,
      "itemStyle": {
        "color": "#91cc75",
        "borderWidth": 2,
        "borderColor": "#fff"
      },
      "smooth": false,
      "symbol": "circle",
      "symbolSize": responsive.symbolSize,
      "showSymbol": !responsive.isMobile,
      "lineStyle": {
        "width": responsive.lineWidth,
        "color": "#91cc75",
        "shadowBlur": responsive.isMobile ? 6 : 8,
        "shadowColor": "rgba(145, 204, 117, 0.2)",
        "shadowOffsetY": 3
      },
      "emphasis": {
        "focus": "series",
        "showSymbol": true,
        "itemStyle": {
          "symbolSize": 12,
          "shadowBlur": 10,
          "shadowColor": "rgba(145, 204, 117, 0.5)",
          "borderWidth": 3
        },
        "scale": responsive.emphasisScale
      }
    }
  ]
};  // ✅ 使用传入的 JSON

                // 应用响应式配置
                if (baseOption.title) {
                    baseOption.title.textStyle = baseOption.title.textStyle || {};
                    baseOption.title.textStyle.fontSize = responsive.titleSize;
                }

                if (baseOption.legend) {
                    baseOption.legend.textStyle = baseOption.legend.textStyle || {};
                    baseOption.legend.textStyle.fontSize = responsive.legendSize;
                    // ✅ 添加移动端图例位置调整
                    if (responsive.isMobile && baseOption.legend.orient === 'vertical') {
                        baseOption.legend.orient = 'horizontal';
                        baseOption.legend.top = 'bottom';
                        baseOption.legend.left = 'center';
                        baseOption.legend.right = undefined;
                    }
                }

                if (baseOption.xAxis) {
                    const xAxis = Array.isArray(baseOption.xAxis) ? baseOption.xAxis : [baseOption.xAxis];
                    xAxis.forEach(axis => {
                        if (axis.nameTextStyle) axis.nameTextStyle.fontSize = responsive.axisNameSize;
                        if (axis.axisLabel) axis.axisLabel.fontSize = responsive.axisLabelSize;
                        // ✅ 移动端隐藏轴名称
                        if (responsive.isMobile && axis.name) {
                            axis.name = '';
                        }
                    });
                }
                if (baseOption.yAxis) {
                    const yAxis = Array.isArray(baseOption.yAxis) ? baseOption.yAxis : [baseOption.yAxis];
                    yAxis.forEach(axis => {
                        if (axis.nameTextStyle) axis.nameTextStyle.fontSize = responsive.axisNameSize;
                        if (axis.axisLabel) axis.axisLabel.fontSize = responsive.axisLabelSize;
                        // ✅ 移动端隐藏轴名称
                        if (responsive.isMobile && axis.name) {
                            axis.name = '';
                        }
                    });
                }

                if (baseOption.grid) {
                    baseOption.grid.left = responsive.gridLeft;
                    baseOption.grid.right = responsive.gridRight;
                    baseOption.grid.top = responsive.gridTop;
                    baseOption.grid.bottom = responsive.gridBottom;
                }

                if (baseOption.series) {
                    baseOption.series.forEach(s => {
                        if (s.type === 'line' || s.type === 'scatter') {
                            s.symbolSize = responsive.symbolSize;
                        }
                    });
                }

                return baseOption;
            }

            myChart.setOption(updateChartOption());

            // 关键修复：初始化后立即resize确保使用正确宽度
            setTimeout(() => {
                myChart.resize();
            }, 100);

            let resizeTimer;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(function() {
                    myChart.resize();
                    myChart.setOption(updateChartOption());
                }, 200);  // ✅ 改为200ms防抖
            });
        }

        // 开始初始化
        initWithRetry();
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initChart);
    } else {
        // 如果DOM已加载，延迟一点确保样式生效
        setTimeout(initChart, 50);
    }
})();

        } else {
            // 等待 ECharts 加载，每 100ms 检查一次，最多等待 10 秒
            let attempts = 0;
            const maxAttempts = 100;
            const checkInterval = setInterval(function() {
                attempts++;
                if (typeof echarts !== 'undefined') {
                    clearInterval(checkInterval);
                    
(function() {

function getResponsiveConfig() {
    const width = window.innerWidth;
    const isMobile = width < 768;
    const isSmallMobile = width < 480;

    if (isSmallMobile) {
        return {
            isMobile: true,
            isSmallMobile: true,
            titleSize: 12,
            legendSize: 10,
            axisLabelSize: 9,
            axisNameSize: 10,
            dataLabelSize: 10,
            symbolSize: 4,
            lineWidth: 2,
            barMaxWidth: 30,
            gridLeft: '8%',
            gridRight: '8%',
            gridTop: '25%',
            gridBottom: '20%',
            // ✅ 新增配置
            scatterSize: 6,
            radarRadius: '55%',
            mapZoom: 0.9,
            boxWidth: ['25%', '75%'],
            emphasisScale: 1.2
        };
    } else if (isMobile) {
        return {
            isMobile: true,
            isSmallMobile: false,
            titleSize: 13,
            legendSize: 11,
            axisLabelSize: 10,
            axisNameSize: 11,
            dataLabelSize: 11,
            symbolSize: 5,
            lineWidth: 2.5,
            barMaxWidth: 35,
            gridLeft: '6%',
            gridRight: '6%',
            gridTop: '20%',
            gridBottom: '15%',
            // ✅ 新增配置
            scatterSize: 8,
            radarRadius: '60%',
            mapZoom: 1.0,
            boxWidth: ['28%', '72%'],
            emphasisScale: 1.3
        };
    } else {
        return {
            isMobile: false,
            isSmallMobile: false,
            titleSize: 18,
            legendSize: 13,
            axisLabelSize: 12,
            axisNameSize: 14,
            dataLabelSize: 12,
            symbolSize: 6,
            lineWidth: 3,
            barMaxWidth: 45,
            gridLeft: '3%',
            gridRight: '4%',
            gridTop: '15%',
            gridBottom: '10%',
            // ✅ 新增配置
            scatterSize: 10,
            radarRadius: '65%',
            mapZoom: 1.2,
            boxWidth: ['30%', '70%'],
            emphasisScale: 1.5
        };
    }
}


    function initChart() {
        if (typeof echarts === 'undefined') {
            console.error('ECharts未加载，请在页面中引入ECharts库');
            const chartDom = document.getElementById('chart-chart_fc6acac5');
            if (chartDom) {
                chartDom.innerHTML = '<div style="padding:40px;text-align:center;color:#999;font-size:14px;">图表加载失败<br/>请确保引入ECharts库</div>';
            }
            return;
        }

        const chartDom = document.getElementById('chart-chart_fc6acac5');
        if (!chartDom) return;

        // 关键修复：确保容器有明确的宽度和高度
        function ensureContainerSize() {
            // 强制设置容器尺寸为父元素的100%
            chartDom.style.width = '100%';
            chartDom.style.height = chartDom.style.height || '640px';

            // 触发重排以确保尺寸生效
            chartDom.offsetHeight;

            const rect = chartDom.getBoundingClientRect();

            // 调试信息（可选）
            console.log('Chart container size:', {
                width: rect.width,
                height: rect.height,
                computedWidth: window.getComputedStyle(chartDom).width
            });

            return rect.width > 0 && rect.height > 0;
        }

        // 延迟初始化，确保DOM完全渲染
        function initWithRetry(retries = 5) {
            if (retries <= 0) {
                console.error('Chart initialization failed after retries');
                return;
            }

            if (!ensureContainerSize()) {
                setTimeout(() => initWithRetry(retries - 1), 100);
                return;
            }

            // 初始化图表
            const myChart = echarts.init(chartDom);

            function updateChartOption() {
                const responsive = getResponsiveConfig();
                const baseOption = {
  "title": {
    "text": "动态广告 vs 静态图：点击率与转化成本对比",
    "left": "center",
    "top": "2%",
    "textStyle": {
      "fontSize": 18,
      "fontWeight": "bold",
      "color": "#333"
    }
  },
  "tooltip": {
    "trigger": "axis",
    "backgroundColor": "rgba(255, 255, 255, 0.95)",
    "borderColor": "#ccc",
    "borderWidth": 1,
    "textStyle": {
      "color": "#333"
    },
    "axisPointer": {
      "type": "cross",
      "crossStyle": {
        "color": "#999"
      }
    }
  },
  "legend": {
    "data": [
      "点击率",
      "转化成本降幅"
    ],
    "top": "10%",
    "bottom": null,
    "left": "center",
    "right": null,
    "orient": "horizontal",
    "show": true,
    "textStyle": {
      "fontSize": 13,
      "color": "#666"
    }
  },
  "grid": {
    "left": "3%",
    "right": "8%",
    "bottom": "10%",
    "top": "20%",
    "containLabel": true
  },
  "xAxis": {
    "type": "category",
    "name": "",
    "nameLocation": "middle",
    "nameGap": 30,
    "nameTextStyle": {
      "fontSize": responsive.axisNameSize,
      "fontWeight": "bold",
      "color": "#333"
    },
    "boundaryGap": true,
    "data": [
      "静态图",
      "动态视频"
    ],
    "axisLine": {
      "lineStyle": {
        "color": "#999"
      }
    },
    "axisLabel": {
      "fontSize": responsive.axisLabelSize,
      "color": "#666",
      "interval": responsive.isMobile ? 2 : 0,
      "rotate": responsive.isMobile ? 45 : 30
    }
  },
  "yAxis": [
    {
      "type": "value",
      "name": "点击率（%）",
      "position": "left",
      "nameTextStyle": {
        "fontSize": responsive.axisNameSize,
        "fontWeight": "bold",
        "color": "#333"
      },
      "axisLine": {
        "show": true,
        "lineStyle": {
          "color": "#999"
        }
      },
      "axisLabel": {
        "fontSize": responsive.axisLabelSize,
        "color": "#666"
      },
      "splitLine": {
        "lineStyle": {
          "type": "dashed",
          "color": "#e0e0e0"
        }
      }
    },
    {
      "type": "value",
      "name": "转化成本降幅（%）",
      "position": "right",
      "nameTextStyle": {
        "fontSize": responsive.axisNameSize,
        "fontWeight": "bold",
        "color": "#333"
      },
      "axisLine": {
        "show": true,
        "lineStyle": {
          "color": "#999"
        }
      },
      "axisLabel": {
        "fontSize": responsive.axisLabelSize,
        "color": "#666"
      },
      "splitLine": {
        "show": false
      }
    }
  ],
  "series": [
    {
      "name": "点击率",
      "type": "bar",
      "data": [
        2.1,
        2.67
      ],
      "yAxisIndex": 0,
      "itemStyle": {
        "color": "#5470c6",
        "borderRadius": [
          4,
          4,
          0,
          0
        ],
        "shadowBlur": responsive.isMobile ? 6 : 8,
        "shadowColor": "rgba(84, 112, 198, 0.2)",
        "shadowOffsetY": 4
      },
      "emphasis": {
        "focus": "series",
        "itemStyle": {
          "shadowBlur": 12,
          "shadowColor": "rgba(84, 112, 198, 0.2)"
        }
      },
      "barMaxWidth": responsive.barMaxWidth
    },
    {
      "name": "转化成本降幅",
      "type": "line",
      "data": [
        0,
        19
      ],
      "yAxisIndex": 1,
      "itemStyle": {
        "color": "#91cc75",
        "borderWidth": 2,
        "borderColor": "#fff"
      },
      "smooth": false,
      "symbol": "circle",
      "symbolSize": responsive.symbolSize,
      "showSymbol": !responsive.isMobile,
      "lineStyle": {
        "width": responsive.lineWidth,
        "color": "#91cc75",
        "shadowBlur": responsive.isMobile ? 6 : 8,
        "shadowColor": "rgba(145, 204, 117, 0.2)",
        "shadowOffsetY": 3
      },
      "emphasis": {
        "focus": "series",
        "showSymbol": true,
        "itemStyle": {
          "symbolSize": 12,
          "shadowBlur": 10,
          "shadowColor": "rgba(145, 204, 117, 0.5)",
          "borderWidth": 3
        },
        "scale": responsive.emphasisScale
      }
    }
  ]
};  // ✅ 使用传入的 JSON

                // 应用响应式配置
                if (baseOption.title) {
                    baseOption.title.textStyle = baseOption.title.textStyle || {};
                    baseOption.title.textStyle.fontSize = responsive.titleSize;
                }

                if (baseOption.legend) {
                    baseOption.legend.textStyle = baseOption.legend.textStyle || {};
                    baseOption.legend.textStyle.fontSize = responsive.legendSize;
                    // ✅ 添加移动端图例位置调整
                    if (responsive.isMobile && baseOption.legend.orient === 'vertical') {
                        baseOption.legend.orient = 'horizontal';
                        baseOption.legend.top = 'bottom';
                        baseOption.legend.left = 'center';
                        baseOption.legend.right = undefined;
                    }
                }

                if (baseOption.xAxis) {
                    const xAxis = Array.isArray(baseOption.xAxis) ? baseOption.xAxis : [baseOption.xAxis];
                    xAxis.forEach(axis => {
                        if (axis.nameTextStyle) axis.nameTextStyle.fontSize = responsive.axisNameSize;
                        if (axis.axisLabel) axis.axisLabel.fontSize = responsive.axisLabelSize;
                        // ✅ 移动端隐藏轴名称
                        if (responsive.isMobile && axis.name) {
                            axis.name = '';
                        }
                    });
                }
                if (baseOption.yAxis) {
                    const yAxis = Array.isArray(baseOption.yAxis) ? baseOption.yAxis : [baseOption.yAxis];
                    yAxis.forEach(axis => {
                        if (axis.nameTextStyle) axis.nameTextStyle.fontSize = responsive.axisNameSize;
                        if (axis.axisLabel) axis.axisLabel.fontSize = responsive.axisLabelSize;
                        // ✅ 移动端隐藏轴名称
                        if (responsive.isMobile && axis.name) {
                            axis.name = '';
                        }
                    });
                }

                if (baseOption.grid) {
                    baseOption.grid.left = responsive.gridLeft;
                    baseOption.grid.right = responsive.gridRight;
                    baseOption.grid.top = responsive.gridTop;
                    baseOption.grid.bottom = responsive.gridBottom;
                }

                if (baseOption.series) {
                    baseOption.series.forEach(s => {
                        if (s.type === 'line' || s.type === 'scatter') {
                            s.symbolSize = responsive.symbolSize;
                        }
                    });
                }

                return baseOption;
            }

            myChart.setOption(updateChartOption());

            // 关键修复：初始化后立即resize确保使用正确宽度
            setTimeout(() => {
                myChart.resize();
            }, 100);

            let resizeTimer;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(function() {
                    myChart.resize();
                    myChart.setOption(updateChartOption());
                }, 200);  // ✅ 改为200ms防抖
            });
        }

        // 开始初始化
        initWithRetry();
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initChart);
    } else {
        // 如果DOM已加载，延迟一点确保样式生效
        setTimeout(initChart, 50);
    }
})();

                } else if (attempts >= maxAttempts) {
                    clearInterval(checkInterval);
                    console.error('ECharts 加载超时');
                }
            }, 100);
        }
    }
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', runWhenEchartsReady);
    } else {
        runWhenEchartsReady();
    }
})();
</script>
<h3 id="_9">影视与内容创作</h3>
<ul>
<li>
<p><strong>Netflix</strong><br/>
  在剧集《暗夜追踪》的前期筹备中，制作团队使用文生视频模型将剧本分镜转化为30秒动态预览视频，<strong>替代传统手绘分镜3-5天的制作周期</strong>，大幅提升创意沟通效率。</p>
</li>
<li>
<p><strong>米哈游</strong><br/>
  游戏公司在《原神》开发过程中，利用文生图与图生视频技术批量生成场景概念动画与角色动作预演，<strong>整体美术资产制作周期缩短40%</strong>，加速了内容迭代节奏。</p>
</li>
<li>
<p><strong>可灵AI</strong><br/>
  应用于AI漫剧与短剧创作，支持从单张角色图生成连贯剧情视频。创作者可通过“运动笔刷”精确控制角色动作区域，<strong>实现电影级质感输出</strong>，已在快手平台孵化多个百万粉丝IP。</p>
</li>
</ul>
<h3 id="_10">医疗与工业应用</h3>
<ul>
<li>
<p><strong>北京协和医院</strong><br/>
  将医生口述的诊断意见自动转化为带彩色标注的肺部解剖动态图，<strong>患者对病情的理解度从35%提升至82%</strong>，显著改善医患沟通质量。</p>
</li>
<li>
<p><strong>三一重工</strong><br/>
  开发“文生视频辅助系统”，将维修手册文字描述转化为60秒操作演示视频。新员工通过观看AI生成的教学视频，<strong>故障排查平均耗时从2小时缩短至40分钟</strong>，大幅提升培训效率。</p>
</li>
<li>
<p><strong>特斯拉上海工厂</strong><br/>
  利用图生视频模型模拟机器人在产线上的运行流程，提前进行路径规划与瓶颈检测。在一次新车型导入中，<strong>AI系统发现3处物料运输冲突点，避免后期改造损失超200万元</strong>。</p>
</li>
</ul>
<h3 id="_11">教育领域创新</h3>
<ul>
<li><strong>中小学教学应用</strong><br/>
  教师输入“初中物理浮力实验”等课程描述，系统可在5分钟内生成高清教学演示视频，<strong>内容制作效率提升70%以上</strong>，尤其适用于实验类课程的课件准备。</li>
</ul>
<h2 id="_12">五、选型决策支持与未来趋势</h2>
<p>为帮助用户在复杂的技术生态中做出最优选择，本章构建系统性选型框架，并基于当前技术演进路径，预测未来发展趋势，提供前瞻性决策支持。</p>
<h3 id="_13">选型决策支持系统</h3>
<p>面对多样化的图生视频工具，选型应基于<strong>用户身份、核心需求与预算约束</strong>进行多维度评估。以下多维对比看板综合成片质量、中文适配性、性价比、生态整合度与可控性五大关键维度，对六大主流工具进行量化分析，为不同用户群体提供精准推荐。</p>
<style>
.compare-container-chart_ea135007 {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", sans-serif;
    background: transparent;
    color: #333;  /* 统一使用深色文字 */
    line-height: 1.6;
    max-width: 1400px;
    margin: 20px auto;
    padding: 0 20px;
    box-sizing: border-box;
}

.compare-container-chart_ea135007 * {
    box-sizing: border-box;
}

/* 页眉 - 白色背景 */
.compare-header-chart_ea135007 {
    background: white;
    color: #1a1a1a;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    margin-bottom: 30px;
    text-align: center;
}

.compare-header-chart_ea135007 h1 {
    font-size: 32px;
    margin-bottom: 10px;
    font-weight: 700;
    word-wrap: break-word;
    color: #1a1a1a;
}

.compare-header-chart_ea135007 .subtitle {
    color: #666;
    font-size: 16px;
    word-wrap: break-word;
}

/* 概览卡片 - 白色背景 */
.overview-cards-chart_ea135007 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.overview-card-chart_ea135007 {
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    transition: transform 0.2s, box-shadow 0.2s;
    border-top: 4px solid;
    min-width: 0;
    overflow: hidden;
}

.overview-card-chart_ea135007:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.12);
}

.overview-card-chart_ea135007 h3 {
    font-size: 20px;
    margin-bottom: 8px;
    color: #1a1a1a;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.overview-card-chart_ea135007 .card-subtitle {
    font-size: 13px;
    color: #333;  /* 原来是 #666 */
    margin-bottom: 15px;
    word-wrap: break-word;
}

.overview-card-chart_ea135007 .price-tag {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 15px;
    word-wrap: break-word;
}

.overview-card-chart_ea135007 .specs {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
}

.spec-item-chart_ea135007 {
    padding: 8px;
    background: #f8f9fa;
    border-radius: 6px;
    font-size: 12px;
    min-width: 0;
    overflow: hidden;
}

.spec-item-chart_ea135007 .label {
    color: #555;  /* 原来是 #666 */
    font-size: 11px;
    margin-bottom: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}


.spec-item-chart_ea135007 .value {
    font-size: 14px;
    font-weight: 600;
    color: #1a1a1a;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.3;
}

/* 对比区域 - 白色背景 */
.comparison-section-chart_ea135007 {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    margin-bottom: 30px;
    overflow: hidden;
}

.section-title-chart_ea135007 {
    font-size: 18px;
    color: #1a1a1a;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid #f0f0f0;
    display: flex;
    align-items: center;
    gap: 8px;
    word-wrap: break-word;
}

.section-title-chart_ea135007::before {
    content: '';
    width: 4px;
    height: 18px;
    background: #1890ff;
    border-radius: 2px;
    flex-shrink: 0;
}

/* 横向对比条 */
.bar-group-chart_ea135007 {
    margin-bottom: 30px;
}

.bar-header-chart_ea135007 {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    flex-wrap: wrap;
    gap: 5px;
}

.bar-label-chart_ea135007 {
    font-size: 15px;
    font-weight: 600;
    color: #333;
    word-wrap: break-word;
}

.bar-unit-chart_ea135007 {
    font-size: 13px;
    color: #666;
    white-space: nowrap;
}

.bars-container-chart_ea135007 {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.bar-row-chart_ea135007 {
    display: flex;
    align-items: center;
    gap: 10px;
    position: relative;
    padding-right: 30px;
}

.item-name-label-chart_ea135007 {
    width: 100px;
    font-size: 13px;
    color: #666;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex-shrink: 0;
}

.bar-track-chart_ea135007 {
    flex: 1;
    height: 40px;
    background: #f5f5f5;
    border-radius: 6px;
    overflow: hidden;
    position: relative;
    min-width: 0;
}

.bar-fill-chart_ea135007 {
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding-right: 10px;
    font-size: 13px;
    font-weight: 600;
    color: white;
    transition: width 1s ease-out;
    border-radius: 6px;
    white-space: nowrap;
    overflow: hidden;
}

.winner-badge-chart_ea135007 {
    width: 22px;
    height: 22px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: #ffd700;
    border-radius: 50%;
    font-size: 11px;
    flex-shrink: 0;
    position: absolute;
    right: 2px;
    top: 50%;
    transform: translateY(-50%);
}

/* 图表容器 - 白色背景 */
.chart-row-chart_ea135007 {
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
    margin-bottom: 30px;
}

.chart-box-chart_ea135007 {
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    min-width: 0;
    overflow: hidden;
}

.chart-box-chart_ea135007 h3 {
    font-size: 16px;
    margin-bottom: 15px;
    color: #333;
    word-wrap: break-word;
}

.chart-box-chart_ea135007 > div {
    width: 100%;
    overflow: hidden;
}

/* 对比表格 - 白色背景 */
.table-wrapper-chart_ea135007 {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.data-table-chart_ea135007 {
    width: 100%;
    min-width: 600px;
    border-collapse: collapse;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
}

.data-table-chart_ea135007 th {
    background: #fafafa;
    padding: 14px 12px;
    text-align: left;
    font-weight: 600;
    color: #333;
    border-bottom: 2px solid #e8e8e8;
    font-size: 13px;
    white-space: nowrap;
}

/* ✅ 修改3: 表格单元格 */
.data-table-chart_ea135007 td {
    padding: 14px 12px;
    border-bottom: 1px solid #f0f0f0;
    font-size: 13px;
    color: #333;  /* 原来是 #666 */
    word-wrap: break-word;
}


.data-table-chart_ea135007 tr:hover {
    background: #fafafa;
}

.data-table-chart_ea135007 .highlight {
    background: #e6f7ff;
    color: #1890ff;
    font-weight: 600;
}

.category-header-chart_ea135007 {
    background: #f0f0f0 !important;
    font-weight: 700 !important;
    color: #1a1a1a !important;
}

/* 结论区域 - 添加白色背景框 */
.conclusion-chart_ea135007 {
    background: white;
    color: #333;
    border-radius: 12px;
    padding: 30px;
    margin-top: 30px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
}

.conclusion-chart_ea135007 h2 {
    font-size: 22px;
    margin-bottom: 20px;
    color: #1a1a1a;
    text-align: center;
}

.conclusion-grid-chart_ea135007 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-top: 25px;
}

.conclusion-item-chart_ea135007 {
    background: #fafafa;
    padding: 20px;
    border-radius: 12px;
    border-left: 4px solid #1890ff;
    min-width: 0;
    overflow: hidden;
}

.conclusion-item-chart_ea135007 h3 {
    font-size: 17px;
    margin-bottom: 12px;
    color: #1a1a1a;
    word-wrap: break-word;
}

/* ✅ 修改6: 结论区域段落 */
.conclusion-item-chart_ea135007 p {
    font-size: 13px;
    line-height: 1.6;
    margin-bottom: 8px;
    color: #333;  /* 原来是 #666 */
    word-wrap: break-word;
    overflow-wrap: break-word;
}


.conclusion-item-chart_ea135007 strong {
    color: #1a1a1a;
}

/* 星星评分样式 */
.rating-stars-chart_ea135007 {
    display: inline-flex;
    align-items: center;
    gap: 2px;
}

.rating-stars-chart_ea135007 .star {
    font-size: 18px;
    line-height: 1;
}

.rating-stars-chart_ea135007 .star.full {
    color: #ffd700;
}

.rating-stars-chart_ea135007 .star.empty {
    color: #ddd;
}

.rating-stars-chart_ea135007 .star.partial {
    position: relative;
    color: #ddd;
}

.rating-stars-chart_ea135007 .star.partial::before {
    content: '★';
    position: absolute;
    left: 0;
    color: #ffd700;
    overflow: hidden;
    width: var(--fill-width, 50%);
}

/* ✅ 修改7: 星星评分数字 */
.rating-stars-chart_ea135007 .rating-number {
    margin-left: 6px;
    font-size: 14px;
    color: #333;  /* 原来是 #666 */
    font-weight: normal;
}

/* 响应式优化 */
@media (max-width: 1024px) {
    .chart-row-chart_ea135007 {
        grid-template-columns: 1fr;
    }

    .overview-cards-chart_ea135007 {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
}

@media (max-width: 768px) {
    .compare-container-chart_ea135007 {
        padding: 0 10px;
    }

    .compare-header-chart_ea135007 {
        padding: 20px 15px;
    }

    .compare-header-chart_ea135007 h1 {
        font-size: 24px;
    }

    .compare-header-chart_ea135007 .subtitle {
        font-size: 14px;
    }

    .chart-row-chart_ea135007 {
        grid-template-columns: 1fr;
        gap: 15px;
    }

    .overview-cards-chart_ea135007 {
        grid-template-columns: 1fr;
        gap: 15px;
    }

    .overview-card-chart_ea135007 {
        padding: 15px;
    }

    .overview-card-chart_ea135007 h3 {
        font-size: 18px;
    }

    .overview-card-chart_ea135007 .price-tag {
        font-size: 20px;
    }

    .overview-card-chart_ea135007 .specs {
        grid-template-columns: 1fr;
        gap: 8px;
    }

    .comparison-section-chart_ea135007 {
        padding: 15px;
    }

    .section-title-chart_ea135007 {
        font-size: 16px;
        flex-wrap: wrap;
    }

    /* 保持深色 */
    .item-name-label-chart_ea135007 {
        color: #333;  /* 原来是 #666 */
    }

    .bar-unit-chart_ea135007 {
        color: #555;  /* 原来是 #666 */
    }

    .rating-stars-chart_ea135007 .rating-number {
        color: #333;  /* 原来是 #666 */
    }    
    .bar-fill-chart_ea135007 {
        font-size: 11px;
        padding-right: 6px;
    }

    .bar-track-chart_ea135007 {
        height: 36px;
    }

    .bar-label-chart_ea135007 {
        font-size: 14px;
    }

    /* ✅ 修改4: 横向柱状图单位 */
    .bar-unit-chart_ea135007 {
        font-size: 13px;
        color: #555;  /* 原来是 #666 */
        white-space: nowrap;
    }
    .winner-badge-chart_ea135007 {
        width: 20px;
        height: 20px;
        font-size: 10px;
        right: 2px;
    }

    .bar-row-chart_ea135007 {
        padding-right: 24px;
    }

    .chart-box-chart_ea135007 {
        padding: 15px;
    }

    .chart-box-chart_ea135007 h3 {
        font-size: 15px;
        margin-bottom: 12px;
    }

    .data-table-chart_ea135007 {
        min-width: 500px;
    }

    .data-table-chart_ea135007 th,
    .data-table-chart_ea135007 td {
        padding: 10px 8px;
        font-size: 12px;
    }

    .conclusion-chart_ea135007 {
        padding: 20px 15px;
    }

    .conclusion-chart_ea135007 h2 {
        font-size: 18px;
    }

    .conclusion-grid-chart_ea135007 {
        grid-template-columns: 1fr;
        gap: 15px;
    }

    .conclusion-item-chart_ea135007 {
        padding: 15px;
    }

    .conclusion-item-chart_ea135007 h3 {
        font-size: 16px;
    }

    .conclusion-item-chart_ea135007 p {
        font-size: 12px;
    }

    .rating-stars-chart_ea135007 .star {
        font-size: 16px;
    }

    .rating-stars-chart_ea135007 .rating-number {
        font-size: 12px;
    }
}

@media (max-width: 480px) {
    .compare-header-chart_ea135007 h1 {
        font-size: 20px;
    }

    .compare-header-chart_ea135007 .subtitle {
        font-size: 13px;
    }

    .overview-card-chart_ea135007 h3 {
        font-size: 16px;
    }

    .overview-card-chart_ea135007 .price-tag {
        font-size: 18px;
    }

    .spec-item-chart_ea135007 .value {
        font-size: 13px;
    }

/* ✅ 修改5: 横向柱状图项目名 */
.item-name-label-chart_ea135007 {
    width: 100px;
    font-size: 13px;
    color: #333;  /* 原来是 #666 */
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex-shrink: 0;
}

    .bar-fill-chart_ea135007 {
        font-size: 10px;
        padding-right: 4px;
    }

    .bar-track-chart_ea135007 {
        height: 32px;
    }

    .bar-row-chart_ea135007 {
        gap: 6px;
        padding-right: 22px;
    }

    .winner-badge-chart_ea135007 {
        width: 18px;
        height: 18px;
        font-size: 9px;
        right: 1px;
    }

    .data-table-chart_ea135007 {
        min-width: 400px;
    }
}

/* 确保ECharts容器不溢出 */
.chart-box-chart_ea135007 [id^="chart-"] {
    max-width: 100%;
    overflow: hidden;
}
</style>
<div class="compare-container-chart_ea135007">
<div class="compare-header-chart_ea135007">
<h1>六款主流图生视频工具多维对比看板</h1>
<div class="subtitle">即梦AI、Vidu、可灵AI、通义万相、Stable Video Diffusion、Runway ML全面评测</div>
</div>
<div class="overview-cards-chart_ea135007">
<div class="overview-card-chart_ea135007" style="border-top-color: #FF6B6B">
<h3>即梦AI</h3>
<div class="card-subtitle">字节跳动</div>
<div class="price-tag" style="color: #FF6B6B">免费版+99元/月会员</div>
<div class="specs">
<div class="spec-item-chart_ea135007">
<div class="label">输出分辨率</div>
<div class="value">4K</div>
</div>
<div class="spec-item-chart_ea135007">
<div class="label">首尾帧控制</div>
<div class="value">支持</div>
</div>
<div class="spec-item-chart_ea135007">
<div class="label">生态整合</div>
<div class="value">与抖音生态深度整合</div>
</div>
</div>
</div>
<div class="overview-card-chart_ea135007" style="border-top-color: #4ECDC4">
<h3>Vidu</h3>
<div class="card-subtitle">生数科技</div>
<div class="price-tag" style="color: #4ECDC4">未明确（错峰模式可降成本）</div>
<div class="specs">
<div class="spec-item-chart_ea135007">
<div class="label">生成时长</div>
<div class="value">16秒</div>
</div>
<div class="spec-item-chart_ea135007">
<div class="label">物理模拟</div>
<div class="value">真实</div>
</div>
<div class="spec-item-chart_ea135007">
<div class="label">画质</div>
<div class="value">电影级</div>
</div>
</div>
</div>
<div class="overview-card-chart_ea135007" style="border-top-color: #45B7D1">
<h3>可灵AI</h3>
<div class="card-subtitle">快手</div>
<div class="price-tag" style="color: #45B7D1">黄金553元/年，铂金2234元/年</div>
<div class="specs">
<div class="spec-item-chart_ea135007">
<div class="label">长视频支持</div>
<div class="value">2分钟</div>
</div>
<div class="spec-item-chart_ea135007">
<div class="label">帧率</div>
<div class="value">48fps</div>
</div>
<div class="spec-item-chart_ea135007">
<div class="label">生态整合</div>
<div class="value">与快手星芒短剧计划整合</div>
</div>
</div>
</div>
<div class="overview-card-chart_ea135007" style="border-top-color: #96CEB4">
<h3>通义万相</h3>
<div class="card-subtitle">阿里云</div>
<div class="price-tag" style="color: #96CEB4">API按量计费</div>
<div class="specs">
<div class="spec-item-chart_ea135007">
<div class="label">音画同步</div>
<div class="value">支持</div>
</div>
<div class="spec-item-chart_ea135007">
<div class="label">叙事能力</div>
<div class="value">多镜头叙事</div>
</div>
<div class="spec-item-chart_ea135007">
<div class="label">服务类型</div>
<div class="value">企业级API服务</div>
</div>
</div>
</div>
<div class="overview-card-chart_ea135007" style="border-top-color: #FFEAA7">
<h3>Stable Video Diffusion</h3>
<div class="card-subtitle">Stability AI</div>
<div class="price-tag" style="color: #FFEAA7">开源免费</div>
<div class="specs">
<div class="spec-item-chart_ea135007">
<div class="label">部署方式</div>
<div class="value">支持本地部署</div>
</div>
<div class="spec-item-chart_ea135007">
<div class="label">调用方式</div>
<div class="value">代码级调用</div>
</div>
<div class="spec-item-chart_ea135007">
<div class="label">模型调整</div>
<div class="value">模型可微调</div>
</div>
</div>
</div>
<div class="overview-card-chart_ea135007" style="border-top-color: #DDA0DD">
<h3>Runway ML</h3>
<div class="card-subtitle">Runway</div>
<div class="price-tag" style="color: #DDA0DD">Credit计费系统</div>
<div class="specs">
<div class="spec-item-chart_ea135007">
<div class="label">背景替换</div>
<div class="value">支持</div>
</div>
<div class="spec-item-chart_ea135007">
<div class="label">物体移除</div>
<div class="value">支持</div>
</div>
<div class="spec-item-chart_ea135007">
<div class="label">社区支持</div>
<div class="value">活跃创作者社区</div>
</div>
</div>
</div>
</div>
<div class="comparison-section-chart_ea135007">
<h2 class="section-title-chart_ea135007">核心指标对比</h2>
<div class="bar-group-chart_ea135007">
<div class="bar-header-chart_ea135007">
<span class="bar-label-chart_ea135007">成片质量</span>
<span class="bar-unit-chart_ea135007">分</span>
</div>
<div class="bars-container-chart_ea135007">
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">即梦AI</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="89.8%" style="background: #FF6B6B; width: 0%">
                        4.4 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Vidu</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="100.0%" style="background: #4ECDC4; width: 0%">
                        4.9 分
                    </div>
</div>
<span class="winner-badge-chart_ea135007">🏆</span>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">可灵AI</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="89.8%" style="background: #45B7D1; width: 0%">
                        4.4 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">通义万相</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="87.8%" style="background: #96CEB4; width: 0%">
                        4.3 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Stable Video Diffusion</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="77.6%" style="background: #FFEAA7; width: 0%">
                        3.8 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Runway ML</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="95.9%" style="background: #DDA0DD; width: 0%">
                        4.7 分
                    </div>
</div>
</div>
</div>
</div>
<div class="bar-group-chart_ea135007">
<div class="bar-header-chart_ea135007">
<span class="bar-label-chart_ea135007">中文适配性</span>
<span class="bar-unit-chart_ea135007">分</span>
</div>
<div class="bars-container-chart_ea135007">
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">即梦AI</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="100.0%" style="background: #FF6B6B; width: 0%">
                        4.6 分
                    </div>
</div>
<span class="winner-badge-chart_ea135007">🏆</span>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Vidu</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="78.3%" style="background: #4ECDC4; width: 0%">
                        3.6 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">可灵AI</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="97.8%" style="background: #45B7D1; width: 0%">
                        4.5 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">通义万相</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="97.8%" style="background: #96CEB4; width: 0%">
                        4.5 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Stable Video Diffusion</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="65.2%" style="background: #FFEAA7; width: 0%">
                        3.0 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Runway ML</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="87.0%" style="background: #DDA0DD; width: 0%">
                        4.0 分
                    </div>
</div>
</div>
</div>
</div>
<div class="bar-group-chart_ea135007">
<div class="bar-header-chart_ea135007">
<span class="bar-label-chart_ea135007">性价比</span>
<span class="bar-unit-chart_ea135007">分</span>
</div>
<div class="bars-container-chart_ea135007">
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">即梦AI</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="95.8%" style="background: #FF6B6B; width: 0%">
                        4.6 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Vidu</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="79.2%" style="background: #4ECDC4; width: 0%">
                        3.8 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">可灵AI</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="91.7%" style="background: #45B7D1; width: 0%">
                        4.4 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">通义万相</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="83.3%" style="background: #96CEB4; width: 0%">
                        4.0 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Stable Video Diffusion</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="100.0%" style="background: #FFEAA7; width: 0%">
                        4.8 分
                    </div>
</div>
<span class="winner-badge-chart_ea135007">🏆</span>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Runway ML</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="72.9%" style="background: #DDA0DD; width: 0%">
                        3.5 分
                    </div>
</div>
</div>
</div>
</div>
<div class="bar-group-chart_ea135007">
<div class="bar-header-chart_ea135007">
<span class="bar-label-chart_ea135007">生态整合度</span>
<span class="bar-unit-chart_ea135007">分</span>
</div>
<div class="bars-container-chart_ea135007">
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">即梦AI</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="100.0%" style="background: #FF6B6B; width: 0%">
                        4.8 分
                    </div>
</div>
<span class="winner-badge-chart_ea135007">🏆</span>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Vidu</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="81.2%" style="background: #4ECDC4; width: 0%">
                        3.9 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">可灵AI</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="93.8%" style="background: #45B7D1; width: 0%">
                        4.5 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">通义万相</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="87.5%" style="background: #96CEB4; width: 0%">
                        4.2 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Stable Video Diffusion</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="62.5%" style="background: #FFEAA7; width: 0%">
                        3.0 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Runway ML</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="83.3%" style="background: #DDA0DD; width: 0%">
                        4.0 分
                    </div>
</div>
</div>
</div>
</div>
<div class="bar-group-chart_ea135007">
<div class="bar-header-chart_ea135007">
<span class="bar-label-chart_ea135007">可控性</span>
<span class="bar-unit-chart_ea135007">分</span>
</div>
<div class="bars-container-chart_ea135007">
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">即梦AI</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="95.8%" style="background: #FF6B6B; width: 0%">
                        4.6 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Vidu</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="91.7%" style="background: #4ECDC4; width: 0%">
                        4.4 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">可灵AI</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="97.9%" style="background: #45B7D1; width: 0%">
                        4.7 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">通义万相</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="93.8%" style="background: #96CEB4; width: 0%">
                        4.5 分
                    </div>
</div>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Stable Video Diffusion</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="100.0%" style="background: #FFEAA7; width: 0%">
                        4.8 分
                    </div>
</div>
<span class="winner-badge-chart_ea135007">🏆</span>
</div>
<div class="bar-row-chart_ea135007">
<span class="item-name-label-chart_ea135007">Runway ML</span>
<div class="bar-track-chart_ea135007">
<div class="bar-fill-chart_ea135007" data-width="95.8%" style="background: #DDA0DD; width: 0%">
                        4.6 分
                    </div>
</div>
</div>
</div>
</div>
</div>
<div class="comparison-section-chart_ea135007">
<h2 class="section-title-chart_ea135007">详细参数对比表</h2>
<div class="table-wrapper-chart_ea135007">
<div class="table-scroll-wrapper"><table class="data-table-chart_ea135007">
<thead>
<tr>
<th>对比项</th>
<th>即梦AI</th>
<th>Vidu</th>
<th>可灵AI</th>
<th>通义万相</th>
<th>Stable Video Diffusion</th>
<th>Runway ML</th>
</tr>
</thead>
<tbody>
<tr>
<td class="category-header-chart_ea135007" colspan="7">性能</td>
</tr>
<tr>
<td>成片质量</td>
<td>4.4 分</td>
<td class="highlight">4.9 分 ✓</td>
<td>4.4 分</td>
<td>4.3 分</td>
<td>3.8 分</td>
<td>4.7 分</td>
</tr>
<tr>
<td class="category-header-chart_ea135007" colspan="7">本地化</td>
</tr>
<tr>
<td>中文适配性</td>
<td class="highlight">4.6 分 ✓</td>
<td>3.6 分</td>
<td>4.5 分</td>
<td>4.5 分</td>
<td>3.0 分</td>
<td>4.0 分</td>
</tr>
<tr>
<td class="category-header-chart_ea135007" colspan="7">成本</td>
</tr>
<tr>
<td>性价比</td>
<td>4.6 分</td>
<td>3.8 分</td>
<td>4.4 分</td>
<td>4.0 分</td>
<td class="highlight">4.8 分 ✓</td>
<td>3.5 分</td>
</tr>
<tr>
<td class="category-header-chart_ea135007" colspan="7">生态</td>
</tr>
<tr>
<td>生态整合度</td>
<td class="highlight">4.8 分 ✓</td>
<td>3.9 分</td>
<td>4.5 分</td>
<td>4.2 分</td>
<td>3.0 分</td>
<td>4.0 分</td>
</tr>
<tr>
<td class="category-header-chart_ea135007" colspan="7">控制</td>
</tr>
<tr>
<td>可控性</td>
<td>4.6 分</td>
<td>4.4 分</td>
<td>4.7 分</td>
<td>4.5 分</td>
<td class="highlight">4.8 分 ✓</td>
<td>4.6 分</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="conclusion-chart_ea135007">
<h2>综合评价与建议</h2>
<div class="conclusion-grid-chart_ea135007">
<div class="conclusion-item-chart_ea135007">
<h3>🏆 即梦AI</h3>
<p><strong>推荐指数:</strong> <span class="rating-stars-chart_ea135007"><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span> <span class="rating-number">5.0/5.0</span></span></p>
<p><strong>核心优势:</strong> 生态整合极佳、中文支持优秀、性价比高</p>
<p><strong>主要不足:</strong> 电影级质感略逊于Vidu</p>
<p><strong>适合人群:</strong> 抖音内容创作者与电商卖家</p>
</div>
<div class="conclusion-item-chart_ea135007">
<h3>🏆 Vidu</h3>
<p><strong>推荐指数:</strong> <span class="rating-stars-chart_ea135007"><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span> <span class="rating-number">5.0/5.0</span></span></p>
<p><strong>核心优势:</strong> 成片质量顶尖、物理模拟真实</p>
<p><strong>主要不足:</strong> 价格较高、生态独立</p>
<p><strong>适合人群:</strong> 专业影视团队与广告公司</p>
</div>
<div class="conclusion-item-chart_ea135007">
<h3>🏆 可灵AI</h3>
<p><strong>推荐指数:</strong> <span class="rating-stars-chart_ea135007"><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span> <span class="rating-number">5.0/5.0</span></span></p>
<p><strong>核心优势:</strong> 长视频支持强、角色一致性高、与快手生态深度绑定</p>
<p><strong>主要不足:</strong> 价格阶梯较高</p>
<p><strong>适合人群:</strong> MCN机构与AI短剧创作者</p>
</div>
<div class="conclusion-item-chart_ea135007">
<h3>🏆 通义万相</h3>
<p><strong>推荐指数:</strong> <span class="rating-stars-chart_ea135007"><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span><span class="star empty">☆</span> <span class="rating-number">4.0/5.0</span></span></p>
<p><strong>核心优势:</strong> 音画同步精准、支持企业API、多镜头叙事</p>
<p><strong>主要不足:</strong> 生成时长受限</p>
<p><strong>适合人群:</strong> 企业级应用与开发者</p>
</div>
<div class="conclusion-item-chart_ea135007">
<h3>🏆 Stable Video Diffusion</h3>
<p><strong>推荐指数:</strong> <span class="rating-stars-chart_ea135007"><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span><span class="star empty">☆</span> <span class="rating-number">4.0/5.0</span></span></p>
<p><strong>核心优势:</strong> 完全开源、可私有化部署、边际成本低</p>
<p><strong>主要不足:</strong> 生成质量较低、使用门槛高</p>
<p><strong>适合人群:</strong> 研究者与技术团队</p>
</div>
<div class="conclusion-item-chart_ea135007">
<h3>🏆 Runway ML</h3>
<p><strong>推荐指数:</strong> <span class="rating-stars-chart_ea135007"><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span><span class="star full">★</span> <span class="rating-number">5.0/5.0</span></span></p>
<p><strong>核心优势:</strong> 创意控制自由、社区资源丰富、功能全面</p>
<p><strong>主要不足:</strong> 单次成本高</p>
<p><strong>适合人群:</strong> 专业创意人士与独立制片人</p>
</div>
</div>
</div>
</div>
<script>
(function() {
    // 横向条形图动画
    function animateBars() {
        const bars = document.querySelectorAll('.bar-fill-chart_ea135007');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const bar = entry.target;
                    const width = bar.getAttribute('data-width');

                    setTimeout(() => {
                        bar.style.width = width;
                    }, 100);

                    observer.unobserve(bar);
                }
            });
        }, {
            threshold: 0.3
        });

        bars.forEach(bar => observer.observe(bar));
    }

    // 页面加载后执行
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', animateBars);
    } else {
        animateBars();
    }
})();
</script>
<p>此外，以下决策树可辅助用户根据自身情况快速定位最佳工具：</p>
<pre><code class="language-tree" data-renderable="true">开始
│
├─ 您的主要目标是？
│   ├─ 快速生成内容并分发至社交平台 → 转向【生态平台】
│   ├─ 创作电影级高质量广告或短片 → 推荐：Vidu 或 Runway ML
│   ├─ 批量生产长视频内容（如短剧） → 推荐：可灵AI
│   ├─ 需要API集成或本地部署 → 推荐：通义万相（API） 或 Stable Video Diffusion（开源）
│   └─ 个人探索与学习 → 推荐：即梦AI（免费额度充足）
│
├─ 生态平台？
│   ├─ 使用抖音/剪映 → 推荐：即梦AI（无缝衔接）
│   ├─ 使用快手/快影 → 推荐：可灵AI（深度整合）
│   └─ 使用阿里云生态 → 推荐：通义万相
│
最终推荐结果输出
</code></pre>
<h3 id="_14">未来发展趋势展望</h3>
<p>图生视频技术正从“可用”迈向“好用”与“普及”，未来将呈现三大演进方向：</p>
<ul>
<li>
<p><strong>技术层面</strong>：  </p>
<ul>
<li><strong>实时生成普及化</strong>：以PixVerse R1为代表的“所想即所见”技术将推动图生视频进入实时交互时代，应用于虚拟人直播、游戏NPC生成等场景。  </li>
<li><strong>多模态融合深化</strong>：音频、文本、图像、3D模型的深度融合将成为标配，实现“一句话生成带音效的完整短片”。  </li>
<li><strong>可控性革命</strong>：通过首尾帧、运动笔刷、反向提示词等技术，创作精确度将逼近传统视频编辑软件<sup><a href="https://36kr.com/p/3230074841513348" rel="noopener" target="_blank" title="可灵vs即梦，决战AI短剧-36氪">11</a></sup>。</li>
</ul>
</li>
<li>
<p><strong>应用层面</strong>：  </p>
<ul>
<li><strong>工业化内容生产</strong>：AI将承担70%以上的短视频、广告、教学视频的初稿生成，人类创作者转向策划与精修。  </li>
<li><strong>个性化与交互式叙事</strong>：用户可参与剧情分支选择，AI实时生成对应情节，推动互动影视与游戏融合<sup><a href="https://www.digitaling.com/articles/1444792.html" rel="noopener" target="_blank" title="广告制作大变天！Vidu Agent横空出世，商业广告一键成片 - 数英">4</a></sup>。  </li>
<li><strong>端侧智能</strong>：模型轻量化与端侧部署将使“手机直出AI视频”成为现实，进一步降低创作门槛。</li>
</ul>
</li>
<li>
<p><strong>生态层面</strong>：  </p>
<ul>
<li><strong>平台化闭环竞争</strong>：字节、快手、阿里等大厂将围绕“生成-分发-变现”构建完整生态，工具的竞争力将更多取决于其生态整合能力<sup><a href="https://www.36kr.com/p/3400302888540296" rel="noopener" target="_blank" title="国产AI视频三国杀：可灵、即梦、Vidu，谁会是最大赢家？-36氪">1</a></sup>。  </li>
<li><strong>开源与闭源并存</strong>：Stable Video Diffusion等开源模型将持续推动技术民主化，而商业SaaS服务则在易用性与服务上建立壁垒。  </li>
<li><strong>商业化模式创新</strong>：除订阅制与API计费外，可能出现“生成效果分成”、“IP共创”等新型商业模式。</li>
</ul>
</li>
</ul>
<p>综上，图生视频技术的未来不仅是生成质量的提升，更是创作范式的重构。用户在选型时，应兼顾当前需求与长期趋势，选择既能解决当下问题，又能适应未来演进的工具与生态。</p>
</div>
</main>
<footer class="mt-12 py-6 text-center text-sm" style="color: #64748B; border-top: 1px solid rgba(59,130,246,0.2);">
<p>Generated by Qwen</p>
</footer>
<!-- Lightbox Modal -->
<div class="fixed inset-0 z-50 hidden items-center justify-center lightbox-backdrop" id="lightbox" style="display:none !important;">
<!-- Close Button -->
<button class="absolute right-2 sm:right-4 top-2 sm:top-4 z-10 rounded-full p-2 sm:p-3 shadow-lg transition-all hover:scale-110" onclick="closeLightbox()" style="background: rgba(255,255,255,0.85); color: #0F172A;">
<svg class="h-4 w-4 sm:h-5 sm:w-5" fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><path d="M18 6 6 18M6 6l12 12"></path></svg>
</button>
<!-- Nav Arrows -->
<button class="absolute left-2 sm:left-4 top-1/3 lg:top-1/2 z-10 -translate-y-1/2 rounded-full p-2 sm:p-4 shadow-lg transition-all hover:scale-110" id="prevBtn" onclick="prevImage()" style="background: rgba(255,255,255,0.85); color: #0F172A;">
<svg class="h-5 w-5 sm:h-6 sm:w-6" fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><path d="m15 18-6-6 6-6"></path></svg>
</button>
<button class="absolute right-2 sm:right-4 top-1/3 lg:top-1/2 z-10 -translate-y-1/2 rounded-full p-2 sm:p-4 shadow-lg transition-all hover:scale-110" id="nextBtn" onclick="nextImage()" style="background: rgba(255,255,255,0.85); color: #0F172A;">
<svg class="h-5 w-5 sm:h-6 sm:w-6" fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><path d="m9 18 6-6-6-6"></path></svg>
</button>
<!-- Modal Content -->
<div class="mx-2 sm:mx-4 w-full overflow-hidden rounded-2xl sm:rounded-3xl shadow-2xl animate-fadeIn" onclick="event.stopPropagation()" style="max-width: 1000px; max-height: 95vh; background: rgba(255,255,255,0.85);">
<!-- Image Area -->
<div class="relative flex items-center justify-center p-3 sm:p-4" style="background: linear-gradient(135deg, #F0F9FF, #BAE6FD); height: 55vh;">
<img alt="" class="max-h-full max-w-full rounded-xl object-contain shadow-lg" id="lightboxImage" src=""/>
</div>
<!-- Thumbnails Bar - 缩略图预览条 -->
<div class="flex items-center gap-2 p-3 overflow-x-auto" style="background: #F0F9FF; border-top: 1px solid rgba(59,130,246,0.2);">
<div class="flex-shrink-0 rounded-full px-3 py-1 text-xs font-medium" id="imageCounter" style="background: #3B82F620; color: #3B82F6;">1 / 1</div>
<div class="flex gap-2 flex-1 overflow-x-auto" id="thumbnails"></div>
</div>
<!-- Info Area - 可折叠 -->
<div class="overflow-y-auto p-4" style="max-height: 30vh; border-top: 1px solid rgba(59,130,246,0.2);">
<h2 class="mb-1 text-lg sm:text-xl font-bold" id="lightboxTitle" style="color: #0F172A;"></h2>
<p class="mb-4 text-sm italic" id="lightboxSubtitle" style="color: #64748B;"></p>
<!-- Tags -->
<div class="mb-4 flex flex-wrap gap-2" id="lightboxTags"></div>
<!-- Key Info -->
<div class="mb-4 space-y-2" id="lightboxKeyInfo"></div>
<!-- Other Info -->
<div class="mb-4 space-y-2" id="lightboxOtherInfo"></div>
<!-- Links -->
<div class="mb-5" id="lightboxLinksSection">
<h3 class="mb-2 text-sm font-semibold" style="color: #64748B;">相关链接</h3>
<div class="flex flex-wrap gap-2" id="lightboxLinks"></div>
</div>
<!-- References -->
<div class="mb-5" id="lightboxRefsSection">
<h3 class="mb-2 text-sm font-semibold" style="color: #64748B;">参考文献</h3>
<div class="flex flex-wrap gap-2" id="lightboxRefs"></div>
</div>
<div class="flex gap-3">
<a class="inline-flex flex-1 items-center justify-center gap-2 rounded-xl px-4 py-3 text-sm font-semibold text-white shadow-lg transition-all hover:brightness-105" href="#" id="lightboxLink" style="background: linear-gradient(135deg, #3B82F6, #1D4ED8);" target="_blank">
<svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg>
            查看原图
          </a>
<button class="inline-flex items-center justify-center rounded-xl px-5 py-3 text-sm font-medium transition-colors" onclick="closeLightbox()" style="background: rgba(255,255,255,0.85); color: #0F172A;">
            关闭
          </button>
</div>
<p class="mt-3 text-center text-xs" style="color: #64748B;">本报告仅限个人学习、研究或欣赏使用</p>
<div class="mt-4 hidden items-center justify-center gap-4 rounded-xl p-2 text-xs md:flex" style="background: #F0F9FF; color: #64748B;">
<span class="flex items-center gap-1">
<kbd class="rounded px-1.5 py-0.5" style="background: rgba(255,255,255,0.85);">←</kbd>
<kbd class="rounded px-1.5 py-0.5" style="background: rgba(255,255,255,0.85);">→</kbd>
            切换
          </span>
<span class="flex items-center gap-1">
<kbd class="rounded px-1.5 py-0.5" style="background: rgba(255,255,255,0.85);">ESC</kbd>
            关闭
          </span>
</div>
</div>
</div>
</div>
<!-- Simple Image Viewer for Table Images -->
<div class="fixed inset-0 z-50 hidden items-center justify-center image-viewer-backdrop" id="imageViewer" onclick="closeImageViewer()" style="display:none !important;">
<!-- Close Button -->
<button class="absolute right-3 top-3 z-10 rounded-full p-2 shadow-lg transition-all hover:scale-110" onclick="closeImageViewer()" style="background: rgba(255,255,255,0.85); color: #0F172A;">
<svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><path d="M18 6 6 18M6 6l12 12"></path></svg>
</button>
<!-- Download Button -->
<button class="absolute right-16 top-3 z-10 rounded-full p-2 shadow-lg transition-all hover:scale-110" id="imageViewerDownload" onclick="event.stopPropagation(); downloadImage();" style="background: rgba(255,255,255,0.85); color: #0F172A;">
<svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" x2="12" y1="15" y2="3"></line></svg>
</button>
<!-- Disclaimer Toast -->
<div class="absolute top-3 left-1/2 -translate-x-1/2 z-10 px-4 py-2 rounded-full text-xs shadow-lg" onclick="event.stopPropagation()" style="background: rgba(0,0,0,0.75); color: #fff;">
      本报告仅限个人学习、研究或欣赏使用
    </div>
<!-- Image -->
<img alt="" class="max-h-[90vh] max-w-[90vw] rounded-lg object-contain shadow-2xl" id="imageViewerImg" onclick="event.stopPropagation()" src=""/>
</div>
<!-- Download Toast (outside imageViewer to stay visible) -->
<div class="download-toast" id="downloadToast">
<svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
<span>图片仅供个人使用，请勿用于商业用途</span>
</div>
<script>
    const CARDS_DATA = [];
    
    /* ================================================================
       1. STATE & CONFIG
       ================================================================ */
    let currentItem = null;
    let currentImageIndex = 0;
    let filteredData = [...CARDS_DATA];
    let activeTag = 'all';

    // Theme colors for JS
    const THEME = {
      primary: '#3B82F6',
      primaryLight: '#60A5FA',
      surface: 'rgba(255,255,255,0.85)',
      textPrimary: '#0F172A',
      textMuted: '#64748B',
    };

    // Renderable code block languages
    const RENDERABLE_LANGUAGES = ['mermaid', 'echarts', 'dot', 'graphviz', 'tree', 'ascii-tree'];
    
    // Code copy functionality with header bar
    function initCodeCopy() {
      document.querySelectorAll('.markdown-content pre').forEach(pre => {
        // Skip if already wrapped
        if (pre.parentElement.classList.contains('code-block-wrapper')) return;
        if (pre.parentElement.classList.contains('renderable-code-container')) return;
        
        const code = pre.querySelector('code');
        let langName = 'CODE';
        let langLower = '';
        if (code && code.className) {
          const match = code.className.match(/language-(\w+)/);
          if (match) {
            langName = match[1].toUpperCase();
            langLower = match[1].toLowerCase();
          }
        }
        
        // Check if this is a renderable code block
        const isRenderable = RENDERABLE_LANGUAGES.includes(langLower);
        
        // Create wrapper
        const wrapper = document.createElement('div');
        wrapper.className = 'code-block-wrapper';
        
        if (isRenderable) {
          // Create container for side-by-side layout
          const container = document.createElement('div');
          container.className = 'renderable-code-container';
          pre.parentNode.insertBefore(container, pre);
          
          // Add code block wrapper to container
          container.appendChild(wrapper);
          
          // Create preview section
          const previewWrapper = document.createElement('div');
          previewWrapper.className = 'renderable-preview-wrapper';
          
          const previewHeader = document.createElement('div');
          previewHeader.className = 'renderable-preview-header';
          const previewTitle = document.createElement('span');
          previewTitle.className = 'renderable-preview-title';
          previewTitle.innerHTML = `<span>📊</span> 渲染预览`;
          previewHeader.appendChild(previewTitle);
          
          // Add fullscreen button
          const fullscreenBtn = document.createElement('button');
          fullscreenBtn.className = 'renderable-fullscreen-btn';
          fullscreenBtn.innerHTML = `<span>⛶</span><span class="btn-text">全屏</span>`;
          fullscreenBtn.onclick = function() {
            openFullscreenPreview(previewWrapper);
          };
          previewHeader.appendChild(fullscreenBtn);
          previewWrapper.appendChild(previewHeader);
          
          const previewContent = document.createElement('div');
          previewContent.className = 'renderable-preview-content';
          previewWrapper.appendChild(previewContent);
          
          container.appendChild(previewWrapper);
          
          // Store code content and language for later rendering
          previewContent.dataset.lang = langLower;
          previewContent.dataset.code = code ? code.textContent : pre.textContent;
        } else {
          pre.parentNode.insertBefore(wrapper, pre);
        }
        
        // Create header bar
        const header = document.createElement('div');
        header.className = 'code-block-header';
        
        // Window controls (macOS style dots)
        const controls = document.createElement('div');
        controls.className = 'code-window-controls';
        controls.innerHTML = '<span class="code-window-dot red"></span><span class="code-window-dot yellow"></span><span class="code-window-dot green"></span>';
        header.appendChild(controls);
        
        const langLabel = document.createElement('span');
        langLabel.className = 'code-lang-label';
        langLabel.textContent = langName;
        header.appendChild(langLabel);
        
        // Actions container (copy button)
        const actions = document.createElement('div');
        actions.className = 'code-header-actions';
        
        // Create copy button
        const btn = document.createElement('button');
        btn.className = 'code-copy-btn';
        btn.innerHTML = '<svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg> 复制';
        btn.onclick = async () => {
          const codeEl = pre.querySelector('code') || pre;
          const text = codeEl.innerText;
          try {
            await navigator.clipboard.writeText(text);
            btn.classList.add('copied');
            btn.innerHTML = '<svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg> 已复制';
            setTimeout(() => {
              btn.classList.remove('copied');
              btn.innerHTML = '<svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg> 复制';
            }, 2000);
          } catch (err) {
            console.error('Copy failed:', err);
          }
        };
        actions.appendChild(btn);
        header.appendChild(actions);
        
        // Add header and pre to wrapper
        wrapper.appendChild(header);
        wrapper.appendChild(pre);
      });
    }
    
    // Parse ASCII tree structure to Mermaid flowchart
    function parseAsciiTreeToMermaid(text) {
      const lines = text.split('\n').filter(line => line.trim());
      if (lines.length === 0) return 'flowchart LR\n  A[Empty]';
      
      const nodes = [];
      const edges = [];
      let nodeId = 0;
      const nodeMap = new Map(); // text -> id
      const stack = []; // {id, indent}
      
      // Helper to create safe node id
      function getNodeId(text) {
        const cleanText = text.trim();
        if (nodeMap.has(cleanText)) {
          return nodeMap.get(cleanText);
        }
        const id = `N${nodeId++}`;
        nodeMap.set(cleanText, id);
        return id;
      }
      
      // Helper to escape text for Mermaid
      function escapeText(text) {
        return text
          .replace(/"/g, "'")
          .replace(/\[/g, '&#91;')
          .replace(/\]/g, '&#93;')
          .replace(/\(/g, '&#40;')
          .replace(/\)/g, '&#41;')
          .replace(/{/g, '&#123;')
          .replace(/}/g, '&#125;');
      }
      
      // Helper to determine node shape based on content
      function getNodeShape(text) {
        const t = text.trim();
        if (t.startsWith('⚡') || t.includes('汇合') || t.includes('交汇')) {
          return ['{{', '}}'];  // Diamond for special nodes
        } else if (t.startsWith('[') && t.includes(']')) {
          return ['[/', '/]'];  // Parallelogram for choices
        } else if (t.startsWith('+') || t.startsWith('-')) {
          return ['([', '])'];  // Stadium for options
        } else if (t.includes('：') || t.includes(':')) {
          return ['[', ']'];  // Rectangle for sections
        }
        return ['[', ']'];
      }
      
      // Calculate indent level (count leading spaces and tree chars)
      function getIndent(line) {
        let indent = 0;
        // All box drawing and tree-related characters
        const treeChars = ' │├└─┬┴┼┤┌┐┘┏┓┗┛╔╗╚╝═║|+-`\t';
        for (let i = 0; i < line.length; i++) {
          const ch = line[i];
          if (treeChars.includes(ch)) {
            indent++;
          } else {
            break;
          }
        }
        return Math.floor(indent / 2); // Normalize indent
      }
      
      // Extract text content from line
      function extractText(line) {
        return line
          .replace(/^[\s│├└─┬┴┼]+/, '')
          .replace(/^[\-\+\*]\s*/, '')
          .trim();
      }
      
      for (const line of lines) {
        if (!line.trim()) continue;
        
        const indent = getIndent(line);
        const text = extractText(line);
        
        if (!text) continue;
        
        const id = getNodeId(text);
        const [shapeStart, shapeEnd] = getNodeShape(text);
        const escapedText = escapeText(text);
        
        nodes.push(`  ${id}${shapeStart}"${escapedText}"${shapeEnd}`);
        
        // Find parent (last node with smaller indent)
        while (stack.length > 0 && stack[stack.length - 1].indent >= indent) {
          stack.pop();
        }
        
        if (stack.length > 0) {
          const parent = stack[stack.length - 1];
          edges.push(`  ${parent.id} --> ${id}`);
        }
        
        stack.push({ id, indent });
      }
      
      // Build Mermaid code - use LR (left to right) for horizontal tree layout
      let mermaidCode = 'flowchart LR\n';
      mermaidCode += nodes.join('\n') + '\n';
      mermaidCode += edges.join('\n');
      
      return mermaidCode;
    }
    
    // Open fullscreen preview
    function openFullscreenPreview(previewWrapper) {
      const content = previewWrapper.querySelector('.renderable-preview-content');
      if (!content) return;
      
      // Create overlay
      const overlay = document.createElement('div');
      overlay.className = 'renderable-fullscreen-overlay';
      
      // Create header
      const header = document.createElement('div');
      header.className = 'renderable-fullscreen-header';
      
      const title = document.createElement('span');
      title.className = 'renderable-fullscreen-title';
      title.textContent = '📊 渲染预览 - 全屏模式';
      header.appendChild(title);
      
      const closeBtn = document.createElement('button');
      closeBtn.className = 'renderable-fullscreen-close';
      closeBtn.innerHTML = '✕ 关闭';
      closeBtn.onclick = function() {
        document.body.removeChild(overlay);
        document.body.style.overflow = '';
      };
      header.appendChild(closeBtn);
      
      overlay.appendChild(header);
      
      // Create content area with cloned content
      const fullContent = document.createElement('div');
      fullContent.className = 'renderable-fullscreen-content';
      fullContent.innerHTML = content.innerHTML;
      overlay.appendChild(fullContent);
      
      // Add to body
      document.body.appendChild(overlay);
      document.body.style.overflow = 'hidden';
      
      // Close on escape key
      const handleEscape = function(e) {
        if (e.key === 'Escape') {
          document.body.removeChild(overlay);
          document.body.style.overflow = '';
          document.removeEventListener('keydown', handleEscape);
        }
      };
      document.addEventListener('keydown', handleEscape);
      
      // Close on overlay background click
      overlay.onclick = function(e) {
        if (e.target === overlay) {
          document.body.removeChild(overlay);
          document.body.style.overflow = '';
        }
      };
    }
    
    // Render all renderable code blocks
    function initRenderableCodeBlocks() {
      // Initialize Mermaid
      if (typeof mermaid !== 'undefined') {
        mermaid.initialize({
          startOnLoad: false,
          theme: 'default',
          securityLevel: 'loose',
          flowchart: { useMaxWidth: true, htmlLabels: true },
          sequence: { useMaxWidth: true },
          gantt: { useMaxWidth: true },
          er: { useMaxWidth: true },
          pie: { useMaxWidth: true },
          class: { useMaxWidth: true },
          state: { useMaxWidth: true },
          journey: { useMaxWidth: true },
          gitGraph: { useMaxWidth: true }
        });
      }
      
      // Helper to unescape HTML entities
      function unescapeHtml(text) {
        const doc = new DOMParser().parseFromString(text, 'text/html');
        return doc.documentElement.textContent;
      }
      
      // Render each preview
      document.querySelectorAll('.renderable-preview-content').forEach(async (preview, index) => {
        const lang = preview.dataset.lang;
        let code = preview.dataset.code;
        
        if (!lang || !code) return;
        
        // Unescape HTML entities (e.g., &gt; -> >)
        code = unescapeHtml(code);
        
        try {
          if (lang === 'mermaid' && typeof mermaid !== 'undefined') {
            // Render Mermaid diagram
            const id = `mermaid-diagram-${index}`;
            
            // Clean up code for specific diagram types
            let cleanCode = code;
            // Remove classDef/class from non-flowchart diagrams (ERD, sequence, etc.)
            if (code.match(/^\s*(erDiagram|sequenceDiagram|classDiagram|stateDiagram|pie|journey|gantt|gitGraph)/m)) {
              cleanCode = code.split('\n')
                .filter(line => !line.trim().startsWith('classDef ') && !line.trim().startsWith('class '))
                .join('\n');
            }
            
            try {
              const { svg } = await mermaid.render(id, cleanCode);
              preview.innerHTML = svg;
            } catch (mermaidErr) {
              console.error('Mermaid render error:', mermaidErr);
              preview.innerHTML = `<div style="color: #ef4444; padding: 1rem; white-space: pre-wrap;">Mermaid 渲染错误: ${mermaidErr.message || mermaidErr}</div>`;
            }
          } else if ((lang === 'dot' || lang === 'graphviz') && typeof Viz !== 'undefined') {
            // Render Graphviz DOT diagram (v3.x standalone API)
            try {
              const viz = await Viz.instance();
              const svg = viz.renderSVGElement(code);
              preview.innerHTML = '';
              preview.appendChild(svg);
            } catch (e) {
              preview.innerHTML = `<div style="color: #ef4444; padding: 1rem;">Graphviz 渲染错误: ${e.message}</div>`;
            }
          } else if ((lang === 'tree' || lang === 'ascii-tree') && typeof mermaid !== 'undefined') {
            // Parse ASCII tree and convert to Mermaid flowchart
            try {
              const mermaidCode = parseAsciiTreeToMermaid(code);
              const id = `tree-diagram-${index}`;
              const { svg } = await mermaid.render(id, mermaidCode);
              preview.innerHTML = svg;
            } catch (e) {
              preview.innerHTML = `<div style="color: #ef4444; padding: 1rem;">树形结构解析错误: ${e.message}</div>`;
            }
          } else if (lang === 'echarts' && typeof echarts !== 'undefined') {
            // Render ECharts
            preview.style.width = '100%';
            preview.style.minHeight = '300px';
            const chart = echarts.init(preview);
            try {
              const option = new Function('return ' + code)();
              chart.setOption(option);
              // Resize on window resize
              window.addEventListener('resize', () => chart.resize());
            } catch (e) {
              preview.innerHTML = `<div style="color: #ef4444; padding: 1rem;">ECharts 配置解析错误: ${e.message}</div>`;
            }
          } else {
            preview.innerHTML = `<div style="color: #888; padding: 1rem;">不支持的渲染类型: ${lang}</div>`;
          }
        } catch (err) {
          preview.innerHTML = `<div style="color: #ef4444; padding: 1rem;">渲染错误: ${err.message}</div>`;
        }
      });
    }

    // Get unique tags with counts
    function getTags() {
      const tags = new Map();
      CARDS_DATA.forEach(item => {
        if (item.tags) {
          item.tags.forEach(tag => {
            tags.set(tag, (tags.get(tag) || 0) + 1);
          });
        }
      });
      return Array.from(tags.entries()).sort((a, b) => b[1] - a[1]);
    }

    // Tag colors
    const tagColors = [
      { bg: '#3B82F620', text: '#3B82F6', ring: '#3B82F640' },
      { bg: '#06B6D420', text: '#06B6D4', ring: '#06B6D440' },
      { bg: '#8B5CF620', text: '#8B5CF6', ring: '#8B5CF640' },
      { bg: '#EC489920', text: '#EC4899', ring: '#EC489940' },
      { bg: '#10B98120', text: '#10B981', ring: '#10B98140' },
    ];

    function getTagStyle(tag) {
      let hash = 0;
      for (let i = 0; i < tag.length; i++) {
        hash = tag.charCodeAt(i) + ((hash << 5) - hash);
      }
      const color = tagColors[Math.abs(hash) % tagColors.length];
      return `background: ${color.bg}; color: ${color.text}; border: 1px solid ${color.ring};`;
    }

    // Render tag filters
    let showAllTags = false;
    
    function renderFilters() {
      const container = document.getElementById('tagFilters');
      const tags = getTags();
      
      if (tags.length === 0) {
        container.innerHTML = '';
        return;
      }
      
      let html = '<span class="text-sm mr-2" style="color: ' + THEME.textMuted + ';">标签筛选:</span>';
      html += '<button onclick="filterByTag(\'all\')" class="px-3 py-1.5 rounded-full text-sm transition-all" style="' + 
        (activeTag === 'all' ? 'background: ' + THEME.primary + '; color: white;' : 'background: ' + THEME.surface + '; color: ' + THEME.textPrimary + ';') + '">全部</button>';
      
      const displayTags = showAllTags ? tags : tags.slice(0, 12);
      displayTags.forEach(([tag, count]) => {
        html += '<button onclick="filterByTag(\'' + tag.replace(/'/g, "\\'") + '\')" class="px-3 py-1.5 rounded-full text-sm transition-all" style="' + 
          (activeTag === tag ? 'background: ' + THEME.primary + '; color: white;' : 'background: ' + THEME.surface + '; color: ' + THEME.textPrimary + ';') + '">' + tag + ' <span class="text-xs opacity-70">(' + count + ')</span></button>';
      });
      
      if (tags.length > 12) {
        if (showAllTags) {
          html += '<button onclick="toggleAllTags()" class="px-3 py-1.5 rounded-full text-sm transition-all" style="background: ' + THEME.surface + '; color: ' + THEME.primary + '; border: 1px solid ' + THEME.primary + ';">收起</button>';
        } else {
          html += '<button onclick="toggleAllTags()" class="px-3 py-1.5 rounded-full text-sm transition-all" style="background: ' + THEME.surface + '; color: ' + THEME.primary + '; border: 1px solid ' + THEME.primary + ';">+' + (tags.length - 12) + ' 更多</button>';
        }
      }
      
      container.innerHTML = html;
    }
    
    function toggleAllTags() {
      showAllTags = !showAllTags;
      renderFilters();
    }

    // Filter by tag
    function filterByTag(tag) {
      activeTag = tag;
      applyFilters();
      renderFilters();
    }

    // Apply all filters
    function applyFilters() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      
      filteredData = CARDS_DATA.filter(item => {
        const matchesTag = activeTag === 'all' || (item.tags && item.tags.includes(activeTag));
        const matchesSearch = !searchTerm || 
          item.name.toLowerCase().includes(searchTerm) ||
          (item.tags && item.tags.some(t => t.toLowerCase().includes(searchTerm)));
        
        return matchesTag && matchesSearch;
      });
      
      renderGallery();
    }

    // Render gallery
    function renderGallery() {
      const gallery = document.getElementById('gallery');
      const emptyState = document.getElementById('emptyState');
      const itemCount = document.getElementById('itemCount');
      
      itemCount.textContent = filteredData.length;
      
      if (filteredData.length === 0) {
        gallery.innerHTML = '';
        emptyState.classList.remove('hidden');
        emptyState.classList.add('flex');
        return;
      }
      
      emptyState.classList.add('hidden');
      emptyState.classList.remove('flex');
      
      gallery.innerHTML = filteredData.map((item, index) => `
        <div class="group cursor-pointer card-hover rounded-2xl shadow-sm overflow-hidden"
             style="background: ${THEME.surface}; border: 1px solid rgba(0,0,0,0.1);"
             onclick="openLightbox(${index})">
          <div class="aspect-square overflow-hidden" style="background: linear-gradient(135deg, rgba(0,0,0,0.02), rgba(0,0,0,0.05));">
            <img src="${item.images[0]?.url || ''}" alt="${item.name}"
                 class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"
                 loading="lazy"
                 onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%23f0f0f0%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2255%22 text-anchor=%22middle%22 fill=%22%23999%22 font-size=%2240%22>🖼</text></svg>'">
          </div>
          <div class="p-3">
            <h3 class="font-semibold truncate text-sm" style="color: ${THEME.textPrimary};">${item.name}</h3>
            ${item.subtitle ? '<p class="text-xs italic truncate" style="color: ' + THEME.textMuted + ';">' + item.subtitle + '</p>' : ''}
            ${item.tags && item.tags.length > 0 ? '<div class="mt-2 flex flex-wrap gap-1">' + item.tags.slice(0, 2).map(tag => '<span class="inline-block rounded-full px-2 py-0.5 text-[10px]" style="' + getTagStyle(tag) + '">' + tag + '</span>').join('') + '</div>' : ''}
            ${item.links && item.links.length > 0 ? '<div class="mt-2 flex flex-wrap gap-1">' + item.links.slice(0, 3).map(link => '<a href="' + link.url + '" target="_blank" rel="noopener" onclick="event.stopPropagation()" class="inline-flex items-center rounded-full px-2 py-0.5 text-[10px] transition-all hover:opacity-80" style="background: ' + THEME.surface + '; color: ' + THEME.textMuted + '; border: 1px solid rgba(0,0,0,0.1);">[' + link.text + ']</a>').join('') + (item.links.length > 3 ? '<span class="rounded-full px-2 py-0.5 text-[10px]" style="background: ' + THEME.surface + '; color: ' + THEME.textMuted + ';">+' + (item.links.length - 3) + '</span>' : '') + '</div>' : ''}
          </div>
        </div>
      `).join('');
    }

    // Lightbox functions
    function openLightbox(index) {
      currentItem = filteredData[index];
      currentImageIndex = 0;
      updateLightbox();
      const lightbox = document.getElementById('lightbox');
      lightbox.style.display = '';
      lightbox.classList.remove('hidden');
      lightbox.classList.add('flex');
      document.body.style.overflow = 'hidden';
    }

    function closeLightbox() {
      document.getElementById('lightbox').classList.add('hidden');
      document.getElementById('lightbox').classList.remove('flex');
      document.body.style.overflow = '';
    }

    function updateLightbox() {
      if (!currentItem) return;
      
      const img = currentItem.images[currentImageIndex];
      document.getElementById('lightboxImage').src = img?.url || '';
      document.getElementById('lightboxTitle').textContent = currentItem.name;
      document.getElementById('lightboxSubtitle').textContent = currentItem.subtitle || '';
      document.getElementById('lightboxLink').href = img?.url || '#';
      document.getElementById('imageCounter').textContent = `${currentImageIndex + 1} / ${currentItem.images.length}`;
      
      // Tags
      const tagsContainer = document.getElementById('lightboxTags');
      if (currentItem.tags && currentItem.tags.length > 0) {
        tagsContainer.innerHTML = currentItem.tags.map(tag => 
          '<span class="inline-block rounded-full px-3 py-1 text-xs" style="' + getTagStyle(tag) + '">' + tag + '</span>'
        ).join('');
        tagsContainer.classList.remove('hidden');
      } else {
        tagsContainer.classList.add('hidden');
      }
      
      // Key info
      const keyInfoContainer = document.getElementById('lightboxKeyInfo');
      if (currentItem.keyFields && currentItem.keyFields.length > 0) {
        keyInfoContainer.innerHTML = currentItem.keyFields.map(field =>
          `<div class="rounded-lg p-3" style="background: rgba(0,0,0,0.03);">
            <span class="text-xs font-medium" style="color: ${THEME.textMuted};">${field.label}</span>
            <p class="mt-1 text-sm font-medium" style="color: ${THEME.textPrimary};">${field.value}</p>
          </div>`
        ).join('');
        keyInfoContainer.classList.remove('hidden');
      } else {
        keyInfoContainer.classList.add('hidden');
      }
      
      // Other info
      const otherInfoContainer = document.getElementById('lightboxOtherInfo');
      if (currentItem.otherFields && currentItem.otherFields.length > 0) {
        otherInfoContainer.innerHTML = currentItem.otherFields.map(field =>
          `<div class="text-sm">
            <span class="font-medium" style="color: ${THEME.textMuted};">${field.label}:</span>
            <span style="color: ${THEME.textPrimary};">${field.value}</span>
          </div>`
        ).join('');
        otherInfoContainer.classList.remove('hidden');
      } else {
        otherInfoContainer.classList.add('hidden');
      }
      
      // Thumbnails - 水平预览条
      const thumbnailsContainer = document.getElementById('thumbnails');
      thumbnailsContainer.innerHTML = currentItem.images.map((img, idx) =>
        `<img src="${img.url}" alt="${img.alt || ''}"
              style="width: 48px; height: 48px; flex-shrink: 0; cursor: pointer; border-radius: 8px; object-fit: cover; transition: all 0.2s; ${idx === currentImageIndex ? 'border: 2px solid ' + THEME.primary + '; opacity: 1;' : 'border: 2px solid transparent; opacity: 0.5;'}"
              onclick="currentImageIndex = ${idx}; updateLightbox();">`
      ).join('');
      
      // Links (普通链接)
      const linksSection = document.getElementById('lightboxLinksSection');
      const linksContainer = document.getElementById('lightboxLinks');
      if (currentItem.links && currentItem.links.length > 0) {
        linksContainer.innerHTML = currentItem.links.map(link =>
          `<a href="${link.url}" target="_blank" rel="noopener" 
              class="inline-flex items-center rounded-full px-3 py-1 text-xs transition-all hover:opacity-80"
              style="background: ${THEME.surface}; color: ${THEME.primary}; border: 1px solid ${THEME.primary}40;">
            ${link.text}
            <svg class="ml-1 h-3 w-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
          </a>`
        ).join('');
        linksSection.classList.remove('hidden');
      } else {
        linksSection.classList.add('hidden');
      }
      
      // References (参考文献引用)
      const refsSection = document.getElementById('lightboxRefsSection');
      const refsContainer = document.getElementById('lightboxRefs');
      if (currentItem.references && currentItem.references.length > 0) {
        refsContainer.innerHTML = currentItem.references.map(ref =>
          `<a href="${ref.url}" target="_blank" rel="noopener" 
              class="inline-flex items-center rounded-full px-2 py-0.5 text-xs transition-all hover:opacity-80"
              style="background: ${THEME.textMuted}20; color: ${THEME.textMuted};">
            [${ref.text}]
            <svg class="ml-1 h-2.5 w-2.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
          </a>`
        ).join('');
        refsSection.classList.remove('hidden');
      } else {
        refsSection.classList.add('hidden');
      }
      
      // Nav buttons
      document.getElementById('prevBtn').style.display = currentItem.images.length > 1 ? '' : 'none';
      document.getElementById('nextBtn').style.display = currentItem.images.length > 1 ? '' : 'none';
    }

    function prevImage() {
      if (!currentItem) return;
      currentImageIndex = (currentImageIndex - 1 + currentItem.images.length) % currentItem.images.length;
      updateLightbox();
    }

    function nextImage() {
      if (!currentItem) return;
      currentImageIndex = (currentImageIndex + 1) % currentItem.images.length;
      updateLightbox();
    }

    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
      if (document.getElementById('lightbox').classList.contains('hidden')) return;
      if (e.key === 'Escape') closeLightbox();
      if (e.key === 'ArrowLeft') prevImage();
      if (e.key === 'ArrowRight') nextImage();
    });

    // Click outside to close
    document.getElementById('lightbox').addEventListener('click', function(e) {
      if (e.target === this) closeLightbox();
    });
    
    // Make multiple images in table cells horizontal and add click to view
    function initTableImages() {
      document.querySelectorAll('.markdown-content td').forEach(td => {
        const images = td.querySelectorAll('img');
        if (images.length > 0) {
          td.classList.add('has-images');
          // Remove br tags between images
          td.querySelectorAll('br').forEach(br => br.remove());
          // Add click handler to each image
          images.forEach(img => {
            img.style.cursor = 'pointer';
            img.addEventListener('click', function(e) {
              e.preventDefault();
              e.stopPropagation();
              openImageViewer(this.src);
            });
          });
        }
      });
    }
    
    // Current image URL for download
    let currentImageUrl = '';
    
    // Simple image viewer for table images
    function openImageViewer(src) {
      const viewer = document.getElementById('imageViewer');
      const img = document.getElementById('imageViewerImg');
      
      img.src = src;
      currentImageUrl = src;
      
      viewer.style.display = '';
      viewer.classList.remove('hidden');
      viewer.classList.add('flex');
      document.body.style.overflow = 'hidden';
    }
    
    function closeImageViewer() {
      const viewer = document.getElementById('imageViewer');
      viewer.classList.add('hidden');
      viewer.classList.remove('flex');
      document.body.style.overflow = '';
    }
    
    // Show download toast
    function showDownloadToast() {
      const toast = document.getElementById('downloadToast');
      if (toast) {
        toast.classList.add('show');
        setTimeout(() => {
          toast.classList.remove('show');
        }, 3000);
      }
    }
    
    // Download current image and show toast
    function downloadImage() {
      console.log('[downloadImage] called, currentImageUrl:', currentImageUrl);
      showDownloadToast();
      if (currentImageUrl) {
        // Open image in new tab (download may not work for cross-origin images)
        window.open(currentImageUrl, '_blank');
      }
    }
    
    // ESC key to close image viewer
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        const viewer = document.getElementById('imageViewer');
        if (viewer && !viewer.classList.contains('hidden')) {
          closeImageViewer();
        }
      }
    });
    
    // Make all figure images clickable
    function initFigureImages() {
      document.querySelectorAll('.markdown-content figure img, .markdown-content .image-grid img').forEach(img => {
        img.style.cursor = 'pointer';
        img.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          openImageViewer(this.src);
        });
      });
    }

    // Toggle ticket expand/collapse
    function toggleTickets(btn) {
      const group = btn.closest('.ticket-spot-group');
      if (group) {
        group.classList.toggle('expanded');
      }
    }

    // Device detection for attraction, hotel and ticket links
    function initDeviceLinks() {
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      
      // Handle general device links (attraction, hotel, ticket)
      document.querySelectorAll('.attraction-link, .hotel-link, .ticket-buy, .device-link').forEach(link => {
        const pcUrl = link.dataset.pc;
        const mobileUrl = link.dataset.mobile;
        if (isMobile && mobileUrl) {
          link.href = mobileUrl;
        } else if (!isMobile && pcUrl) {
          link.href = pcUrl;
        }
        // Fallback: use whatever is available
        if (!link.href || link.href === window.location.href || link.href === '#') {
          link.href = mobileUrl || pcUrl || '#';
        }
        // Hide link if no valid URL
        if (!link.href || link.href === '#' || link.href === window.location.href) {
          link.style.display = 'none';
        }
      });
      
      // Handle navigation links (different URLs for PC vs Mobile)
      document.querySelectorAll('.nav-link').forEach(link => {
        const currentHref = link.getAttribute('href');
        const lon = link.dataset.lon;
        const lat = link.dataset.lat;
        const name = link.dataset.name || '目的地';
        
        if (lon && lat) {
          if (isMobile) {
            // Mobile: use navigation link with route planning + app launch
            const mobileUrl = `https://uri.amap.com/navigation?to=${lon},${lat},${encodeURIComponent(name)}&src=qwen_task&callnative=1`;
            link.href = mobileUrl;
          } else {
            // PC: use marker link (no auto-locate origin support)
            const pcUrl = `https://uri.amap.com/marker?position=${lon},${lat}&name=${encodeURIComponent(name)}&coordinate=gaode`;
            link.href = pcUrl;
          }
        }
      });
      
      // Handle mobile-only elements (spot-taxi: show on mobile, hide on PC)
      document.querySelectorAll('.spot-taxi').forEach(el => {
        if (!isMobile) {
          el.style.display = 'none';
        } else {
          el.style.display = 'inline-block';
        }
      });
    }

    // ================================================================
    // SMART INITIALIZATION - 按需加载和延迟执行
    // ================================================================
    
    // 检测页面需要哪些库
    function detectRequiredLibs() {
      const required = { mermaid: false, echarts: false, viz: false, katex: false };
      
      // 检测所有代码块（包括有无 data-renderable 属性的）
      document.querySelectorAll('code[class*="language-"]').forEach(code => {
        const langMatch = code.className.match(/language-(\w+)/);
        if (!langMatch) return;
        const lang = langMatch[1].toLowerCase();
        
        if (['mermaid', 'tree', 'ascii-tree'].includes(lang)) {
          required.mermaid = true;
        }
        if (['dot', 'graphviz'].includes(lang)) {
          required.viz = true;
        }
        if (lang === 'echarts') {
          required.echarts = true;
        }
      });
      
      // 检测内联脚本中是否使用了 ECharts
      document.querySelectorAll('script:not([src])').forEach(script => {
        if (script.textContent && script.textContent.includes('echarts')) {
          required.echarts = true;
        }
      });
      
      // 检测 KaTeX - 只检测页面可见文本中的数学公式
      // 排除 script 和 style 标签的内容
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = document.body.innerHTML;
      tempDiv.querySelectorAll('script, style, noscript').forEach(el => el.remove());
      const bodyText = tempDiv.textContent || '';
      
      // 检测块级公式
      const displayMathMatch = bodyText.match(/\$\$([^\$]+)\$\$/);
      const hasDisplayMath = displayMathMatch && displayMathMatch[1].trim().length > 0;
      // 检测 LaTeX 分隔符
      const hasLatexDelimiters = /\\[[\s\S]+?\\]|\\([\s\S]+?\\)/.test(bodyText);
      
      if (hasDisplayMath || hasLatexDelimiters) {
        required.katex = true;
      }
      
      return required;
    }
    
    // 按需加载库
    async function loadRequiredLibs(required) {
      const promises = [];
      
      if (required.katex) {
        loadStyle(window.LAZY_LIBS.katexCss);
        promises.push(new Promise(resolve => {
          loadScript(window.LAZY_LIBS.katex, () => {
            loadScript(window.LAZY_LIBS.katexAuto, () => {
              renderMathInElement(document.body, {
                delimiters: [
                  {left: '$$', right: '$$', display: true},
                  {left: '$', right: '$', display: false},
                  {left: '\\[', right: '\\]', display: true},
                  {left: '\\(', right: '\\)', display: false}
                ],
                throwOnError: false,
                ignoredTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'table', 'td', 'th', 'tr', 'thead', 'tbody']
              });
              resolve();
            });
          });
        }));
      }
      
      if (required.mermaid) {
        promises.push(new Promise(resolve => loadScript(window.LAZY_LIBS.mermaid, resolve)));
      }
      
      if (required.viz) {
        // Viz.js v3 standalone 单文件版本
        promises.push(new Promise(resolve => loadScript(window.LAZY_LIBS.viz, resolve)));
      }
      
      if (required.echarts) {
        promises.push(new Promise(resolve => loadScript(window.LAZY_LIBS.echarts, resolve)));
      }
      
      return Promise.all(promises);
    }
    
    // 使用 requestIdleCallback 延迟执行非关键任务
    function scheduleIdleTask(task) {
      if ('requestIdleCallback' in window) {
        requestIdleCallback(task, { timeout: 2000 });
      } else {
        setTimeout(task, 100);
      }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', async function() {
      // 0. 标记页面加载完成，触发淡入动画（防止FOUC）
      requestAnimationFrame(() => {
        document.body.classList.add('loaded');
      });
      
      // 1. 关键任务 - 立即执行
      initCodeCopy();
      initFigureImages();
      initDeviceLinks();
      
      // 2. 检测并按需加载库
      const required = detectRequiredLibs();
      
      // 加载所有需要的库（包括 KaTeX）
      if (required.mermaid || required.viz || required.echarts || required.katex) {
        await loadRequiredLibs(required);
        // 库加载完成后渲染图表
        if (required.mermaid || required.viz || required.echarts) {
          initRenderableCodeBlocks();
        }
      }
      
      // 3. 非关键任务 - 延迟执行
      scheduleIdleTask(() => {
        initTableImages();
        
        // 卡片画廊
        if (CARDS_DATA.length > 0) {
          renderFilters();
          renderGallery();
          document.getElementById('searchInput')?.addEventListener('input', applyFilters);
        }
      });
    });

  </script>
</body>
</html>